webpackJsonp([1],{"+ccy":function(t,e){},"0IuS":function(t,e){},"1QwG":function(t,e){},"1qQb":function(t,e){},"28K2":function(t,e){},"6Bwa":function(t,e){},"D7+V":function(t,e){},EYnv:function(t,e){},EclP:function(t,e){},FNcn:function(t,e){},I5E7:function(t,e){},JeRs:function(t,e){},KSwb:function(t,e,a){t.exports=a.p+"static/img/Kapitan-Logo-Vertical-Version-01.bc53028.png"},LAvJ:function(t,e){},M6NR:function(t,e){},Mm0M:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("fZjL"),n=a.n(r),s=a("mtWM"),i=a.n(s),o=a("DWlv"),l=a.n(o),c=a("7t+N"),u=a.n(c),d=a("K3J8"),m=a.n(d),p=(a("ao2D"),a("rk6y"),a("trBP")),v=(a("1QwG"),a("iI18")),f=(a("EYnv"),a("7+uW")),g=a("sUu7"),h=a("SjS3"),_=a.n(h),C=a("wGWZ"),b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"modal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("p",{domProps:{innerHTML:t._s(t.modalData.situation.message||"")}})]),t._v(" "),a("div",{staticClass:"modal-footer"},t._l(t.returnButtons,function(e){return a("button",{key:e.text,staticClass:"btn",class:e.class,attrs:{type:"button",value:e.value,"data-dismiss":e.dismiss?"modal":""},on:{click:function(a){return a.preventDefault(),t.reaction(e.value)}}},[t._v("\n          "+t._s(e.text)+"\n        ")])}),0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"modal-label"}},[this._v("提示訊息")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var D={name:"App",data:function(){return{modalData:{callBy:{path:"",vm:null},methods:{deleteInvalidProjects:null},situation:{event:"",message:"",data:{}},reaction:function(){}}}},components:{Modal:a("VU/8")({data:function(){return{buttos:[{type:"checked",text:"我知道了",value:"checked",class:["btn-primary"],dismiss:!0},{type:"yesNo",text:"是",value:1,class:["btn-primary"],dismiss:!1},{type:"yesNo",text:"否",value:0,class:["btn-danger"],dismiss:!0}]}},props:["modalData"],methods:{reaction:function(t){this.$eventBus.$emit("emitModalValue",t),this.modalData.correspond()}},computed:{returnButtons:function(){var t=this,e=[];return this.buttos.forEach(function(a){a.type==t.modalData.situation.buttonType&&e.push(a)}),e}}},b,!1,function(t){a("M6NR")},"data-v-1bce9e91",null).exports},created:function(){var t=this;this.$eventBus.$on("emitModalData",function(e){t.modalData=e})}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Modal",{attrs:{modalData:this.modalData}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var I=a("VU/8")(D,P,!1,function(t){a("gc1I")},null,null).exports,k=a("/ocq"),A={data:function(){return{navbarListClass:["navbar-nav","justify-self-center","align-self-center","w-100","p-0","flex-row","align-items-center","position-relative"],navbarLinks:{logo:{path:"/",ItemID:"logo-link",selfClass:["mr-2"],routerTo:"/",imgSrc:"../../../assets/img/logo.png"},signIn:{path:"/Login",ItemID:"sign-in-link",selfClass:["nav-link","text-link","nav-link","ml-md-auto","ml-3","mr-4"],routerTo:"/Login",selfText:"登入註冊"},signOut:{ItemID:"sign-out-link",selfClass:["nav-link","text-link","nav-link","ml-md-auto","ml-3","mr-4"],selfText:"立即登出",routerTo:""},store:{path:"/Store",ItemID:"store-link",selfClass:["nav-link","text-link","nav-link","mr-4"],routerTo:"/Store",selfText:"挑選航程"},cart:{path:"/Cart",ItemID:"cart-link",selfClass:["nav-link","icon-link","ml-2","mr-sm-4","mr-3","position-relative"],routerTo:"/Cart",iconClass:["fas","fa-shopping-cart","fa-lg"]},memberCentre:{path:"/Member-Centre",ItemID:"memberCentre-link",selfClass:["nav-link","icon-link"],routerTo:"/Member-Centre",iconClass:["fas","fa-user","fa-lg"]}},cartItemsNum:0,hamburgerButtonToggle:!1,currentPath:"/",loginData:{login:!1,memberID:null}}},created:function(){var t=this;this.$eventBus.$on("emitSignInStatus",function(e){t.loginData.login=e}),this.$eventBus.$on("emitCartUpdate",function(e){t.cartItemsNum=e}),this.currentPath=this.$router.currentRoute.path;var e=JSON.parse(localStorage.getItem("savingProjects"));null!=e&&(this.cartItemsNum=e.length),this.queryMemberInfo()},methods:{collapseHamburgerList:function(){var t=this;setTimeout(function(){t.hamburgerButtonToggle=!1},400)},queryMemberInfo:function(){var t=this.GlobalFunctions.getKapitanSession("forestage"),e=this;e.loginData.login=!1,this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/SignInAuthentication.php",t).then(function(t){if(t.data.sessionCheck)return e.loginData.login=!0,e.loginData.memberID=t.data.signInedID,e.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Universal/QueryMemberInfo.php",e.loginData.memberID);e.loginData.login=!1}).catch(function(t){console.log(t)})},signOut:function(){var t=this;setTimeout(function(){document.cookie="kapitanMembersSession\t= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",t.loginData.login=!1,t.$router.push({name:"首頁"})},1e3)}},computed:{returnNavbarLinks:function(){if(this.loginData.login){var t=[];for(var e in this.navbarLinks)"signIn"!=e&&t.push(this.navbarLinks[e]);return t}var a=[];for(var r in this.navbarLinks)"signOut"!=r&&a.push(this.navbarLinks[r]);return a},returnBurgerMenuLinks:function(){if(this.loginData.login){var t=[];for(var e in this.navbarLinks)"signIn"!=e&&this.navbarLinks[e].selfClass.includes("text-link")&&t.push(this.navbarLinks[e]);return t}var a=[];for(var r in this.navbarLinks)"signOut"!=r&&this.navbarLinks[r].selfClass.includes("text-link")&&a.push(this.navbarLinks[r]);return a}},watch:{$route:function(t,e){this.currentPath=this.$router.currentRoute.path},cartItemsNum:function(){this.cartItemsNum=this.cartItemsNum}}},y={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"position-fixed",attrs:{id:"nav-bar-container"}},[r("div",{staticClass:"backgroud d-flex w-100 position-fixed"},[r("div",{staticClass:"nav-bar container d-flex justify-content-center position-relative",attrs:{id:"nav-bar"}},[r("div",{staticClass:"position-absolute align-self-center",attrs:{id:"hamburger-menu"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.hamburgerButtonToggle,expression:"hamburgerButtonToggle"}],staticClass:"d-block position-absolute",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hamburgerButtonToggle)?t._i(t.hamburgerButtonToggle,null)>-1:t.hamburgerButtonToggle},on:{change:function(e){var a=t.hamburgerButtonToggle,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&(t.hamburgerButtonToggle=a.concat([null])):s>-1&&(t.hamburgerButtonToggle=a.slice(0,s).concat(a.slice(s+1)))}else t.hamburgerButtonToggle=n}}}),t._v(" "),t._l(3,function(t,e){return r("span",{key:"span"+e,staticClass:"d-block position-relative"})})],2),t._v(" "),r("ul",{class:t.navbarListClass,attrs:{id:"navbar-list"}},t._l(t.returnNavbarLinks,function(e,n){return r("li",{key:n,attrs:{id:e.ItemID}},["sign-out-link"==e.ItemID&&t.loginData.login?r("a",{class:t.navbarLinks.signOut.selfClass,attrs:{id:e.ItemID},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("立即登出\n          ")]):t._e(),t._v(" "),"sign-out-link"!=e.ItemID?r("router-link",{class:[e.selfClass,{"current-link":-1!=t.currentPath.indexOf(e.path)}],attrs:{id:e.ItemID,to:e.routerTo}},["logo-link"==e.ItemID?r("img",{attrs:{id:"logo-img",src:a("ixDS"),alt:""}}):t._e(),t._v(" "),e.selfClass.includes("text-link")?r("span",[t._v(t._s(e.selfText))]):t._e(),t._v(" "),e.selfClass.includes("icon-link")?r("i",{class:e.iconClass}):t._e(),t._v(" "),"cart-link"==e.ItemID&&t.cartItemsNum>0?r("div",{staticClass:"position-absolute",attrs:{id:"cart-items-remark"}}):t._e()]):t._e()],1)}),0)])]),t._v(" "),r("ul",{staticClass:"position-fixed",class:{"show-hamburger-menu-list":t.hamburgerButtonToggle},attrs:{id:"hamburger-menu-list"}},t._l(t.returnBurgerMenuLinks,function(e,a){return r("li",{key:a},["sign-out-link"==e.ItemID&&t.loginData.login?r("a",{staticClass:"hamburger-menu-link nav-link",class:{"current-hamburger-menu-link":e.path==t.currentPath},attrs:{id:e.ItemID},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("立即登出\n      ")]):t._e(),t._v(" "),"sign-out-link"!=e.ItemID?r("router-link",{staticClass:"hamburger-menu-link nav-link",class:{"current-hamburger-menu-link":e.path==t.currentPath},attrs:{to:e.routerTo},nativeOn:{click:function(e){return t.collapseHamburgerList(e)}}},[t._v(t._s(e.selfText))]):t._e()],1)}),0)])},staticRenderFns:[]};var E={data:function(){return{contactInfo:{address:{iconClass:["fas","fa-map-marker-alt"],innerHTML:"251 新北市淡水區觀海路201號",onClickEvent:function(){window.location.href="https://goo.gl/maps/HDg6TVKTjm6FDMmh8"}},email:{iconClass:["fas","fa-envelope"],innerHTML:"service@Kapitan.com",onClickEvent:function(){window.open("mailto:service@Kapitan.com")}},phone:{iconClass:["fas","fa-phone-alt"],innerHTML:"（886）2-3345-6789",onClickEvent:function(){window.open("tel:+886233456789")}}},communityLinks:{facebook:{iconClass:["fab","fa-facebook-f"],link:"https://www.facebook.com/"},twitter:{iconClass:["fab","fa-twitter"],link:"https://twitter.com/"},instagram:{iconClass:["fab","fa-instagram"],link:"https://www.instagram.com/"},linkedinIn:{iconClass:["fab","fa-linkedin-in"],link:"https://www.linkedin.com/"}},showFakeCopyRightDescription:!1,showFakePrivacyPolicy:!1}},methods:{linkTo:function(t){window.location.href=t}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"container-fluid position-relative"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row d-lg-block px-5",attrs:{id:"footer-row-01"}},[a("div",{staticClass:"float-lg-left col-lg-5 h-lg-100 col-md-6",attrs:{id:"footer-contact-info"}},[a("ul",{staticClass:"contact-info-list mt-2 ml-2"},t._l(t.contactInfo,function(e,r){return a("li",{key:r,staticClass:"mb-4"},[a("div",{staticClass:"d-inline-flex align-items-center",on:{click:t.contactInfo[r].onClickEvent}},[a("div",{staticClass:"contact-icon-block d-inline-flex justify-content-center align-items-center mr-3"},[a("i",{staticClass:"contact-icon",class:t.contactInfo[r].iconClass})]),t._v(" "),a("div",{staticClass:"contact-text-block d-inline-flex",domProps:{innerHTML:t._s(t.contactInfo[r].innerHTML)},on:{click:t.contactInfo[r].onClickEvent}})])])}),0)]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"float-lg-left h-lg-50 col-lg-7 col-md-12 mt-sm-4",attrs:{id:"footer-row-for-community-and-edm"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 col-xs-12 mb-md-0 mb-3",attrs:{id:"footer-community-links"}},[a("h6",{staticClass:"mb-3"},[t._v("在社群網站上追蹤甲必丹")]),t._v(" "),a("ul",{staticClass:"community-link-list d-flex flex-row"},t._l(t.communityLinks,function(e,r){return a("li",{key:r,staticClass:"d-flex justify-content-center align-items-center",on:{click:function(e){return t.linkTo(t.communityLinks[r].link)}}},[a("i",{class:t.communityLinks[r].iconClass})])}),0)]),t._v(" "),t._m(1)])])])]),t._v(" "),a("div",{staticClass:"container"},[a("hr"),t._v(" "),a("div",{staticClass:"row px-sm-4"},[a("div",{staticClass:"col-sm-6 col-12 d-flex align-items-center"},[a("h6",{staticClass:"fake-copy-right",on:{mouseenter:function(e){t.showFakeCopyRightDescription=!0},mouseleave:function(e){t.showFakeCopyRightDescription=!1}}},[t._v("\n          © 2035 Kapitan. all rights reserved.\n          "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showFakeCopyRightDescription,expression:"showFakeCopyRightDescription"}],staticClass:"fake-copy-right-des text-warning"},[t._v("（練習作品而已，絕大多數圖文來自網路）")])])]),t._v(" "),a("div",{staticClass:"ml-sm-auto ml-3 my-sm-0 my-1"},[a("ul",{staticClass:"mass-links-list d-flex flex-row align-items-center justify-content-end"},[a("li",{staticClass:"position-relative",on:{mouseenter:function(e){t.showFakePrivacyPolicy=!0},mouseleave:function(e){t.showFakePrivacyPolicy=!1}}},[t._v("\n            隱私權政策\n            "),t.showFakePrivacyPolicy?a("div",{staticClass:"reminder-bubble position-absolute d-flex justify-content-center align-items-center"},[t._v("\n              僅做樣式，無效果\n            ")]):t._e()]),t._v(" "),a("li",{staticClass:"ml-3",on:{click:function(e){return t.linkTo("https://www.104.com.tw/jobs/main/")}}},[t._v("\n            加入甲必丹\n          ")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"float-lg-left h-lg-50 pt-lg-1 col-lg-7 col-md-6 my-md-0 my-3",attrs:{id:"footer-Kapitans-mission"}},[e("h5",[this._v("甲必丹的使命")]),this._v(" "),e("p",[this._v("\n          「來到這裡的每個人，都能以最優雅的姿態、最愉快的體驗，繼承先祖們的冒險精神。感受深藏在我們基因中的『甲必丹』情懷。」\n          ── 甲必丹執行長 · 鄭賢之\n        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 col-xs-12",attrs:{id:"footer-subscribe-edm"}},[e("h6",{staticClass:"mb-3"},[this._v("或訂閱我們的電子報")]),this._v(" "),e("div",{staticClass:"input-group mb-3"},[e("input",{staticClass:"form-control",attrs:{type:"email",placeholder:"請輸入電子信箱...","aria-label":"Recipient's username","aria-describedby":"basic-addon2"}}),this._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn",attrs:{type:"button"}},[this._v("訂閱")])])])])}]};var x={components:{ForestageNavbar:a("VU/8")(A,y,!1,function(t){a("h0as")},"data-v-23aac75c",null).exports,ForestageFooter:a("VU/8")(E,M,!1,function(t){a("igBC")},"data-v-3dc882e0",null).exports}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"forestage-container"}},[e("ForestageNavbar"),this._v(" "),e("router-view"),this._v(" "),e("ForestageFooter")],1)},staticRenderFns:[]};var O=a("VU/8")(x,w,!1,function(t){a("Mm0M")},"data-v-3d365a7a",null).exports,T=a("BO1k"),j=a.n(T),R={data:function(){return{windowWidth:window.innerWidth,carouselData:{carouselProjectsArr:[],carouselCurrentOffSet:0,carouselXaxisPixels:0,beyondIndex:4},bookingProcessData:[{stepIndex:0,name:"網路預約",description:"成為甲必丹會員，在網站上預約非72小時內的行程",iconUrl:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/nhsu2aebmf51uksv22gr.png"},{stepIndex:1,name:"",iconUrl:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/hzldarybdbxzfyfmpj5k.png"},{stepIndex:2,name:"獲取憑證",description:"獲取系統寄發的預約憑證，48小時內可以取消",iconUrl:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/nv8pnayasuzeb38p6jij.png"},{stepIndex:3,name:"",iconUrl:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/hzldarybdbxzfyfmpj5k.png"},{stepIndex:4,name:"開心出遊",description:"根據預約憑證前往會合碼頭，盡情享受水上時光",iconUrl:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/m4zjzxm32nigiosophvt.png"}]}},created:function(){window.scrollTo(0,0);var t=this;this.$http.get("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryRandomProjectsList.php").then(function(e){t.carouselData.carouselProjectsArr=e.data})},methods:{slideCarousel:function(t){var e=document.querySelectorAll(".router-link"),a=0,r=this.carouselData.carouselCurrentOffSet;if(this.windowWidth>1200?a=355:this.windowWidth<=1200&&this.windowWidth>960?(a=350,this.carouselData.beyondIndex=5):this.windowWidth<=960&&this.windowWidth>720?(a=305,this.carouselData.beyondIndex=5):(this.windowWidth<=720&&this.windowWidth,a=305,this.carouselData.beyondIndex=6),r+t!=-1*this.carouselData.beyondIndex||r+t!=1){this.carouselData.carouselCurrentOffSet+=t,this.carouselData.carouselXaxisPixels=a*this.returnOffSet;var n=this.carouselData.carouselXaxisPixels,s=!0,i=!1,o=void 0;try{for(var l,c=j()(e);!(s=(l=c.next()).done);s=!0){l.value.style.transform="translate3d("+n+"px, 0, 0)"}}catch(t){i=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(i)throw o}}}}},computed:{returnOffSet:function(){var t=this.carouselData.carouselCurrentOffSet,e=this.carouselData.beyondIndex;if(t<-1*(e-1))this.carouselData.carouselCurrentOffSet=-1*(e-1);else{if(!(t>0))return this.carouselData.carouselCurrentOffSet;this.carouselData.carouselCurrentOffSet=0}return this.carouselData.carouselCurrentOffSet},returnBeyondIndex:function(){return this.windowWidth>1200?4:this.windowWidth<=1200&&this.windowWidth>960?5:this.windowWidth<=960&&this.windowWidth>720?5:(this.windowWidth<=720&&this.windowWidth,6)}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container-fluid",attrs:{id:"home-page"}},[t._m(0),t._v(" "),a("section",{staticClass:"container position-relative mx-auto",attrs:{id:"chapter-carousel"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h2",{staticClass:"chapter-title text-center mb-2"},[t._v("最多元的遊艇行程")]),t._v(" "),a("h5",{staticClass:"mx-auto mb-5 text-center"},[t._v("\n          自然景觀、文化巡禮、水上活動，一應俱全\n        ")]),t._v(" "),a("div",{staticClass:"carousel-controls left-arrow d-inline-block position-absolute",on:{click:function(e){return t.slideCarousel(1)}}},[a("i",{staticClass:"fas fa-chevron-left"})]),t._v(" "),a("div",{staticClass:"carousel-controls right-arrow d-inline-block position-absolute",on:{click:function(e){return t.slideCarousel(-1)}}},[a("i",{staticClass:"fas fa-chevron-right"})]),t._v(" "),a("div",{staticClass:"position-relative mx-auto",attrs:{id:"projects-carousel-area"}},[a("ul",{staticClass:"position-absolute d-flex justify-content-between",attrs:{id:"cards-list"}},t._l(t.carouselData.carouselProjectsArr,function(e,r){return a("router-link",{key:e.PROJECT_ID,staticClass:"router-link d-block",attrs:{"data-id":e.PROJECT_ID,to:{name:"方案",params:{selectedProjectID:t.carouselData.carouselProjectsArr[r].PROJECT_ID}}}},[a("li",{key:e.PROJECT_NAME,staticClass:"card"},[a("img",{staticClass:"card-img-top",attrs:{src:null!=e.PROJECT_AVATAR_URL?t.GlobalVariables.cloudUrlprefix+e.PROJECT_AVATAR_URL:t.GlobalVariables.cloudUrlprefix+t.GlobalVariables.cloudNoImgUrl,alt:"這裡是卡片頂圖"}}),t._v(" "),a("div",{staticClass:"card-body position-relative"},[a("h6",{staticClass:"card-title"},[t._v("\n                    "+t._s(e.PROJECT_NAME)+"\n                  ")]),t._v(" "),a("p",{staticClass:"card-text"}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"card-people-num col-6 pl-0 position-absolute d-flex align-items-center"},[a("span",{staticClass:"d-flex align-items-center mr-1"},[a("i",{staticClass:"fas fa-users"})]),t._v(" "),a("span",{staticClass:"d-inline-block"},[t._v("\n                        "+t._s(e.PROJECT_MIN_NUM_OF_PEOPLE)+" -\n                        "+t._s(e.PROJECT_MAX_NUM_OF_PEOPLE)+"\n                      ")])]),t._v(" "),a("div",{staticClass:"card-price col-6 pr-0 text-right position-absolute"},[t._v("\n                      每人\n                      "),a("span",{staticClass:"price"},[t._v("\n                        "+t._s(t._f("dollarSign")(t._f("currency")(Number(e.PROJECT_ORIGINAL_PRICE_PER_PERSON))))+"\n                      ")])])])])])])}),1),t._v(" "),a("div",{staticClass:"position-absolute",attrs:{id:"carousel-pagination-block"}},[a("ul",{staticClass:"p-0 m-0 d-flex justify-content-between",attrs:{id:"carousel-pagination"}},t._l(t.returnBeyondIndex,function(e,r){return a("li",{key:r,class:Math.abs(t.carouselData.carouselCurrentOffSet)==r?"current-page":""})}),0)])]),t._v(" "),a("router-link",{attrs:{to:{name:"挑選航程",signInMode:!1}}},[a("button",{staticClass:"btn d-block mx-auto mt-5",attrs:{id:"select-voyage-btn"}},[t._v("\n            挑選航程\n          ")])])],1)])]),t._v(" "),a("section",{staticClass:"container d-flex flex-column",attrs:{id:"chapter-summary"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h2",{staticClass:"chapter-title text-center mb-2"},[t._v("超便捷的預約流程")]),t._v(" "),a("h5",{staticClass:"mx-auto mb-5 text-center"},[t._v("三個步驟即能開展您專屬的航程")]),t._v(" "),a("div",{staticClass:"d-flex flex-md-row justify-content-between flex-column align-items-center",attrs:{id:"booking-process"}},t._l(t.bookingProcessData,function(e,r){return a("div",{key:e.stepIndex,staticClass:"step-block d-flex flex-column",class:r%2!=0?"justify-content-center":""},[a("img",{staticClass:"mx-auto",class:r%2!=0?"arrow d-md-block":"d-block",attrs:{src:""+e.iconUrl,alt:""}}),t._v(" "),a("h4",{staticClass:"text-center mt-3"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"align-self-center text-center"},[t._v("\n              "+t._s(r%2!=0?"":e.description)+"\n            ")])])}),0)])])]),t._v(" "),a("section",{staticClass:"container",attrs:{id:"chapter-register"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h2",{staticClass:"chapter-title text-center mb-3"},[t._v("立即註冊會員")]),t._v(" "),a("h5",{staticClass:"mx-auto mb-5 text-center"},[t._v("現在就成為一位甲必丹")]),t._v(" "),a("div",{staticClass:"framework"},[a("router-link",{staticClass:"d-block position-relative",attrs:{id:"register-link",to:{name:"登入註冊",params:{signInMode:!1}}}},[a("img",{attrs:{src:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/se0t3xsriype9vl0j9vc.jpg",alt:""}}),t._v(" "),a("div",{staticClass:"position-absolute",attrs:{id:"click-register"}},[t._v("點擊註冊")])])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"mb-5",attrs:{id:"chapter-image"}},[e("div",{staticClass:"video-container position-relative"},[e("iframe",{staticClass:"position-absolute",attrs:{src:"https://www.youtube.com/embed/lkEOK0l7REE?controls=0&showinfo=0&mute=1&rel=0&autoplay=1&loop=1&playlist=lkEOK0l7REE",frameborder:"0",allowfullscreen:""}}),this._v(" "),e("h1",{staticClass:"text-center position-absolute",attrs:{id:"slogan"}},[this._v("\n        出海吧，台灣人\n        "),e("h2",{staticClass:"text-center mt-2",attrs:{id:"sub-slogan"}},[this._v("\n          喚醒冒險熱情×重啟親海基因\n        ")])])])])}]};var S=a("VU/8")(R,N,!1,function(t){a("Nol5")},"data-v-1cdce50b",null).exports,q=a("mvHQ"),$=a.n(q),L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ol",{staticClass:"breadcrumb p-0"},t._l(t.returnPagesArr,function(e,r){return a("li",{key:r,staticClass:"breadcrumb-item",class:r==t.breadCrumbData.currentPage-1?"active":"",attrs:{"aria-current":r==t.breadCrumbData.currentPage-1?"page":""},on:{click:function(e){return t.$router.push({name:t.returnPagesArr[r]})}}},[t._v("\n    "+t._s(t._f("filterSpecificRouterName")(e))+"\n  ")])}),0)},staticRenderFns:[]};var B=a("VU/8")({data:function(){return{}},props:["breadCrumbData"],computed:{returnPagesArr:function(){return this.breadCrumbData.pagesArr.splice(0,this.breadCrumbData.currentPage)}},filters:{filterSpecificRouterName:function(t){return t.replace("管理系統：","")}}},L,!1,function(t){a("yRXD")},"data-v-3e48a4b2",null).exports,F={props:["allContentArr","itemsNumPerPage"],data:function(){return{totalPagination:1,currentPageNum:1,currentPageContentArr:[]}},created:function(){this.allContentArr.length<=0?this.totalPagination=1:this.totalPagination=Math.ceil(this.allContentArr.length/this.itemsNumPerPage),this.selectPage(1)},methods:{selectPage:function(t){this.currentPageNum=t,this.updateContentByPage(this.currentPageNum),0==this.currentPageNum?this.currentPageNum=1:this.currentPageNum>this.totalPagination&&(this.currentPageNum=this.totalPagination);for(var e=[],a=1;a<=this.itemsNumPerPage;a++)e.push(a+(this.currentPageNum-1)*this.itemsNumPerPage);this.$emit("emitCurrentContentAndSerial",this.currentPageContentArr,e)},updateContentByPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(0==t)alert("已經是第一頁了！");else if(t>this.totalPagination)alert("已經是最後一頁了！");else{this.currentPageContentArr=[];for(var e=(t-1)*this.itemsNumPerPage,a=0;a<this.itemsNumPerPage;a++){if(!this.allContentArr[e])return;this.currentPageContentArr.push(this.allContentArr[e]),e++}}}},watch:{allContentArr:function(){this.allContentArr.length<=0?this.totalPagination=1:this.totalPagination=Math.ceil(this.allContentArr.length/this.itemsNumPerPage),this.selectPage(1)}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[t.totalPagination>1?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.selectPage(t.currentPageNum-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Previous")])])]):t._e(),t._v(" "),t._l(t.totalPagination,function(e,r){return a("li",{key:r+1,staticClass:"page-item",class:r+1==t.currentPageNum?"active":""},[a("a",{staticClass:"page-link",on:{click:function(e){return e.preventDefault(),t.selectPage(r+1)}}},[t._v(t._s(r+1))])])}),t._v(" "),t.totalPagination>1?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.selectPage(t.currentPageNum+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Next")])])]):t._e()],2)])},staticRenderFns:[]};var V=a("VU/8")(F,U,!1,function(t){a("tCc1")},"data-v-7fd2c90f",null).exports,G={data:function(){return{breadCrumbData:{pagesArr:["首頁","挑選航程"],currentPage:2},filterData:{selectedAll:!0,selectedCategories:["CG0001","CG0002","CG0003","CG0004","CG0005","CG0006"],budget:5e3,sort:"'%%'",showMobileFilters:{showNothing:!0,showFramework:!1,showCategories:!1,showBudget:!1,showSort:!1}},categoryList:[],allProjectsArr:[],currentPageContentArr:[],currentPageContentArrSerial:[],itemsNumPerPage:9,currentPageNum:1}},components:{Breadcrumb:B,Pagination:V},created:function(){window.scrollTo(0,0);var t=this;this.$http.get("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryCategoryList.php").then(function(e){return t.categoryList=e.data,console.log(t.filterData),t.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryProjectsList.php",$()(t.filterData))}).then(function(e){t.allProjectsArr=e.data})},methods:{queryFilteringProjects:function(){var t=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryProjectsList.php",$()(t.filterData)).then(function(e){t.allProjectsArr=e.data}),this.filterData.showMobileFilters.showNothing=!0},getCurrentContentAndSerial:function(t,e){this.currentPageContentArr=t,this.currentPageContentArrSerial=e},checkSelectAll:function(){var t=document.querySelectorAll(".category-checkbox");if(this.filterData.selectedAll){var e=!0,a=!1,r=void 0;try{for(var n,s=j()(t);!(e=(n=s.next()).done);e=!0){var i=n.value;this.filterData.selectedCategories.push(i.value)}}catch(t){a=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw r}}}else this.filterData.selectedCategories=[]}},watch:{filterData:{handler:function(){var t=document.querySelectorAll(".category-checkbox");this.filterData.selectedCategories.length==t.length?this.filterData.selectedAll=!0:this.filterData.selectedAll=!1;var e=this.filterData.showMobileFilters.showNothing,a=this.filterData.showMobileFilters.showCategories,r=this.filterData.showMobileFilters.showBudget,n=this.filterData.showMobileFilters.showSort;a||r||n?(this.filterData.showMobileFilters.showFramework=!0,this.filterData.showMobileFilters.showNothing=!1):a&&r&&n||(this.filterData.showMobileFilters.showFramework=!1),e&&(this.filterData.showMobileFilters.showFramework=!1,this.filterData.showMobileFilters.showCategories=!1,this.filterData.showMobileFilters.showBudget=!1,this.filterData.showMobileFilters.showSort=!1)},deep:!0},currentPageContentArr:function(){window.scrollTo(0,0)}}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container position-relative",attrs:{id:"store-page"}},[a("Breadcrumb",{attrs:{breadCrumbData:t.breadCrumbData}}),t._v(" "),a("div",{staticClass:"row d-flex"},[a("aside",{staticClass:"card pb-4 col-xl-2 d-xl-block order-xl-0 order-3",class:{"show-mobile-filter-anim":t.filterData.showMobileFilters.showFramework},attrs:{id:"aside-bar"}},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"mb-0 d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showCategories}},[t._v("\n          挑選地點\n        ")]),t._v(" "),a("hr",{staticClass:"d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showCategories}}),t._v(" "),a("ul",{staticClass:"pl-3 d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showCategories},attrs:{id:"category-list"}},[a("li",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterData.selectedAll,expression:"filterData.selectedAll"}],staticClass:"d-xl-inline-block",class:{"d-none":!t.filterData.showMobileFilters.showCategories},attrs:{type:"checkbox",name:"全選"},domProps:{checked:Array.isArray(t.filterData.selectedAll)?t._i(t.filterData.selectedAll,null)>-1:t.filterData.selectedAll},on:{change:[function(e){var a=t.filterData.selectedAll,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.filterData,"selectedAll",a.concat([null])):s>-1&&t.$set(t.filterData,"selectedAll",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.filterData,"selectedAll",n)},t.checkSelectAll]}}),t._v("\n            全選\n          ")]),t._v(" "),t._l(t.categoryList,function(e){return a("li",{key:e.CATEGORY_ID},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterData.selectedCategories,expression:"filterData.selectedCategories"}],staticClass:"category-checkbox d-xl-inline-block",class:{"d-none":!t.filterData.showMobileFilters.showCategories},attrs:{type:"checkbox",name:e.CATEGORY_NAME},domProps:{value:e.CATEGORY_ID,checked:Array.isArray(t.filterData.selectedCategories)?t._i(t.filterData.selectedCategories,e.CATEGORY_ID)>-1:t.filterData.selectedCategories},on:{change:function(a){var r=t.filterData.selectedCategories,n=a.target,s=!!n.checked;if(Array.isArray(r)){var i=e.CATEGORY_ID,o=t._i(r,i);n.checked?o<0&&t.$set(t.filterData,"selectedCategories",r.concat([i])):o>-1&&t.$set(t.filterData,"selectedCategories",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.filterData,"selectedCategories",s)}}}),t._v("\n            "+t._s(e.CATEGORY_NAME)+"\n          ")])})],2),t._v(" "),a("h5",{staticClass:"mt-4 mb-0 d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showBudget}},[t._v("\n          人均預算\n        ")]),t._v(" "),a("hr",{staticClass:"d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showBudget}}),t._v(" "),a("div",{staticClass:"budget mb-1 d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showBudget}},[t._v("\n          "+t._s(t._f("dollarSign")(t._f("currency")(Number(t.filterData.budget))))),a("span",{staticClass:"budget-remark"},[t._v("（含）以下")])]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterData.budget,expression:"filterData.budget"}],staticClass:"form-range d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showBudget},attrs:{type:"range",min:"0",max:"5000",step:"500",id:"budget"},domProps:{value:t.filterData.budget},on:{__r:function(e){return t.$set(t.filterData,"budget",e.target.value)}}})]),t._v(" "),a("h5",{staticClass:"mt-4 mb-0 d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showSort}},[t._v("\n          結果排序\n        ")]),t._v(" "),a("hr",{staticClass:"d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showSort}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterData.sort,expression:"filterData.sort"}],staticClass:"form-control form-select-lg d-xl-block",class:{"d-none":!t.filterData.showMobileFilters.showSort},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filterData,"sort",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("－請選擇－")]),t._v(" "),a("option",{attrs:{value:"'%%'"}},[t._v("預設")]),t._v(" "),a("option",{attrs:{value:"PROJECT_ORIGINAL_PRICE_PER_PERSON ASC"}},[t._v("\n            價格（低）\n          ")])]),t._v(" "),a("button",{staticClass:"btn btn-primary d-xl-block mx-xl-auto mt-5",class:t.filterData.showMobileFilters.showFramework?"d-block":"d-none",attrs:{id:"filter-button"},on:{click:function(e){return e.preventDefault(),t.queryFilteringProjects(e)}}},[t._v("\n          套用條件\n        ")]),t._v(" "),a("h3",{staticClass:"mt-5 text-center d-xl-none",class:{"d-none":t.filterData.showMobileFilters.showFramework}},[t._v("\n          已套用設定！\n        ")])])]),t._v(" "),a("section",{staticClass:"container col-xl-10 col-12 mb-5"},[t.currentPageContentArr.length>0?a("ul",{staticClass:"d-flex flex-wrap justify-content-sm-between justify-content-center",attrs:{id:"cards-list"}},t._l(t.currentPageContentArr,function(e,r){return a("router-link",{key:e.PROJECT_ID,staticClass:"router-link d-block mx-lg-0 mx-md-1 mb-5",attrs:{"data-id":e.PROJECT_ID,to:{name:"方案",params:{selectedProjectID:t.currentPageContentArr[r].PROJECT_ID}}}},[a("li",{key:e.PROJECT_NAME,staticClass:"card"},[a("img",{staticClass:"card-img-top",attrs:{src:null!=e.PROJECT_AVATAR_URL?t.GlobalVariables.cloudUrlprefix+e.PROJECT_AVATAR_URL:t.GlobalVariables.cloudUrlprefix+t.GlobalVariables.cloudNoImgUrl,alt:"這裡是卡片頂圖"}}),t._v(" "),a("div",{staticClass:"card-body position-relative"},[a("h6",{staticClass:"card-title"},[t._v("\n                "+t._s(e.PROJECT_NAME)+"\n              ")]),t._v(" "),a("p",{staticClass:"card-text"}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"card-people-num col-6 pl-0 position-absolute d-flex align-items-center"},[a("span",{staticClass:"d-inline-block mr-1"},[a("i",{staticClass:"fas fa-users"})]),t._v(" "),a("span",{staticClass:"d-inline-block"},[t._v("\n                    "+t._s(e.PROJECT_MIN_NUM_OF_PEOPLE)+" -\n                    "+t._s(e.PROJECT_MAX_NUM_OF_PEOPLE)+"\n                  ")])]),t._v(" "),a("div",{staticClass:"card-price col-6 pr-0 text-right position-absolute"},[t._v("\n                  每人\n                  "),a("span",{staticClass:"price"},[t._v("\n                    "+t._s(t._f("dollarSign")(t._f("currency")(Number(e.PROJECT_ORIGINAL_PRICE_PER_PERSON))))+"\n                  ")])])])])])])}),1):a("div",[a("div",{staticClass:"mx-auto py-5 d-flex flex-column justify-content-center align-items-center",attrs:{id:"no-project-found-block"}},[a("h3",{staticClass:"text-center"},[t._v("未能找到符合您篩選的條件")]),t._v(" "),a("img",{staticClass:"my-5",attrs:{src:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/glng164ywqhmq6s7xaje.png",alt:""}}),t._v(" "),a("h5",{staticClass:"text-center mt-2"},[t._v("請再嘗試調整看看吧！")])])])]),t._v(" "),a("ul",{staticClass:"position-fixed m-0 px-0 py-2 d-xl-none d-flex aligm-items-center",attrs:{id:"mobile-filter"}},[a("li",{on:{click:function(e){t.filterData.showMobileFilters.showCategories=!t.filterData.showMobileFilters.showCategories,t.filterData.showMobileFilters.showBudget=!1,t.filterData.showMobileFilters.showSort=!1}}},[a("i",{staticClass:"fas fa-filter"}),t._v(" 挑選地點\n      ")]),t._v(" "),a("li",{on:{click:function(e){t.filterData.showMobileFilters.showBudget=!t.filterData.showMobileFilters.showBudget,t.filterData.showMobileFilters.showCategories=!1,t.filterData.showMobileFilters.showSort=!1}}},[a("i",{staticClass:"fas fa-comment-dollar"}),t._v(" 人均預算\n      ")]),t._v(" "),a("li",{on:{click:function(e){t.filterData.showMobileFilters.showSort=!t.filterData.showMobileFilters.showSort,t.filterData.showMobileFilters.showBudget=!1,t.filterData.showMobileFilters.showCategories=!1}}},[a("i",{staticClass:"fas fa-sort-alpha-up"}),t._v(" 結果排序\n      ")])])]),t._v(" "),a("div",{staticClass:"row position-relative mb-5",attrs:{id:"pagination-row"}},[a("div",{staticClass:"col-12 d-flex justify-content-center",attrs:{id:"pagination-container"}},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.currentPageContentArr.length>0,expression:"currentPageContentArr.length > 0"}],attrs:{allContentArr:t.allProjectsArr,itemsNumPerPage:t.itemsNumPerPage},on:{emitCurrentContentAndSerial:t.getCurrentContentAndSerial}})],1)])],1)},staticRenderFns:[]};var J=a("VU/8")(G,K,!1,function(t){a("VW9B")},null,null).exports,H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"row mb-2",attrs:{id:"carousel-area"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"carousel slide",attrs:{id:"carousel-block","data-ride":"carousel"}},[a("ol",{staticClass:"carousel-indicators"},t._l(t.carouselData.carouselItems,function(t,e){return a("li",{key:e,class:0==e?"active":"",attrs:{"data-target":"#carousel-block","data-slide-to":e}})}),0),t._v(" "),a("div",{staticClass:"carousel-inner"},t._l(t.carouselData.carouselItems,function(e,r){return a("div",{key:"carouselItem"+r,staticClass:"carousel-item",class:0==r?"active":""},[a("img",{staticClass:"d-block w-100",attrs:{src:t.GlobalVariables.cloudUrlprefix+e,alt:"..."}})])}),0),t._v(" "),t._m(0),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"carousel-control-prev",attrs:{href:"#carousel-block",role:"button","data-slide":"prev"}},[e("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{staticClass:"sr-only"},[this._v("Previous")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"carousel-control-next",attrs:{href:"#carousel-block",role:"button","data-slide":"next"}},[e("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{staticClass:"sr-only"},[this._v("Next")])])}]};var W=a("VU/8")({data:function(){return{}},props:["carouselData"]},H,!1,function(t){a("iCDJ")},"data-v-193935f9",null).exports,z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{key:t.uniqueKey,staticClass:"input-group",attrs:{"data-id":t.uniqueKey}},[a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.number==t.min?t.$emit("update:incomingValue",t.number):t.$emit("update:incomingValue",--t.number)}}},[t._v("\n      －\n    ")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],staticClass:"form-control text-center",attrs:{type:"number",placeholder:"","aria-label":"","aria-describedby":"basic-addon1"},domProps:{value:t.number},on:{change:function(e){return t.$emit("update:incomingValue",t.number)},input:function(e){e.target.composing||(t.number=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.number==t.max?t.$emit("update:incomingValue",t.max):t.$emit("update:incomingValue",++t.number)}}},[t._v("\n      ＋\n    ")])])])},staticRenderFns:[]};var Q=a("VU/8")({data:function(){return{number:0,min:0,max:0}},props:["uniqueKey","incomingValue","minAndMaxNum"],created:function(){this.number=this.incomingValue,this.min=this.minAndMaxNum.min,this.max=this.minAndMaxNum.max},watch:{incomingValue:function(){this.number=this.incomingValue,this.min=this.minAndMaxNum.min,this.max=this.minAndMaxNum.max}}},z,!1,function(t){a("cpKh")},"data-v-70978279",null).exports,Y={data:function(){return{bookingData:{bookingNumOfPeople:1,bookingDate:null},minAndMaxNum:{min:1,max:1},modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){}},lang:{formatLocale:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["週日","週一","週二","週三","週四","週五","週六"],weekdaysMin:["日","一","二","三","四","五","六"]}},confirmProject:{},confirmID:this.projectID}},props:["selectedProject"],components:{DatePicker:p.a,NumberInput:Q},methods:{checkBookedDate:function(t){var e=this.selectedProject.selectedProjectBookedDate.map(function(t){return new Date(t).toLocaleDateString()}),a=new Date,r=new Date(a.getFullYear(),a.getMonth(),a.getDate());return t<r||e.find(function(e){return e==t.toLocaleDateString()})},saveInCart:function(){this.$eventBus.$emit("emitModalData",this.modalData);var t=this.bookingData.bookingDate;if(null==t)this.modalData.situation.event="未輸入預約日期",this.modalData.situation.message="請輸入預約日期！";else{var e=this.bookingData.bookingNumOfPeople;this.confirmProject={localstorageID:this.selectedProject.selectedProjectID+"-"+t,bookingProjectID:this.selectedProject.selectedProjectID,bookingProjectName:this.selectedProject.selectedProjectContent.projectName,bookingProjectAvatarUrl:this.selectedProject.selectedProjectContent.projectAvatarUrl||"",bookingProjectPricePerPerson:this.selectedProject.selectedProjectContent.projectPricePerPerson,bookingProjectDate:t,bookingProjectNumOfPeople:e,bookingProjectMinNumOfPeople:this.selectedProject.selectedProjectContent.projectMinNumOfPeople,bookingProjectMaxNumOfPeople:this.selectedProject.selectedProjectContent.projectMaxNumOfPeople};for(var a=JSON.parse(localStorage.getItem("savingProjects"))||[],r=!1,n=0;n<a.length;n++)this.confirmProject.bookingProjectID==a[n].bookingProjectID&&this.confirmProject.bookingProjectDate==a[n].bookingProjectDate&&(a[n]=this.confirmProject,r=!0);r||a.push(this.confirmProject),localStorage.setItem("savingProjects",$()(a));var s=JSON.parse(localStorage.getItem("savingProjects")).length;this.$eventBus.$emit("emitCartUpdate",s),this.modalData.situation.event="方案放入購物車",this.modalData.situation.message="方案已放入購物車囉！"}},bookingNow:function(){this.saveInCart(),null!=this.bookingData.bookingDate&&this.$router.push({name:"購物車"})}},watch:{selectedProject:{handler:function(t){this.bookingData.bookingNumOfPeople=t.selectedProjectContent.projectMinNumOfPeople,this.minAndMaxNum.min=t.selectedProjectContent.projectMinNumOfPeople,this.minAndMaxNum.max=t.selectedProjectContent.projectMaxNumOfPeople},deep:!0,immediate:!0}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body container text-center"},[a("h4",{staticClass:"card-title my-3"},[t._v("請選擇您偏好的日期與人數")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 col-md-6 col-12 d-flex flex-column align-items-center mx-auto"},[a("h6",{staticClass:"mt-4"},[t._v("\n        已選擇日期： "),a("span",[t._v(t._s(t.bookingData.bookingDate||"尚未填寫"))])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center"},[a("date-picker",{attrs:{valueType:"format",lang:t.lang,"disabled-date":t.checkBookedDate},model:{value:t.bookingData.bookingDate,callback:function(e){t.$set(t.bookingData,"bookingDate",e)},expression:"bookingData.bookingDate"}})],1),t._v(" "),a("h6",{staticClass:"mt-4"},[t._v("\n        已選擇人數： "+t._s(t.bookingData.bookingNumOfPeople)+" 人\n      ")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center"},[a("NumberInput",{ref:"numberInput",attrs:{incomingValue:t.bookingData.bookingNumOfPeople,minAndMaxNum:t.minAndMaxNum},on:{"update:incomingValue":function(e){return t.$set(t.bookingData,"bookingNumOfPeople",e)},"update:incoming-value":function(e){return t.$set(t.bookingData,"bookingNumOfPeople",e)}}})],1),t._v(" "),a("h5",{staticClass:"mt-5 mb-4",attrs:{id:"project-final-price-line"}},[t._v("\n        方案總計：\n        "),a("span",{attrs:{id:"project-final-price"}},[t._v("\n          "+t._s(t._f("currency")(t.bookingData.bookingNumOfPeople*t.selectedProject.selectedProjectContent.projectPricePerPerson)))]),t._v("\n        元\n      ")]),t._v(" "),a("div",{staticClass:"mb-4 d-flex justify-content-between",attrs:{id:"project-purchase-buttons"}},[a("button",{staticClass:"btn",attrs:{id:"save-in-cart-btn","data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.saveInCart(e)}}},[t._v("\n          放入購物車\n        ")]),t._v(" "),a("button",{staticClass:"btn",attrs:{id:"booking-now-btn","data-toggle":null==this.bookingData.bookingDate?"modal":"","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.bookingNow(e)}}},[t._v("\n          立即預約\n        ")])])])])])},staticRenderFns:[]};var Z=a("VU/8")(Y,X,!1,function(t){a("sL/C")},"data-v-7f078053",null).exports,tt={data:function(){return{mapData:{mapGISurl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",mapMarkerLocation:[0,0],mapZoomlevel:16,mapSourceAttribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',mapOptions:{zoomControl:!0},mapIcon:{iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconAnchor:[12.5,40],popupAnchor:[0,-30]}},userLocation:[0,0]}},props:["departureLocationInfo"],components:{LMap:v.LMap,LTileLayer:v.LTileLayer,LMarker:v.LMarker,LPopup:v.LPopup,LIcon:v.LIcon},created:function(){navigator.geolocation.getCurrentPosition(this.getUserLocationSucess),this.mapData.mapMarkerLocation=[this.departureLocationInfo.locationLat,this.departureLocationInfo.locationLng]},methods:{getUserLocationSucess:function(t){this.userLocation=[t.coords.latitude,t.coords.longitude]}},watch:{departureLocationInfo:{handler:function(t){0!=t.locationLat&&0!=t.locationLng&&(this.mapData.mapMarkerLocation=[t.locationLat,t.locationLng])},deep:!0}}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8 col-md-12 mb-lg-0 mb-5"},[a("l-map",{staticStyle:{height:"25rem"},attrs:{zoom:t.mapData.mapZoomlevel,center:t.mapData.mapMarkerLocation,options:t.mapData.mapOptions}},[a("l-tile-layer",{attrs:{url:t.mapData.mapGISurl,attribution:t.mapData.mapSourceAttribution}}),t._v(" "),a("l-marker",{attrs:{"lat-lng":t.mapData.mapMarkerLocation}},[a("l-icon",{attrs:{"icon-url":t.mapData.mapIcon.iconUrl,"shadow-url":t.mapData.mapIcon.shadowUrl,icon:t.mapData.mapIcon.iconUrl,"popup-anchor":t.mapData.mapIcon.popupAnchor}}),t._v(" "),a("l-popup",[t._v(" "+t._s(t.departureLocationInfo.locationName)+" ")])],1)],1)],1),t._v(" "),a("div",{staticClass:"col-lg-4 mt-lg-1 col-md-12 mt-0"},[a("h5",[t._v(t._s(t.departureLocationInfo.locationName))]),t._v(" "),a("div",{staticClass:"mt-3 mb-4",domProps:{innerHTML:t._s(t.departureLocationInfo.locationDescription)}}),t._v(" "),a("a",{staticClass:"d-flex justify-content-center",attrs:{href:"https://www.google.com/maps/dir/"+(0==t.userLocation.length?"":t.userLocation[0]+","+t.userLocation[1])+"/"+t.departureLocationInfo.locationName,target:"_blank"}},[a("input",{staticClass:"btn btn-success",attrs:{type:"button",value:"Google路線導航"}})])])])])},staticRenderFns:[]};var at={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("h5",{staticClass:"mt-2"},[t._v("確認詳情：")]),t._v(" "),a("ol",[a("li",[t._v("\n          甲必丹會在預訂成功後立即確認，並將使用憑證發送至你的電子郵箱。\n        ")]),t._v(" "),a("li",[t._v("\n          如在註明的時限內沒有於收件箱或垃圾郵件箱中收到郵件，請及時通過郵件聯繫客服。\n        ")])]),t._v(" "),a("h5",{staticClass:"mt-4"},[t._v("退改須知：")]),t._v(" "),a("p",[t._v("\n        如需更改或取消預訂，請於至少 48\n        小時前通知並獲得確認，否則將不獲全額退款。\n      ")])])])])}]},rt={data:function(){return{breadCrumbData:{pagesArr:["首頁","挑選航程","方案詳情"],currentPage:3},selectedProject:{selectedProjectID:this.$route.params.selectedProjectID,selectedProjectContent:{projectName:"",projectAvatarUrl:"",projectCarouselImgs:[],projectMinNumOfPeople:"",projectMaxNumOfPeople:"",projectPricePerPerson:"",projectSummary:""},selectedProjectDepartureLocation:{locationName:"",locationDescription:"",locationLng:"",locationLat:""},selectedProjectBookedDate:[]},carouselData:{usinAt:"挑選航程",carouselItems:[]},tabs:{currentTab:"選擇方案",tabsArr:["選擇方案","會合地點","使用條款"]}}},components:{Carousel:W,Breadcrumb:B,TabDefault:Z,TabLocation:a("VU/8")(tt,et,!1,function(t){a("+ccy")},"data-v-a72389ae",null).exports,TabTerms:a("VU/8")({data:function(){return{}}},at,!1,null,null,null).exports},created:function(){window.scrollTo(0,0),console.log(this.$route.params.selectedProjectID);var t=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryProjectContent.php",t.selectedProject.selectedProjectID).then(function(e){t.selectedProject.selectedProjectContent.projectName=e.data.projectContent.PROJECT_NAME,t.selectedProject.selectedProjectContent.projectAvatarUrl=e.data.projectContent.PROJECT_AVATAR_URL,t.selectedProject.selectedProjectContent.projectCarouselImgs=JSON.parse(e.data.projectContent.PROJECT_CAROUSEL_URL),t.carouselData.carouselItems=t.selectedProject.selectedProjectContent.projectCarouselImgs,t.selectedProject.selectedProjectContent.projectMinNumOfPeople=e.data.projectContent.PROJECT_MIN_NUM_OF_PEOPLE,t.selectedProject.selectedProjectContent.projectMaxNumOfPeople=e.data.projectContent.PROJECT_MAX_NUM_OF_PEOPLE,t.selectedProject.selectedProjectContent.projectPricePerPerson=Number(e.data.projectContent.PROJECT_ORIGINAL_PRICE_PER_PERSON),t.selectedProject.selectedProjectContent.projectSummary=e.data.projectContent.PROJECT_SUMMARY,t.selectedProject.selectedProjectContent.projectDescription=e.data.projectContent.PROJECT_DESCRIPITION,t.selectedProject.selectedProjectDepartureLocation.locationName=e.data.projectDepartureLocation.LOCATION_NAME,t.selectedProject.selectedProjectDepartureLocation.locationDescription=e.data.projectDepartureLocation.LOCATION_DESCRIPTION,t.selectedProject.selectedProjectDepartureLocation.locationLng=e.data.projectDepartureLocation.LOCATION_LNG,t.selectedProject.selectedProjectDepartureLocation.locationLat=e.data.projectDepartureLocation.LOCATION_LAT,e.data.projectBooking.forEach(function(e){t.selectedProject.selectedProjectBookedDate.push(e.BOOKING_DATE)})})}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container",attrs:{id:"project-page"}},[a("Carousel",{attrs:{carouselData:t.carouselData}}),t._v(" "),a("Breadcrumb",{attrs:{breadCrumbData:t.breadCrumbData}}),t._v(" "),a("section",{staticClass:"row mt-4 mb-5",attrs:{id:"project-summary-area"}},[a("div",{staticClass:"col-lg-8 col-12",attrs:{id:"project-summary"}},[a("h1",[t._v("\n        "+t._s(t.selectedProject.selectedProjectContent.projectName)+"\n      ")]),t._v(" "),a("hr"),t._v(" "),a("section",{domProps:{innerHTML:t._s(t.selectedProject.selectedProjectContent.projectSummary)}})]),t._v(" "),a("div",{staticClass:"col-lg-4 col-12 position-sticky",attrs:{id:"project-price"}},[a("div",{staticClass:"card text-center"},[a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-6",attrs:{id:"project-min-num-of-people"}},[a("h6",[t._v("最低成團人數")]),t._v(" "),a("div",{staticClass:"my-3"},[a("span",[t._v("\n                      "+t._s(t.selectedProject.selectedProjectContent.projectMinNumOfPeople))]),t._v("人\n                  ")])]),t._v(" "),a("div",{staticClass:"col-6",attrs:{id:"project-max-num-of-people"}},[a("h6",[t._v("最高容納人數")]),t._v(" "),a("div",{staticClass:"my-3"},[a("span",[t._v("\n                      "+t._s(t.selectedProject.selectedProjectContent.projectMaxNumOfPeople))]),t._v("人\n                  ")])])])]),t._v(" "),a("li",{staticClass:"list-group-item"},[""!=t.selectedProject.selectedProjectContent.projectPricePerPerson?a("div",{key:t.selectedProject.selectedProjectContent.projectPricePerPerson,staticClass:"my-3"},[t._v("\n                每位成員特惠價："),a("span",{attrs:{id:"price-per-person"}},[t._v("\n                  "+t._s(t._f("dollarSign")(t._f("currency")(t.selectedProject.selectedProjectContent.projectPricePerPerson)))+"\n                ")])]):t._e()])])])])])]),t._v(" "),a("section",{staticClass:"row mb-5",attrs:{id:"project-purchase-area"}},[a("div",{staticClass:"col-12"},[a("h3",[t._v("方案確認")]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"card",attrs:{id:"project-purchase-card"}},[a("div",{staticClass:"card-header"},[a("ul",{staticClass:"nav nav-tabs card-header-tabs"},t._l(t.tabs.tabsArr,function(e,r){return a("li",{key:r,staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:t.tabs.currentTab==e?"active":"",on:{click:function(a){a.preventDefault(),t.tabs.currentTab=e}}},[t._v(t._s(e))])])}),0)]),t._v(" "),"選擇方案"==t.tabs.currentTab?a("TabDefault",{attrs:{selectedProject:t.selectedProject}}):"會合地點"==t.tabs.currentTab?a("TabLocation",{attrs:{departureLocationInfo:t.selectedProject.selectedProjectDepartureLocation}}):a("TabTerms")],1)])]),t._v(" "),a("section",{staticClass:"row mb-5",attrs:{id:"project-details-area"}},[a("div",{staticClass:"col-12"},[a("h3",[t._v("服務內容")]),t._v(" "),a("hr"),t._v(" "),a("article",{domProps:{innerHTML:t._s(t.selectedProject.selectedProjectContent.projectDescription)}})])])],1)},staticRenderFns:[]};var st=a("VU/8")(rt,nt,!1,function(t){a("1qQb")},null,null).exports,it={data:function(){return{}},props:["list","index","listItem","currentPage"],components:{NumberInput:Q},methods:{deleteSingleProject:function(t){for(var e=JSON.parse(localStorage.getItem("savingProjects")),a=t.target.closest("div.project-row-in-cart").dataset.id,r=null,n=0;n<e.length;n++)a==e[n].localstorageID&&(r=n);-1!=r&&(e.splice(r,1),localStorage.setItem("savingProjects",$()(e)),this.list.splice(r,1));var s=0;s=null==e?0:e.length,this.$eventBus.$emit("emitCartUpdate",s)}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row py-md-0 py-3 d-flex align-items-center",class:[{"has-project-divier":t.index>0},"購物車"==t.currentPage?"project-row-in-cart":"project-row-in-checkout"]},[a("router-link",{staticClass:"router-link d-flex flex-row align-items-center col-md-2 mb-md-0 col-4 mb-2",attrs:{to:{name:"方案",params:{selectedProjectID:t.listItem.bookingProjectID}}}},[a("div",{staticClass:"project-avatar-block d-flex justify-content-center"},[a("img",{staticClass:"project-avatar",attrs:{src:t.GlobalVariables.cloudUrlprefix+(""==t.list[t.index].bookingProjectAvatarUrl?t.GlobalVariables.cloudNoImgUrl:t.list[t.index].bookingProjectAvatarUrl),alt:""}})])]),t._v(" "),a("router-link",{staticClass:"router-link d-flex align-items-md-center flex-md-row mb-md-0 col-8 flex-column mb-2",class:"購物車"==t.currentPage?["col-md-4"]:["pr-5","col-md-9"],attrs:{to:{name:"方案",params:{selectedProjectID:t.listItem.bookingProjectID}}}},[a("h6",{staticClass:"project-name m-0"},[t._v("\n      "+t._s(t.list[t.index].bookingProjectName)+"\n      "),a("h6",{staticClass:"project-name-booking-date mt-1 mb-0"},[t._v("\n        預約日期："),a("span",[t._v(t._s(t.list[t.index].bookingProjectDate))])])]),t._v(" "),"購物車"!=t.currentPage?a("div",{staticClass:"d-flex align-items-center ml-md-auto ml-0 mt-md-0 mt-2"},[a("h5",{staticClass:"project-final-price m-0"},[t._v("\n        "+t._s(t._f("dollarSign")(t._f("currency")(t.list[t.index].bookingProjectNumOfPeople*t.list[t.index].bookingProjectPricePerPerson)))+"\n      ")]),t._v(" "),a("h6",{staticClass:"mb-0 ml-5"},[t._v("\n        共 "+t._s(t.listItem.bookingProjectNumOfPeople)+" 人\n      ")])]):t._e()]),t._v(" "),"購物車"==t.currentPage?a("div",{staticClass:"col-md-3 order-md-2 col-sm-6 my-sm-0 col-7 my-3 order-3 d-flex flex-md-column flex-row align-items-center"},[a("h6",{staticClass:"adjust-num-title my-md-2 mr-md-0 mr-1 mb-0"},[t._v("人數")]),t._v(" "),a("NumberInput",{ref:"numberInput",staticClass:"w-100",attrs:{uniqueKey:t.listItem.bookingProjectID,incomingValue:t.listItem.bookingProjectNumOfPeople,minAndMaxNum:{min:Number(t.listItem.bookingProjectMinNumOfPeople),max:Number(t.listItem.bookingProjectMaxNumOfPeople)}},on:{"update:incomingValue":function(e){return t.$set(t.listItem,"bookingProjectNumOfPeople",e)},"update:incoming-value":function(e){return t.$set(t.listItem,"bookingProjectNumOfPeople",e)}}})],1):t._e(),t._v(" "),a("div",{staticClass:"col-md-2 order-md-3 col-sm-3 col-4 order-2 d-flex flex-column align-items-center"},["購物車"==t.currentPage?a("h5",{staticClass:"project-final-price mb-0"},[t._v("\n      "+t._s(t._f("dollarSign")(t._f("currency")(t.list[t.index].bookingProjectNumOfPeople*t.list[t.index].bookingProjectPricePerPerson)))+"\n    ")]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-1 col-sm-1 my-sm-0 order-4 col-12 my-3 d-flex"},["購物車"==t.currentPage?a("a",{staticClass:"delete-single-project-icon d-inline-block mx-auto",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deleteSingleProject(e)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):t._e()])],1)},staticRenderFns:[]};var lt=a("VU/8")(it,ot,!1,function(t){a("rK2Q")},"data-v-0dcf0907",null).exports,ct={data:function(){return{confirmProjectsArr:JSON.parse(localStorage.getItem("savingProjects"))}},components:{Breadcrumb:B,CartListItem:lt},created:function(){window.scrollTo(0,0),this.confirmProjectsArr=this.confirmProjectsArr||[]},methods:{clearCart:function(){localStorage.removeItem("savingProjects"),this.confirmProjectsArr=[],this.$eventBus.$emit("emitCartUpdate",0)}},computed:{returnBreadCrumbData:function(){return"購物車"==this.$route.name?{pagesArr:["首頁","購物車"],currentPage:2}:{pagesArr:["首頁","購物車","進行結帳"],currentPage:3}},returnCurrentPage:function(){return this.$route.name},returnAmout:function(){var t=0;return this.confirmProjectsArr.forEach(function(e){var a=e.bookingProjectNumOfPeople*e.bookingProjectPricePerPerson;t+=a}),t}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container",attrs:{id:"cart-page"}},[a("Breadcrumb",{attrs:{breadCrumbData:t.returnBreadCrumbData}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},["購物車"==t.returnCurrentPage?a("h2",[t._v("您的購物車")]):a("h2",[t._v("進行結帳")]),t._v(" "),a("hr")])]),t._v(" "),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("section",{staticClass:"row d-flex",attrs:{id:"cart-area"}},[a("div",{staticClass:"order-lg-1 col-lg-9 order-2 col-12",attrs:{id:"order-details-container"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header px-3 d-flex align-items-center"},["購物車"==t.returnCurrentPage?a("h5",[t._v("已選方案")]):a("h5",[t._v("第一步：確認方案內容")]),t._v(" "),"購物車"==t.returnCurrentPage&&0!=t.confirmProjectsArr.length?a("button",{staticClass:"btn btn-danger ml-auto",attrs:{id:"clear-cart-btn"},on:{click:function(e){return e.preventDefault(),t.clearCart(e)}}},[t._v("\n              清空購物車\n            ")]):t._e()]),t._v(" "),a("div",{staticClass:"card-body py-0 position-relative"},t._l(t.confirmProjectsArr,function(e,r){return a("CartListItem",{key:r,attrs:{"data-id":e.bookingProjectID+"-"+e.bookingProjectDate,list:t.confirmProjectsArr,index:r,listItem:e,currentPage:t.returnCurrentPage}})}),1),t._v(" "),0==t.confirmProjectsArr.length?a("div",{staticClass:"d-flex justify-content-center align-items-center",attrs:{id:"empty-cart-message"}},[a("h6",[t._v("\n              您的購物車目前是空的呢。\n              請到「挑選航程」頁看看有沒有喜歡的方案吧！\n            ")])]):t._e()]),t._v(" "),a("router-view",{ref:"cart",attrs:{confirmProjectsArr:t.confirmProjectsArr,returnCurrentPage:t.returnCurrentPage}})],1),t._v(" "),a("div",{staticClass:"px-0 order-lg-2 col-lg-3 order-1 col-10 mx-auto",attrs:{id:"order-amount-card-container"}},[a("div",{staticClass:"card text-center",staticStyle:{width:"18rem"}},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v("訂單概覽")]),t._v(" "),a("ul",{staticClass:"order-amount-list my-4 mx-auto d-flex flex-lg-column align-items-start"},[a("li",{staticClass:"mr-lg-0 mr-4"},[a("span",{staticClass:"order-amount-title d-inline-block mr-1"},[t._v("選購：")]),a("span",{staticClass:"order-amount-block d-inline-block"},[t._v(t._s(t.confirmProjectsArr.length))]),t._v("個方案\n              ")]),t._v(" "),a("li",[a("span",{staticClass:"order-amount-title d-inline-block mr-1"},[t._v("總計：")]),a("span",{staticClass:"order-amount-block d-inline-block"},[t._v(t._s(t._f("currency")(t.returnAmout)))]),t._v("元\n              ")])]),t._v(" "),"購物車"==t.returnCurrentPage&&t.confirmProjectsArr.length>0?a("button",{staticClass:"btn btn-action-now",on:{click:function(e){return e.preventDefault(),t.$router.push("/Cart/Checkout")}}},[t._v("\n              進行結帳\n            ")]):"購物車"!=t.returnCurrentPage&&t.confirmProjectsArr.length>0?a("input",{staticClass:"btn btn-action-now",class:{"invalid-btn":r},attrs:{type:"submit",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},domProps:{value:r?"請填資料":"立即結帳"},on:{click:function(e){return e.preventDefault(),t.$refs.cart.$refs.formContactInfo.emitCheckOutData(e)}}}):t._e()])])])]),t._v(" "),a("section",{staticClass:"row mb-5",attrs:{id:"recommend-area"}}),t._v(" "),a("div",{staticClass:"px-4 py-3 mx-auto d-flex justify-content-between align-items-center",attrs:{id:"mobile-collapse-window"},on:{click:function(e){return e.preventDefault(),t.$router.push("/Cart/Checkout")}}},[a("ul",{staticClass:"order-amount-list p-0 m-0"},[a("li",{staticClass:"mr-lg-0 mr-4"},[a("span",{staticClass:"order-amount-title d-inline-block mr-1"},[t._v("選購：")]),a("span",{staticClass:"order-amount-block d-inline-block"},[t._v(t._s(t.confirmProjectsArr.length))]),t._v("個方案\n        ")]),t._v(" "),a("li",[a("span",{staticClass:"order-amount-title d-inline-block mr-1"},[t._v("總計：")]),a("span",{staticClass:"order-amount-block d-inline-block"},[t._v(t._s(t._f("currency")(t.returnAmout)))]),t._v("元\n        ")])]),t._v(" "),"購物車"==t.returnCurrentPage&&t.confirmProjectsArr.length>0?a("button",{staticClass:"btn btn-action-now d-flex align-items-center"},[a("h5",{staticClass:"mb-0 d-inline-block"},[t._v("進行結帳")])]):"購物車"!=t.returnCurrentPage&&t.confirmProjectsArr.length>0?a("input",{staticClass:"btn btn-action-now",class:{"invalid-btn":r},attrs:{type:"submit",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},domProps:{value:r?"請填資料":"立即結帳"},on:{click:function(e){return e.preventDefault(),t.$refs.cart.$refs.formContactInfo.emitCheckOutData(e)}}}):t._e()])]}}])})],1)},staticRenderFns:[]};var dt=a("VU/8")(ct,ut,!1,function(t){a("tWgi")},"data-v-2b6370ce",null).exports,mt=a("Dd8w"),pt=a.n(mt),vt={data:function(){return{syncMemberContactInfo:!1,inputOrdererInfo:{},creditCardData:{name:"",number:"",date:"",cvv:""}}},props:["confirmProjectsArr","requiredInputTitle","syncMemberInfo"],methods:{autofilledCreditCardData:function(){this.creditCardData={name:"測試者",number:"1234 2234 3234 4234",date:"04/25",cvv:"168"};var t=[];document.querySelectorAll(".credit-card-data-input-block").forEach(function(e){return t.push(e)}),t.forEach(function(t){return t.dispatchEvent(new Event("blur"))})},formatCreditCardNum:function(){for(var t=this.creditCardData.number.replace(/\s+/g,"").replace(/[^0-9]/gi,""),e=t.match(/\d{4,16}/g),a=e&&e[0]||"",r=[],n=0;n<a.length;n+=4)r.push(a.substring(n,n+4));r.length>0?this.creditCardData.number=r.join(" "):this.creditCardData.number=t},formatCreditCardExpDate:function(){var t=this.creditCardData.date.replace(/\s+/g,"").replace(/[^0-9]/gi,""),e=t.match(/\d{2,4}/g),a=e&&e[0]||"",r=[];r.push(a.substring(0,2)),r.push(a.substring(2)),r.length>0&&""!=r[0]&&""!=r[1]?this.creditCardData.date=r.join("/"):this.creditCardData.date=t},formatCreditCardCVV:function(){this.creditCardData.cvv=this.creditCardData.cvv.replace(/\s+/g,"").replace(/[^0-9]/gi,"")}},watch:{syncMemberContactInfo:function(t){t?this.inputOrdererInfo=pt()({},this.syncMemberInfo):$()(this.inputOrdererInfo)==$()(this.syncMemberInfo)&&this.$set(this,"inputOrdererInfo",{MCname:"",MCphone:"",MCemail:"",ECname:"",ECphone:"",ECemail:""});var e=[];document.querySelectorAll(".orderer-contact-info-input-block").forEach(function(t){return t.querySelectorAll("input").forEach(function(t){return e.push(t)})}),e.forEach(function(t){return t.dispatchEvent(new Event("blur"))})}}},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"card my-5",attrs:{id:"checkout-step-02"}},[a("div",{staticClass:"card-header"},[a("h5",[t._v("\n      第二步："),a("span",{on:{click:t.autofilledCreditCardData}},[t._v("填寫")]),t._v("訂購資訊\n    ")]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.syncMemberContactInfo,expression:"syncMemberContactInfo"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inline-check-box-1",value:"option1"},domProps:{checked:Array.isArray(t.syncMemberContactInfo)?t._i(t.syncMemberContactInfo,"option1")>-1:t.syncMemberContactInfo},on:{change:function(e){var a=t.syncMemberContactInfo,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,"option1");r.checked?s<0&&(t.syncMemberContactInfo=a.concat(["option1"])):s>-1&&(t.syncMemberContactInfo=a.slice(0,s).concat(a.slice(s+1)))}else t.syncMemberContactInfo=n}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inline-check-box-1"}},[t._v("同登入會員資訊")])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-row orderer-contact-info-input-block"},[a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-main-name"}},[t._v("訂購人姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOrdererInfo.MCname,expression:"inputOrdererInfo.MCname"}],staticClass:"form-control",class:n,attrs:{type:"text",id:"input-main-name",name:"訂購人姓名",placeholder:"訂購人姓名"},domProps:{value:t.inputOrdererInfo.MCname},on:{blur:function(e){return t.$eventBus.$emit("emitInputOrdererInfo",t.inputOrdererInfo)},keyup:function(e){t.syncMemberContactInfo=!1},input:function(e){e.target.composing||t.$set(t.inputOrdererInfo,"MCname",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,length:10,regex:/^09\d{8}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"inputM-main-phone-number"}},[t._v("訂購人手機")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOrdererInfo.MCphone,expression:"inputOrdererInfo.MCphone"}],staticClass:"form-control",class:n,attrs:{type:"text",maxlength:"10",id:"inputM-main-phone-number",name:"訂購人手機",placeholder:"0900000000"},domProps:{value:t.inputOrdererInfo.MCphone},on:{blur:function(e){return t.$eventBus.$emit("emitInputOrdererInfo",t.inputOrdererInfo)},keyup:function(e){t.syncMemberContactInfo=!1},input:function(e){e.target.composing||t.$set(t.inputOrdererInfo,"MCphone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("ValidationProvider",{attrs:{rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-main-email"}},[t._v("訂購人電郵")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOrdererInfo.MCemail,expression:"inputOrdererInfo.MCemail"}],staticClass:"form-control",class:n,attrs:{type:"email",id:"input-main-email",name:"訂購人電郵",placeholder:"Hello-World@email.com"},domProps:{value:t.inputOrdererInfo.MCemail},on:{blur:function(e){return t.$eventBus.$emit("emitInputOrdererInfo",t.inputOrdererInfo)},keyup:function(e){t.syncMemberContactInfo=!1},input:function(e){e.target.composing||t.$set(t.inputOrdererInfo,"MCemail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1)]),t._v(" "),a("div",{staticClass:"form-row orderer-contact-info-input-block"},[a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-sub-name"}},[t._v(t._s(t.requiredInputTitle.ECname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOrdererInfo.ECname,expression:"inputOrdererInfo.ECname"}],staticClass:"form-control",class:n,attrs:{type:"text",id:"input-sub-name",name:t.requiredInputTitle.ECname,placeholder:t.requiredInputTitle.ECname},domProps:{value:t.inputOrdererInfo.ECname},on:{blur:function(e){return t.$eventBus.$emit("emitInputOrdererInfo",t.inputOrdererInfo)},keyup:function(e){t.syncMemberContactInfo=!1},input:function(e){e.target.composing||t.$set(t.inputOrdererInfo,"ECname",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,length:10,regex:/^09\d{8}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-sub-phone-number"}},[t._v(t._s(t.requiredInputTitle.ECphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOrdererInfo.ECphone,expression:"inputOrdererInfo.ECphone"}],staticClass:"form-control",class:n,attrs:{type:"text",maxlength:"10",id:"input-sub-phone-number",name:t.requiredInputTitle.ECphone,placeholder:"0900000000"},domProps:{value:t.inputOrdererInfo.ECphone},on:{blur:function(e){return t.$eventBus.$emit("emitInputOrdererInfo",t.inputOrdererInfo)},keyup:function(e){t.syncMemberContactInfo=!1},input:function(e){e.target.composing||t.$set(t.inputOrdererInfo,"ECphone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("ValidationProvider",{attrs:{rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-sub-email"}},[t._v(t._s(t.requiredInputTitle.ECemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputOrdererInfo.ECemail,expression:"inputOrdererInfo.ECemail"}],staticClass:"form-control",class:n,attrs:{type:"email",id:"input-sub-email",name:t.requiredInputTitle.ECemail,placeholder:"Hello-World@email.com"},domProps:{value:t.inputOrdererInfo.ECemail},on:{blur:function(e){return t.$eventBus.$emit("emitInputOrdererInfo",t.inputOrdererInfo)},keyup:function(e){t.syncMemberContactInfo=!1},input:function(e){e.target.composing||t.$set(t.inputOrdererInfo,"ECemail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1)]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-card-name"}},[t._v("持卡人姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creditCardData.name,expression:"creditCardData.name"}],staticClass:"form-control credit-card-data-input-block",class:n,attrs:{type:"text",id:"input-card-name",name:"持卡人姓名",placeholder:"持卡人姓名"},domProps:{value:t.creditCardData.name},on:{input:function(e){e.target.composing||t.$set(t.creditCardData,"name",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1),t._v(" "),a("div",{staticClass:"form-group col-md-5"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-card-number"}},[t._v("信用卡卡號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creditCardData.number,expression:"creditCardData.number"}],staticClass:"form-control credit-card-data-input-block",class:n,attrs:{type:"text",maxlength:"19",id:"input-card-number",name:"信用卡卡號",placeholder:"0000 0000 0000 0000"},domProps:{value:t.creditCardData.number},on:{input:[function(e){e.target.composing||t.$set(t.creditCardData,"number",e.target.value)},t.formatCreditCardNum]}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,max:5}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-card-exp"}},[t._v("有效期")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creditCardData.date,expression:"creditCardData.date"}],staticClass:"form-control credit-card-data-input-block",class:n,attrs:{type:"text",id:"input-card-exp",name:"有效期",placeholder:"例：0825"},domProps:{value:t.creditCardData.date},on:{input:[function(e){e.target.composing||t.$set(t.creditCardData,"date",e.target.value)},t.formatCreditCardExpDate]}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,length:3,regex:/\d{3}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"input-card-cvv"}},[t._v("安全碼（CVV）")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creditCardData.cvv,expression:"creditCardData.cvv"}],staticClass:"form-control credit-card-data-input-block",class:n,attrs:{type:"text",id:"input-card-cvv",name:"安全碼（CVV）",placeholder:"000",maxlength:"3"},domProps:{value:t.creditCardData.cvv},on:{input:[function(e){e.target.composing||t.$set(t.creditCardData,"cvv",e.target.value)},t.formatCreditCardCVV]}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}])})],1)])])])},staticRenderFns:[]},gt={data:function(){return{inputOrdererInfo:{MCname:"",MCphone:"",MCemail:"",ECname:"",ECphone:"",ECemail:""},syncOrdererContactInfoAll:!1,syncOrdererContactInfoArr:[],inputContantInfoArr:[]}},props:["confirmProjectsArr","requiredInputTitle","currentPage"],components:{CartListItem:lt},created:function(){var t=this;console.log(this.confirmProjectsArr),this.establishSyncOrdererContactInfoArr(),this.$eventBus.$on("emitInputOrdererInfo",function(e){t.inputOrdererInfo=e})},methods:{establishSyncOrdererContactInfoArr:function(){for(var t=JSON.parse(localStorage.getItem("savingProjects")).length,e=0;e<t;e++)this.$set(this.syncOrdererContactInfoArr,e,!1),this.$set(this.inputContantInfoArr,e,{MCname:"",MCphone:"",MCemail:"",ECname:"",ECphone:"",ECemail:""})},unsyncOrdererContactInfo:function(t){this.syncOrdererContactInfoArr[t]=!1,this.syncOrdererContactInfoAll=!1},simulateBlurEvt:function(t){document.querySelectorAll(".project-block-in-checkout-step-03")[t].querySelectorAll("input").forEach(function(t){return t.dispatchEvent(new Event("blur"))})},emitCheckOutData:function(){this.$emit("getCheckOutData",this.inputOrdererInfo,this.inputContantInfoArr)}},watch:{syncOrdererContactInfoAll:function(t){var e=this,a=this.syncOrdererContactInfoArr.every(function(t){return 1==t});t&&!a?this.syncOrdererContactInfoArr=this.syncOrdererContactInfoArr.map(function(t){return!0}):!t&&a&&(this.syncOrdererContactInfoArr=this.syncOrdererContactInfoArr.map(function(t){return!1})),document.querySelectorAll(".project-block-in-checkout-step-03").forEach(function(t,a){return e.simulateBlurEvt(a)})},syncOrdererContactInfoArr:function(t){var e=this;t.forEach(function(t,a){t?e.$set(e.inputContantInfoArr,a,pt()({},e.inputOrdererInfo)):(e.unsyncOrdererContactInfo(a),$()(e.inputContantInfoArr[a])==$()(e.inputOrdererInfo)&&e.$set(e.inputContantInfoArr,a,{MCname:"",MCphone:"",MCemail:"",ECname:"",ECphone:"",ECemail:""}))})}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"card",attrs:{id:"checkout-step-03"}},[a("div",{staticClass:"card-header"},[a("h5",[t._v("第三步：填寫聯絡資訊")]),t._v(" "),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.syncOrdererContactInfoAll,expression:"syncOrdererContactInfoAll"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inline-checkbox-2",value:"option1"},domProps:{checked:Array.isArray(t.syncOrdererContactInfoAll)?t._i(t.syncOrdererContactInfoAll,"option1")>-1:t.syncOrdererContactInfoAll},on:{change:function(e){var a=t.syncOrdererContactInfoAll,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,"option1");r.checked?s<0&&(t.syncOrdererContactInfoAll=a.concat(["option1"])):s>-1&&(t.syncOrdererContactInfoAll=a.slice(0,s).concat(a.slice(s+1)))}else t.syncOrdererContactInfoAll=n}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inline-checkbox-2"}},[t._v("同訂購人資訊（全部）")])])]),t._v(" "),a("div",{staticClass:"card-body"},t._l(t.confirmProjectsArr,function(e,r){return a("div",{key:r,staticClass:"project-block-in-checkout-step-03",attrs:{"data-id":e.bookingProjectID+"-"+e.bookingProjectDate}},[a("CartListItem",{key:r,attrs:{list:t.confirmProjectsArr,index:r,listItem:e,currentPage:t.currentPage}}),t._v(" "),a("div",{staticClass:"mb-3 px-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.syncOrdererContactInfoArr[r],expression:"syncOrdererContactInfoArr[index]"}],key:"inline-checkbox-"+(r+3),staticClass:"form-check-input checkbox-for-project",attrs:{type:"checkbox",id:"inline-checkbox-"+(r+3),value:"option1"},domProps:{checked:Array.isArray(t.syncOrdererContactInfoArr[r])?t._i(t.syncOrdererContactInfoArr[r],"option1")>-1:t.syncOrdererContactInfoArr[r]},on:{change:[function(e){var a=t.syncOrdererContactInfoArr[r],n=e.target,s=!!n.checked;if(Array.isArray(a)){var i=t._i(a,"option1");n.checked?i<0&&t.$set(t.syncOrdererContactInfoArr,r,a.concat(["option1"])):i>-1&&t.$set(t.syncOrdererContactInfoArr,r,a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.syncOrdererContactInfoArr,r,s)},function(e){return t.simulateBlurEvt(r)}]}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"inline-checkbox-"+(r+3)}},[t._v("同訂購資訊（個案）")])]),t._v(" "),a("div",{staticClass:"form-row contact-info-input-block",attrs:{id:"contact-info-input-block"+r}},[a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.classes;return[a("label",{attrs:{for:"input-main-name"+(r+1)}},[t._v(t._s(t.requiredInputTitle.MCname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContantInfoArr[r].MCname,expression:"inputContantInfoArr[index].MCname"}],key:"input-main-name"+(r+1),staticClass:"form-control",class:s,attrs:{type:"text",id:"input-main-name"+(r+1),name:t.requiredInputTitle.MCname,placeholder:t.requiredInputTitle.MCname},domProps:{value:t.inputContantInfoArr[r].MCname},on:{keyup:function(e){return t.unsyncOrdererContactInfo(r)},input:function(e){e.target.composing||t.$set(t.inputContantInfoArr[r],"MCname",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^09\d{8}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.classes;return[a("label",{attrs:{for:"input-main-phone-number"+(r+1)}},[t._v(t._s(t.requiredInputTitle.MCphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContantInfoArr[r].MCphone,expression:"inputContantInfoArr[index].MCphone"}],key:"input-main-phone-number"+(r+1),staticClass:"form-control",class:s,attrs:{type:"text",maxlength:"10",id:"input-main-phone-number"+(r+1),name:t.requiredInputTitle.MCphone,placeholder:"0900000000"},domProps:{value:t.inputContantInfoArr[r].MCphone},on:{keyup:function(e){return t.unsyncOrdererContactInfo(r)},input:function(e){e.target.composing||t.$set(t.inputContantInfoArr[r],"MCphone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("ValidationProvider",{attrs:{rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.classes;return[a("label",{attrs:{for:"input-main-email"+(r+1)}},[t._v(t._s(t.requiredInputTitle.MCemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContantInfoArr[r].MCemail,expression:"inputContantInfoArr[index].MCemail"}],key:"input-main-email"+(r+1),staticClass:"form-control",class:s,attrs:{type:"email",id:"input-main-email"+(r+1),name:t.requiredInputTitle.ECemeal,placeholder:"Hello-World@email.com"},domProps:{value:t.inputContantInfoArr[r].MCemail},on:{keyup:function(e){return t.unsyncOrdererContactInfo(r)},input:function(e){e.target.composing||t.$set(t.inputContantInfoArr[r],"MCemail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row contact-info-input-block",attrs:{id:"contact-info-input-block"+(r+1)}},[a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.classes;return[a("label",{attrs:{for:"input-sub-name"+(r+2)}},[t._v(t._s(t.requiredInputTitle.ECname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContantInfoArr[r].ECname,expression:"inputContantInfoArr[index].ECname"}],key:"input-sub-name"+(r+2),staticClass:"form-control",class:s,attrs:{type:"text",id:"input-sub-name"+(r+2),name:t.requiredInputTitle.ECname,placeholder:t.requiredInputTitle.ECname},domProps:{value:t.inputContantInfoArr[r].ECname},on:{keyup:function(e){return t.unsyncOrdererContactInfo(r)},input:function(e){e.target.composing||t.$set(t.inputContantInfoArr[r],"ECname",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^09\d{8}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.classes;return[a("label",{attrs:{for:"input-sub-phone-number"+(r+2)}},[t._v(t._s(t.requiredInputTitle.ECphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContantInfoArr[r].ECphone,expression:"inputContantInfoArr[index].ECphone"}],key:"input-sub-phone-number"+(r+2),staticClass:"form-control",class:s,attrs:{type:"text",maxlength:"10",id:"input-sub-phone-number"+(r+2),name:t.requiredInputTitle.ECphone,placeholder:"0900000000"},domProps:{value:t.inputContantInfoArr[r].ECphone},on:{keyup:function(e){return t.unsyncOrdererContactInfo(r)},input:function(e){e.target.composing||t.$set(t.inputContantInfoArr[r],"ECphone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("ValidationProvider",{attrs:{rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors,s=e.classes;return[a("label",{attrs:{for:"input-sub-email"+(r+2)}},[t._v(t._s(t.requiredInputTitle.ECemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputContantInfoArr[r].ECemail,expression:"inputContantInfoArr[index].ECemail"}],key:"input-sub-email"+(r+2),staticClass:"form-control",class:s,attrs:{type:"email",id:"input-sub-email"+(r+2),name:t.requiredInputTitle.ECemail,placeholder:"Hello-World@email.com"},domProps:{value:t.inputContantInfoArr[r].ECemail},on:{keyup:function(e){return t.unsyncOrdererContactInfo(r)},input:function(e){e.target.composing||t.$set(t.inputContantInfoArr[r],"ECemail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(n[0]))])]}}],null,!0)})],1)]),t._v(" "),r<t.confirmProjectsArr.length-1?a("hr"):t._e()],1)}),0)])},staticRenderFns:[]};var _t={data:function(){return{memberID:"",syncMemberInfo:{},requiredInputTitle:{MCname:"主要聯絡人姓名",MCphone:"主要聯絡人手機",MCemail:"主要聯絡人電郵",ECname:"緊急聯絡人姓名",ECphone:"緊急聯絡人手機",ECemail:"緊急聯絡人電郵"},modalData:{callBy:null,propsMethods:{deleteInvalidProjects:null},situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;switch(this.situation.event){case"伺服器異常":case"訂購成功":setTimeout(function(){return t.callBy.$router.push({name:"首頁"})},1e3);break;case"重複訂購":this.propsMethods.deleteInvalidProjects(this.situation.data)}}}}},props:["confirmProjectsArr","currentPage"],components:{FormOrderInfo:a("VU/8")(vt,ft,!1,null,null,null).exports,FormContactInfo:a("VU/8")(gt,ht,!1,function(t){a("ltGg")},"data-v-2684860e",null).exports},created:function(){var t=this;window.scrollTo(0,0),this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e}),this.queryMemberContactInfo()},methods:{queryMemberContactInfo:function(){var t=this.GlobalFunctions.getKapitanSession("forestage"),e=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/SignInAuthentication.php",t).then(function(t){if(t.data.sessionCheck)return e.memberID=t.data.signInedID,e.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Universal/QueryMemberInfo.php",e.memberID)}).catch(function(t){e.modalData.situation.event="伺服器異常",e.modalData.situation.message="伺服器異常，請稍後再試。造成您的不便，敬請見諒！",e.modalData.situation.data=t,console.log(t)}).then(function(t){var a=t.data;e.syncMemberInfo={MCname:a.MEMBER_NAME||"",MCphone:a.MEMBER_PHONE||"",MCemail:a.MEMBER_ACCOUNT,ECname:a.MEMBER_EC_NAME||"",ECphone:a.MEMBER_EC_PHONE||"",ECemail:a.MEMBER_EC_EMAIL||""}}).catch(function(t){e.modalData.situation.event="伺服器異常",e.modalData.situation.message="伺服器異常，請稍後再試。造成您的不便，敬請見諒！",e.modalData.situation.data=t,console.log(t)})},checkOut:function(t,e){this.$eventBus.$emit("emitModalData",this.modalData);var a=this,r=[];JSON.parse(localStorage.getItem("savingProjects")).forEach(function(t){return r.push(t)}),r.forEach(function(t,a,r){var n=pt()({},t,e[a]);r[a]=n});var n=$()({memberID:a.memberID,ordererContactInfo:t,orderDetails:r});this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/Checkout.php",n).then(function(t){console.log(t),"訂購成功"==t.data.status?(a.modalData.propsMethods.deleteInvalidProjects=a.deleteInvalidProjects,a.modalData.situation.event="訂購成功",a.modalData.situation.message=t.data.message,localStorage.removeItem("savingProjects"),a.$eventBus.$emit("emitCartUpdate",0)):"重複訂購"==t.data.status&&(a.modalData.propsMethods.deleteInvalidProjects=a.deleteInvalidProjects,a.modalData.situation.event="重複訂購",a.modalData.situation.message=t.data.message,a.modalData.situation.data=t.data.invalidProjects)}).catch(function(t){a.modalData.situation.event="伺服器異常",a.modalData.situation.message="伺服器異常，請稍後再試。系統現將引導您回到首頁。<br>造成您的不便，敬請見諒！",a.modalData.situation.data=t,console.log(t)})},deleteInvalidProjects:function(t){var e=this;t.forEach(function(t){e.confirmProjectsArr.forEach(function(a,r){t.FK_PROJECT_ID_for_BK+"-"+t.BOOKING_DATE==a.localstorageID&&e.confirmProjectsArr.splice(r,1)})}),this.confirmProjectsArr.length>0?(localStorage.setItem("savingProjects",$()(this.confirmProjectsArr)),this.$eventBus.$emit("emitCartUpdate",this.confirmProjectsArr.length)):(localStorage.removeItem("savingProjects"),this.$eventBus.$emit("emitCartUpdate",0))}}},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"checkout-sub-page"}},[a("div",{staticClass:"col-12"},[a("form",[a("FormOrderInfo",{attrs:{confirmProjectsArr:t.confirmProjectsArr,requiredInputTitle:t.requiredInputTitle,syncMemberInfo:t.syncMemberInfo}}),t._v(" "),a("FormContactInfo",{ref:"formContactInfo",attrs:{confirmProjectsArr:t.confirmProjectsArr,requiredInputTitle:t.requiredInputTitle,currentPage:t.currentPage},on:{getCheckOutData:t.checkOut}})],1)])])},staticRenderFns:[]},bt=a("VU/8")(_t,Ct,!1,null,null,null).exports,Dt={data:function(){return{modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){-1!=this.situation.event.indexOf("失敗")&&setTimeout(1e3),-1!=this.situation.event.indexOf("資料庫寫入")&&(this.callBy.initializeEditor(),this.situation.event="",this.situation.message="")}},requiredInputTitle:{memberAccount:"帳號",memberPassword:"密碼",nickName:"暱稱",MCname:"姓名",MCphone:"手機",memberAvatarURL:"大頭貼",ECname:"緊急聯絡人姓名",ECphone:"緊急聯絡人手機",ECemail:"緊急聯絡人電郵"},reSetPasswordData:{originalPassword:"",newPassword:"",passwordChecked:"",showRemark:!1,passwordsUnequal:!1,sensitive:!0},editDetails:{memberAccount:"",nickName:"",MCname:"",MCphone:"",memberAvatarURL:"",ECname:"",ECphone:"",ECemail:""},vueCloudinaryData:{filesData:{avatar:""},uploadStatus:""}}},props:["memberInfo"],created:function(){var t=this;this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e}),this.initializeEditor()},methods:{initializeEditor:function(){this.reSetPasswordData.originalPassword="",this.reSetPasswordData.newPassword="",this.reSetPasswordData.passwordChecked="",this.editDetails.memberAccount=this.memberInfo.MEMBER_ACCOUNT,this.editDetails.nickName=this.memberInfo.MEMBER_NICKNAME,this.editDetails.MCname=this.memberInfo.MEMBER_NAME,this.editDetails.MCphone=this.memberInfo.MEMBER_PHONE,this.editDetails.memberAvatarURL=this.memberInfo.MEMBER_AVATAR_URL,this.editDetails.ECname=this.memberInfo.MEMBER_EC_NAME,this.editDetails.ECphone=this.memberInfo.MEMBER_EC_PHONE,this.editDetails.ECemail=this.memberInfo.MEMBER_EC_EMAIL},comparisePassword:function(){this.reSetPasswordData.sensitive=!0;var t=this.reSetPasswordData.newPassword,e=this.reSetPasswordData.passwordChecked;this.reSetPasswordData.passwordsUnequal=!1,t!=e&&(this.reSetPasswordData.passwordsUnequal=!0)},reSetPassword:function(){var t=this;this.$eventBus.$emit("emitModalData",this.modalData);var e=this.GlobalFunctions.getKapitanSession("forestage"),a=this;if(a.reSetPasswordData.passwordChecked==a.reSetPasswordData.newPassword){var r={memberID:a.memberInfo.MEMBER_ID,session:e,reSetPasswordData:a.reSetPasswordData};this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/UpdateMemberPassword.php",$()(r)).then(function(e){a.modalData.situation.message=e.data,t.reSetPasswordData.sensitive=!1,a.initializeEditor()}).catch(function(t){console.log(t)})}},handleFileChange:function(t){this.vueCloudinaryData.filesData.avatar=t.target.files[0],console.log("上傳檔案更換：",this.vueCloudinaryData.filesData.avatar)},uploadImgAndUpdateData:function(){this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.buttonType="checked";var t="https://api.cloudinary.com/v1_1/"+this.GlobalVariables.cloudName+"/upload",e=this,a=this.vueCloudinaryData.filesData.avatar;if(""!=a||a.name){var r=new FileReader;r.addEventListener("load",function(){var a=new FormData;a.append("upload_preset",e.GlobalVariables.membersAvatarPreset),a.append("file",r.result);var n={url:t,method:"POST",data:a,onUploadProgress:function(t){e.modalData.situation.message="<p>開始處理上傳事件<p>",e.progress=Math.round(100*t.loaded/t.total),e.modalData.situation.message="<p>上傳進度："+e.progress+"％"}};i()(n).then(function(t){console.log(t.data),e.modalData.situation.event="會員大頭貼上傳成功。",e.modalData.situation.message="<p>會員大頭貼上傳成功！</p>",e.editDetails.memberAvatarURL=t.data.public_id,e.updateMemberInfo()}).catch(function(t){console.log(t),e.modalData.situation.event="會員大頭貼上傳失敗。",e.modalData.situation.message="會員大頭貼上傳失敗！請稍後再試。"})},!1),r.readAsDataURL(a)}else this.updateMemberInfo()},updateMemberInfo:function(){var t=this;this.$eventBus.$emit("emitModalData",this.modalData);var e=this,a={session:e.GlobalFunctions.getKapitanSession("forestage"),memberID:e.memberInfo.MEMBER_ID,editedDetails:e.editDetails};this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/UpdateMemberInfo.php",$()(a)).then(function(a){e.modalData.situation.event="資料庫寫入成功。",e.modalData.situation.message+=a.data,t.vueCloudinaryData.filesData.avatar=""}).catch(function(a){e.modalData.situation.event="資料庫寫入失敗。",e.modalData.situation.message+=a.data,t.vueCloudinaryData.filesData.avatar=""})}}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body",attrs:{id:"member-info-editor"}},[a("h4",{staticClass:"mb-4"},[t._v("基本資料")]),t._v(" "),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h5",{staticClass:"mb-4"},[t._v("\n          ▐ 重設密碼\n          "),a("span",{attrs:{id:"password-remark-trigger"},on:{mouseenter:function(e){t.reSetPasswordData.showRemark=!0},mouseleave:function(e){t.reSetPasswordData.showRemark=!1},click:function(e){t.reSetPasswordData.showRemark=!t.reSetPasswordData.showRemark}}},[t._v("［?］")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.reSetPasswordData.showRemark,expression:"reSetPasswordData.showRemark"}],staticClass:"position-absolute",attrs:{id:"password-remark"}},[t._v("8到16位字符，至少1個大寫字母、1個小寫字母、1個數字。")])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-3 col-sm-4 col-8"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"輸入原密碼"}},[t._v("輸入原密碼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.reSetPasswordData.originalPassword,expression:"reSetPasswordData.originalPassword"}],staticClass:"form-control",class:t.reSetPasswordData.sensitive?n:"",attrs:{type:"password",id:"輸入原密碼",placeholder:"輸入原密碼"},domProps:{value:t.reSetPasswordData.originalPassword},on:{input:[function(e){e.target.composing||t.$set(t.reSetPasswordData,"originalPassword",e.target.value)},function(e){t.reSetPasswordData.sensitive=!0}],focus:function(e){t.reSetPasswordData.sensitive=!0},blur:function(e){t.reSetPasswordData.sensitive=!0}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-3 col-sm-4 col-8"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"輸入新密碼"}},[t._v("輸入新密碼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.reSetPasswordData.newPassword,expression:"reSetPasswordData.newPassword"}],staticClass:"form-control",class:t.reSetPasswordData.sensitive?n:"",attrs:{type:"password",id:"輸入新密碼",placeholder:"輸入新密碼"},domProps:{value:t.reSetPasswordData.newPassword},on:{input:[function(e){e.target.composing||t.$set(t.reSetPasswordData,"newPassword",e.target.value)},function(e){t.reSetPasswordData.sensitive=!0}],focus:function(e){t.reSetPasswordData.sensitive=!0},blur:function(e){t.reSetPasswordData.sensitive=!0}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-froup col-lg-3 col-sm-4 col-8"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:"確認新密碼"}},[t._v("確認新密碼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.reSetPasswordData.passwordChecked,expression:"reSetPasswordData.passwordChecked"}],staticClass:"form-control",class:[t.reSetPasswordData.sensitive?n:"",{"is-invalid":t.reSetPasswordData.passwordsUnequal}],attrs:{type:"password",id:"確認新密碼",placeholder:"請再輸入一次密碼"},domProps:{value:t.reSetPasswordData.passwordChecked},on:{input:[function(e){e.target.composing||t.$set(t.reSetPasswordData,"passwordChecked",e.target.value)},t.comparisePassword],focus:function(e){t.reSetPasswordData.sensitive=!0},blur:function(e){t.reSetPasswordData.sensitive=!0}}}),t._v(" "),a("span",{staticClass:"invalid-feedback",class:t.reSetPasswordData.passwordsUnequal?"d-inline-block":"d-none"},[t._v("確認密碼與輸入密碼不相等")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.reSetPasswordData.passwordsUnequal,expression:"!reSetPasswordData.passwordsUnequal"}],staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-froup col-lg-3 col-sm-4"},[a("label",{attrs:{for:"修改密碼"}},[t._v(" ")]),t._v(" "),a("input",{staticClass:"btn btn-primary d-block",class:{"invalid-btn":r},attrs:{type:"button",id:"修改密碼",value:"修改密碼",disabled:r||t.reSetPasswordData.passwordsUnequal,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.reSetPassword(e)}}})])])])])]}}])}),t._v(" "),a("hr"),t._v(" "),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("h5",{staticClass:"mt-2 mb-4"},[t._v("▐ 編輯個資")]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-xl-2 col-md-3 col-sm-4 col-8"},[a("label",{attrs:{for:t.requiredInputTitle.nickName}},[t._v(t._s(t.requiredInputTitle.nickName))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.nickName,expression:"editDetails.nickName"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.nickName,placeholder:"您的"+t.requiredInputTitle.nickName},domProps:{value:t.editDetails.nickName},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"nickName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-xl-3 col-md-4 col-sm-5 col-8"},[a("label",{staticClass:"form-label",attrs:{for:t.requiredInputTitle.memberAvatarURL}},[t._v(t._s(t.requiredInputTitle.memberAvatarURL))]),t._v(" "),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{id:t.requiredInputTitle.memberAvatarURL,type:"file",accept:"image/png, image/jpeg"},on:{change:function(e){return t.handleFileChange(e)}}}),t._v(" "),a("label",{staticClass:"custom-file-label",attrs:{for:t.requiredInputTitle.memberAvatarURL}},[t._v(t._s(t.vueCloudinaryData.filesData.avatar.name||"請選擇檔案"))])])])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-xl-2 col-md-3 col-sm-4 col-8"},[a("label",{attrs:{for:t.requiredInputTitle.MCname}},[t._v(t._s(t.requiredInputTitle.MCname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCname,expression:"editDetails.MCname"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.MCname,placeholder:"您的"+t.requiredInputTitle.MCname},domProps:{value:t.editDetails.MCname},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCname",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-xl-2 col-md-3 col-sm-4 col-8"},[a("label",{attrs:{for:t.requiredInputTitle.MCphone}},[t._v(t._s(t.requiredInputTitle.MCphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCphone,expression:"editDetails.MCphone"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.MCphone,placeholder:"0900000000"},domProps:{value:t.editDetails.MCphone},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCphone",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-xl-2 col-md-3 col-sm-4 col-8"},[a("label",{attrs:{for:t.requiredInputTitle.ECname}},[t._v(t._s(t.requiredInputTitle.ECname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECname,expression:"editDetails.ECname"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.ECname,placeholder:"聯絡人姓名"},domProps:{value:t.editDetails.ECname},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECname",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-xl-2 col-md-3 col-sm-4 col-8"},[a("label",{attrs:{for:t.requiredInputTitle.ECphone}},[t._v(t._s(t.requiredInputTitle.ECphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECphone,expression:"editDetails.ECphone"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.ECphone,placeholder:"0900000000"},domProps:{value:t.editDetails.ECphone},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECphone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-lg-4 col-sm-4 col-8"},[a("label",{attrs:{for:t.requiredInputTitle.ECemail}},[t._v(t._s(t.requiredInputTitle.ECemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECemail,expression:"editDetails.ECemail"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.ECemail,placeholder:"Hello-World@email.com"},domProps:{value:t.editDetails.ECemail},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECemail",e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"form-froup col-xl-4 col-md-5 ml-sm-auto col-sm-6 col-8"},[a("div",{staticClass:"action-buttons-block mr-xl-4 mr-0 mt-4 px-xl-4 pl-md-5 pr-md-4 pl-sm-5 pr-0 d-flex justify-content-sm-around align-items-center"},[a("input",{staticClass:"btn btn-primary mr-sm-0 mr-2",class:{"invalid-btn":r},attrs:{type:"button",value:"修改個資",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.uploadImgAndUpdateData(e)}}}),t._v(" "),a("a",{staticClass:"d-inline-block",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$emit("emitCloseeditor")}}},[t._v("不儲存關閉")])])])])]}}])})],1)},staticRenderFns:[]};var It={data:function(){return{orderStatus:"%%",viewingOrder:{ID:"",date:"",status:"",viewingIndex:null,viewDetails:!1},ordersArr:[],orderDetailsArr:[],itemsNumPerPage:5,allContentArr:[],currentPageContentArr:[],currentPageContentSerial:[]}},props:["memberID"],components:{Pagination:V},created:function(){this.queryMemberOrders()},methods:{queryMemberOrders:function(){var t=this,e={memberID:t.memberID,orderStatus:t.orderStatus};this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryMemberOrders.php",$()(e)).then(function(e){t.ordersArr=[],t.orderDetailsArr=[],t.orderDetailsArr=e.data;for(var a=0;a<t.orderDetailsArr.length;a++){var r=!1;t.orderDetailsArr[a].ORDER_DATE=new Date(t.orderDetailsArr[a].ORDER_DATE).Format("yyyy-MM-dd");t:for(var n=0;n<t.ordersArr.length;n++)if(t.orderDetailsArr[a].ORDER_ID==t.ordersArr[n].ORDER_ID){r=!0;break t}r||(t.orderDetailsArr[a].ORDER_DETAILS_NUM=0,t.ordersArr.push(t.orderDetailsArr[a]))}for(var s=0;s<t.orderDetailsArr.length;s++)for(var i=0;i<t.ordersArr.length;i++)t.orderDetailsArr[s].ORDER_ID==t.ordersArr[i].ORDER_ID&&t.ordersArr[i].ORDER_DETAILS_NUM++;t.ordersArr.sort(function(t,e){return t.SORT_INDEX-e.SORT_INDEX}),t.allContentArr=t.ordersArr}).catch(function(t){console.log(t)})},viewOrderDetails:function(t){this.viewingOrder.viewingIndex=t,this.viewingOrder.viewDetails=!0,this.viewingOrder.ID=this.ordersArr[t].ORDER_ID,this.viewingOrder.date=this.ordersArr[t].ORDER_DATE,this.viewingOrder.status=this.ordersArr[t].ORDER_STATUS;var e=[],a=!0,r=!1,n=void 0;try{for(var s,i=j()(this.orderDetailsArr);!(a=(s=i.next()).done);a=!0){var o=s.value;o.ORDER_ID==this.viewingOrder.ID&&e.push(o)}}catch(t){r=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(r)throw n}}this.allContentArr=e},returnToOrdersList:function(){this.viewingOrder.viewingIndex=null,this.viewingOrder.viewDetails=!1,this.queryMemberOrders()},getCurrentContentAndSerial:function(t,e){this.currentPageContentArr=t,this.currentPageContentSerial=e}}},kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body position-relative",class:t.currentPageContentArr.length>0?"for-pagination-padding":"",attrs:{id:"member-orders-searching-sub-page"}},[a("h4",{staticClass:"mb-4"},[t._v("檢視訂單")]),t._v(" "),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12"},[t.viewingOrder.viewDetails?a("div",[a("a",{staticClass:"d-flex align-items-center mb-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.returnToOrdersList(e)}}},[t._v("\n          回到「查詢訂單」\n          "),a("i",{staticClass:"fas fa-external-link-alt d-inline-block"})]),t._v(" "),a("h6",{staticClass:"d-md-inline-block"},[t._v("\n          正在檢視："),a("span",[t._v(t._s(t.viewingOrder.ID))]),t._v(" 號訂單\n        ")]),t._v(" "),a("h6",{staticClass:"d-md-inline-block mx-md-3"},[t._v("\n          訂單狀態："),a("span",[t._v(t._s(t._f("orderStatus")(t.viewingOrder.status)))])]),t._v(" "),a("h6",{staticClass:"d-md-inline-block"},[t._v("\n          訂單日期："),a("span",[t._v(t._s(t.viewingOrder.date))])])]):a("div",[a("div",{staticClass:"d-inline-block mr-3"},[a("label",{attrs:{for:"member-orders-status"}},[t._v("訂單狀態")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderStatus,expression:"orderStatus"}],staticClass:"form-control form-select-lg",attrs:{id:"member-orders-status"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderStatus=e.target.multiple?a:a[0]},t.queryMemberOrders]}},[a("option",{attrs:{value:"%%"}},[t._v("全部")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("已完成")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("進行中")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("已取消")])])]),t._v(" "),a("h6",{staticClass:"d-inline-block"},[t._v("*系統將提供90天內的訂單")])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-12"},[t.currentPageContentArr.length>0&&!t.viewingOrder.viewDetails?a("ul",{staticClass:"p-0",attrs:{id:"member-orders-list"}},t._l(t.currentPageContentArr,function(e,r){return a("li",{key:e.ORDER_DETAIL_ID,staticClass:"container py-md-0 px-3 py-3 d-flex justify-content-between align-items-center",on:{click:function(e){return e.preventDefault(),t.viewOrderDetails(r)}}},[a("div",{staticClass:"row w-100"},[a("div",{staticClass:"col-12 d-flex flex-md-row justify-content-md-between align-items-md-center flex-column justify-content-between align-items-start"},[a("h6",{staticClass:"list-item-info text-center m-md-0 d-md-block mb-1"},[t._m(0,!0),t._v("\n                "+t._s(t.currentPageContentSerial[r])+"\n              ")]),t._v(" "),a("h6",{staticClass:"list-item-info identify-id-or-name m-md-0 d-md-block mb-1"},[t._m(1,!0),t._v("\n                "+t._s(e.ORDER_ID)+"\n              ")]),t._v(" "),a("h6",{staticClass:"list-item-info m-md-0 mb-1"},[t._m(2,!0),t._v("\n                "+t._s(e.ORDER_DATE)+"\n              ")]),t._v(" "),a("h6",{staticClass:"list-item-info contact-name m-0 text-md-center d-md-block"},[t._m(3,!0),t._v("\n                "+t._s(e.ORDER_MC_NAME)+"\n              ")]),t._v(" "),a("h6",{staticClass:"list-item-info price m-md-0 text-md-center mb-1"},[t._m(4,!0),t._v("\n                "+t._s(t._f("dollarSign")(t._f("currency")(e.ORDER_TOTAL_CONSUMPTION-e.ORDER_TOTAL_DISCOUNT)))+"\n              ")]),t._v(" "),t.viewingOrder.viewDetails?t._e():a("h6",{staticClass:"list-item-info m-md-0 text-center d-xl-block d-none"},[a("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[t._v("\n                  細項數量\n                ")]),t._v("\n                "+t._s(e.ORDER_DETAILS_NUM)+"個\n              ")]),t._v(" "),a("h6",{staticClass:"list-item-info m-md-0 text-md-center mb-1"},[t._m(5,!0),t._v("\n                "+t._s(t._f("orderStatus")(e.ORDER_STATUS))+"\n              ")])])])])}),0):t.viewingOrder.viewDetails?t._l(t.currentPageContentArr,function(e){return a("div",{key:e.ORDER_DETAIL_ID,staticClass:"order-detail card mb-4"},[a("div",{staticClass:"card-header d-flex flex-md-row justify-content-md-between align-items-center flex-column"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"project-avatar-block mr-2 my-md-0 mt-2 mb-4"},[a("img",{attrs:{src:t.GlobalVariables.cloudUrlprefix+(e.PROJECT_AVATAR_URL||t.GlobalVariables.cloudNoImgUrl),alt:""}})]),t._v(" "),a("h6",[t._v("\n              "+t._s(e.PROJECT_NAME)+"\n              "),a("span",{staticClass:"d-block mt-1"},[t._v("\n                預約日期："+t._s(e.BOOKING_DATE)+"\n              ")])])]),t._v(" "),a("h6",{staticClass:"order-detail-amount"},[t._v("\n            "+t._s(t._f("dollarSign")(t._f("currency")(e.ORDER_DETAIL_AMOUNT)))+"\n          ")])]),t._v(" "),a("div",{staticClass:"card-body container py-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-12 d-flex flex-sm-row justify-content-sm-around align-items-sm-center mb-sm-0 flex-column mb-3"},[a("h6",{staticClass:"text-sm-center mb-md-0 mb-sm-4 mb-1"},[t._m(6,!0),t._v("\n                "+t._s(t._f("orderDetailStatus")(e.ORDER_DETAIL_STATUS))+"\n              ")]),t._v(" "),a("h6",{staticClass:"text-sm-center mb-md-0 mb-sm-3 mb-1"},[t._m(7,!0),t._v("\n                "+t._s(t.allContentArr[0].LOCATION_NAME)+"\n              ")])]),t._v(" "),a("div",{staticClass:"col-md-8 col-12"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-12 d-flex flex-sm-row justify-content-sm-around align-items-sm-center flex-column"},[a("h6",{staticClass:"list-item-info text-sm-center"},[t._m(8,!0),t._v("\n                    "+t._s(e.ORDER_DETAIL_MC_NAME)+"\n                  ")]),t._v(" "),a("h6",{staticClass:"list-item-info text-sm-center"},[t._m(9,!0),t._v("\n                    "+t._s(e.ORDER_DETAIL_MC_PHONE)+"\n                  ")]),t._v(" "),a("h6",{staticClass:"list-item-info text-sm-center"},[t._m(10,!0),t._v("\n                    "+t._s(e.ORDER_DETAIL_MC_EMAIL)+"\n                  ")])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 d-flex flex-sm-row justify-content-sm-around align-items-sm-center flex-column"},[a("h6",{staticClass:"list-item-info text-sm-center"},[t._m(11,!0),t._v("\n                    "+t._s(e.ORDER_DETAIL_EC_NAME)+"\n                  ")]),t._v(" "),a("h6",{staticClass:"list-item-info text-sm-center mb-2"},[t._m(12,!0),t._v("\n                    "+t._s(e.ORDER_DETAIL_EC_PHONE)+"\n                  ")]),t._v(" "),a("h6",{staticClass:"list-item-info text-sm-center"},[t._m(13,!0),t._v("\n                    "+t._s(e.ORDER_DETAIL_EC_EMAIL)+"\n                  ")])])])])])])])}):a("div",[a("div",{staticClass:"mx-auto py-5 d-flex flex-column justify-content-center align-items-center",attrs:{id:"no-order-found-block"}},[a("h3",{staticClass:"text-center"},[t._v("什麼都沒有呢...")]),t._v(" "),a("img",{staticClass:"my-3",attrs:{src:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/vatcqfigc74lghjbqfxv.png",alt:""}}),t._v(" "),a("h5",{staticClass:"text-center"},[t._v("看看其他狀態的訂單吧！")])])])],2)]),t._v(" "),a("div",{staticClass:"position-absolute",attrs:{id:"pagination-container"}},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.currentPageContentArr.length>0,expression:"currentPageContentArr.length > 0"}],attrs:{allContentArr:t.allContentArr,itemsNumPerPage:t.itemsNumPerPage},on:{emitCurrentContentAndSerial:t.getCurrentContentAndSerial}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[this._v("\n                  序列"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[this._v("\n                  訂單編號"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[this._v("\n                  訂單日期"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[this._v("\n                  訂購人姓名"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[this._v("\n                  訂單總額"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-md-1 d-inline mb-0"},[this._v("\n                  訂單狀態"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-sm-1 d-inline mb-0"},[this._v("\n                  方案狀態"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-md-block mb-sm-1 d-inline mb-0"},[this._v("\n                  會合地點"),e("span",{staticClass:"colon d-md-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-sm-block mb-sm-1 d-inline mb-0"},[this._v("\n                      主要聯絡人姓名"),e("span",{staticClass:"colon d-sm-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-sm-block mb-sm-1 d-inline mb-0"},[this._v("\n                      主要聯絡人手機"),e("span",{staticClass:"colon d-sm-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-sm-block mb-sm-1 d-inline mb-0"},[this._v("\n                      主要聯絡人電郵"),e("span",{staticClass:"colon d-sm-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-sm-block mb-sm-1 d-inline mb-0"},[this._v("\n                      緊急聯絡人姓名"),e("span",{staticClass:"colon d-sm-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-sm-block mb-sm-1 d-inline mb-0"},[this._v("\n                      緊急聯絡人手機"),e("span",{staticClass:"colon d-sm-none"},[this._v("：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"mini-title d-sm-block mb-sm-1 d-inline mb-0"},[this._v("\n                      緊急聯絡人電郵"),e("span",{staticClass:"colon d-sm-none"},[this._v("：")])])}]};var At={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-body"},[e("h4",[this._v("我的評價")]),this._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"})])])}]};var yt={data:function(){return{breadCrumbData:{pagesArr:["首頁","會員中心"],currentPage:2},memberInfo:{ID:"",nickname:"",avatarUrl:"",propsObj:{}},asideList:[{name:"基本資料",iconClass:["far","fa-user-circle"]},{name:"查詢訂單",iconClass:["fas","fa-tasks"]}],currentSubPage:""}},components:{Breadcrumb:B,MemberInfoEditor:a("VU/8")(Dt,Pt,!1,function(t){a("JeRs")},"data-v-a1e0d4d6",null).exports,MemberOrdersSearching:a("VU/8")(It,kt,!1,function(t){a("s6+2")},"data-v-69dc12c5",null).exports,MemberCommentsSearching:a("VU/8")({data:function(){return{}},methods:{}},At,!1,function(t){a("I5E7")},"data-v-255028b7",null).exports},created:function(){window.scrollTo(0,0),this.queryMemberInfo()},methods:{queryMemberInfo:function(){var t=this.GlobalFunctions.getKapitanSession("forestage"),e=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/SignInAuthentication.php",t).then(function(t){if(t.data.sessionCheck)return e.memberInfo.ID=t.data.signInedID,e.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Universal/QueryMemberInfo.php",e.memberInfo.ID)}).catch(function(t){console.log(t)}).then(function(t){e.memberInfo.propsObj=t.data,e.memberInfo.nickname=t.data.MEMBER_NICKNAME,e.memberInfo.avatarUrl=t.data.MEMBER_AVATAR_URL})},backToWelcomePage:function(){this.currentSubPage="",window.scrollTo(0,0)}}},Et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container mb-5",attrs:{id:"member-centre-page"}},[a("Breadcrumb",{attrs:{breadCrumbData:t.breadCrumbData}}),t._v(" "),a("div",{staticClass:"row"},[a("aside",{staticClass:"col-lg-3 mb-lg-0 col-12 mb-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"avatar-block d-flex justify-content-center align-items-center mx-auto my-3"},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("img",{attrs:{src:null==t.memberInfo.avatarUrl?t.GlobalVariables.cloudUrlprefix+t.GlobalVariables.cloudNoAvatarUrl:t.GlobalVariables.cloudUrlprefix+t.memberInfo.avatarUrl,alt:""}})])]),t._v(" "),a("div",{staticClass:"text-center"},[a("h6",[t._v("\n              "+t._s(t.memberInfo.nickname||"尊敬的甲必丹會員")+"\n            ")])]),t._v(" "),a("hr"),t._v(" "),a("ul",{staticClass:"p-0"},t._l(t.asideList,function(e){return a("li",{key:e.name,staticClass:"text-center mt-4 d-flex justify-content-center align-items-center",class:t.currentSubPage==e.name?"current-sub-page":"",on:{click:function(a){t.currentSubPage=e.name}}},[a("div",{staticClass:"icon-block d-flex justify-content-center align-items-center mr-1"},[a("i",{class:e.iconClass})]),t._v("\n              "+t._s(e.name)+"\n            ")])}),0)])])]),t._v(" "),a("section",{staticClass:"col-lg-9 col-12"},[a("div",{staticClass:"card"},["基本資料"==t.currentSubPage?a("MemberInfoEditor",{attrs:{memberInfo:t.memberInfo.propsObj},on:{emitCloseEditor:t.backToWelcomePage}}):"查詢訂單"==t.currentSubPage?a("MemberOrdersSearching",{attrs:{memberID:t.memberInfo.ID}}):a("div",{staticClass:"card-body welcome-sub-page"},[a("div",{staticClass:"mx-auto py-5",attrs:{id:"welcome-message-block"}},[a("img",{attrs:{src:this.GlobalVariables.cloudUrlprefix+"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/mnacpujka8ttmlxf5n5w.jpg",alt:""}}),t._v(" "),a("h3",{staticClass:"text-center mb-3"},[t._v("準備啟航了嗎？")]),t._v(" "),a("h6",{staticClass:"text-center"},[t._v("點選大頭貼下方的功能以進行操作")])])])],1)])])],1)},staticRenderFns:[]};var Mt=a("VU/8")(yt,Et,!1,function(t){a("0IuS")},"data-v-ac12ef38",null).exports,xt={data:function(){return{signInMode:null,signIned:!1,loginData:{showRemark:!1,repeatRegister:!1,passwordsUnequal:!1,remeberMe:!1,input:{account:"",password:"",passwordChecked:""},signInFailedFeedback:{signInFailedWarning:!1,signInFailedAnime:!1}},modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;switch(this.situation.event){case"伺服器異常":case"資料庫寫入成功":setTimeout(function(){return t.callBy.$router.push({name:"首頁"})},1e3)}}}}},created:function(){var t=this;window.scrollTo(0,0),void 0!=this.$route.params.signInMode?this.signInMode=!1:this.signInMode=!0,this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e})},methods:{queryMemberAccount:function(){var t=this,e=t.loginData.input.account;this.loginData.repeatRegister=!1,this.signInMode||this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryMemberAccount.php",e).then(function(e){e.data.MEMBER_ACCOUNT&&(t.loginData.repeatRegister=!0)}).catch(function(t){console.log(t)})},comparisePassword:function(){var t=this.loginData.input.password,e=this.loginData.input.passwordChecked;this.loginData.passwordsUnequal=!1,t!=e&&(this.loginData.passwordsUnequal=!0)},signInOrRegister:function(){var t=this;this.$eventBus.$emit("emitModalData",this.modalData);var e=this,a="";a=this.signInMode?"https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/SignIn.php":"https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/Register.php",this.$http.post(a,$()(this.loginData.input)).then(function(a){if(console.log(a.data),a.data.singInStatus){var r=a.data.session,n=new Date(a.data.expDate),s=e.loginData.remeberMe;document.cookie='kapitanMembersSession="'+r+'"; expires="'+(s?n:"")+'"',e.signIned=!0,e.$eventBus.$emit("emitSignInStatus",e.signIned),t.signInMode?e.$router.push(localStorage.getItem("ForestageBlockBefore")):(e.modalData.situation.event="資料庫寫入成功",e.modalData.situation.message=a.data.message)}else e.loginData.input.account="",e.loginData.input.password="",e.loginData.input.passwordChecked="",e.loginData.signInFailedFeedback.signInFailedWarning=!0,t.signInMode&&(e.loginData.signInFailedFeedback.signInFailedAnime=!0,setTimeout(function(){e.loginData.signInFailedFeedback.signInFailedAnime=!1},1200))}).catch(function(t){e.modalData.situation.event="伺服器異常",e.modalData.situation.message="伺服器異常，請稍後再試。造成您的不便，敬請見諒！",e.modalData.situation.data=t,console.log(t)})}},watch:{signInMode:function(){this.loginData.repeatRegister=!1,this.loginData.passwordsUnequal=!1,this.loginData.remeberMe=!1,this.loginData.signInFailedFeedback.signInFailedWarning=!1}}},wt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"backgroud container-fluid",attrs:{id:"forestage-login-page"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"d-flex justify-content-center"},[r("div",{staticClass:"card",attrs:{id:"login-card"}},[r("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.invalid;return[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex justify-content-center my-3",attrs:{id:"login-logo-block"}},[r("img",{attrs:{id:"login-logo",src:a("KSwb"),alt:""}})]),t._v(" "),r("ul",{staticClass:"list-group flex-row justify-content-center mb-3"},[r("li",{staticClass:"list-group-item",class:{"selected-item":t.signInMode},on:{click:function(e){t.signInMode=!0}}},[t.signInMode?r("span",[t._v("正在")]):r("span",[t._v("轉為")]),t._v("登入\n                  ")]),t._v(" "),r("li",{staticClass:"list-group-item",class:{"selected-item":!t.signInMode},on:{click:function(e){t.signInMode=!1}}},[t.signInMode?r("span",[t._v("轉為")]):r("span",[t._v("正在")]),t._v("註冊\n                  ")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,n=e.classes;return[r("label",{attrs:{for:""}},[t._v("輸入帳號")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.input.account,expression:"loginData.input.account"}],ref:"帳號",staticClass:"form-control",class:[n,{"is-invalid":t.loginData.repeatRegister,shaking:t.loginData.signInFailedFeedback.signInFailedAnime}],attrs:{type:"email",id:"帳號",placeholder:"Hello-World@email.com"},domProps:{value:t.loginData.input.account},on:{blur:t.queryMemberAccount,input:function(e){e.target.composing||t.$set(t.loginData.input,"account",e.target.value)}}}),t._v(" "),r("span",{staticClass:"invalid-feedback",class:t.loginData.repeatRegister?"d-inline-block":"d-none"},[t._v("此帳號已註冊過")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!t.loginData.repeatRegister,expression:"!loginData.repeatRegister"}],staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"form-group position-relative"},[r("ValidationProvider",{attrs:{rules:{required:!0,regex:!t.signInMode&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,n=e.classes;return[r("label",{attrs:{for:"密碼"}},[t._v("輸入密碼")]),t._v(" "),r("span",{attrs:{id:"password-remark-trigger"},on:{mouseenter:function(e){t.loginData.showRemark=!0},mouseleave:function(e){t.loginData.showRemark=!1},click:function(e){t.loginData.showRemark=!t.loginData.showRemark}}},[t._v("［?］")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.loginData.showRemark,expression:"loginData.showRemark"}],staticClass:"position-absolute",attrs:{id:"password-remark"}},[t._v("8到16位字符，至少1個大寫字母、1個小寫字母、1個數字。")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.input.password,expression:"loginData.input.password"}],staticClass:"form-control",class:[n,{shaking:t.loginData.signInFailedFeedback.signInFailedAnime}],attrs:{type:"password",id:"密碼",placeholder:"問號處可得格式提示"},domProps:{value:t.loginData.input.password},on:{input:function(e){e.target.composing||t.$set(t.loginData.input,"password",e.target.value)}}}),t._v(" "),r("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"form-froup mb-3"},[t.signInMode?t._e():r("ValidationProvider",{attrs:{rules:{required:!0,regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,n=e.classes;return[r("label",{attrs:{for:"確認密碼"}},[t._v("確認密碼")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.input.passwordChecked,expression:"loginData.input.passwordChecked"}],staticClass:"form-control",class:[n,{"is-invalid":t.loginData.passwordsUnequal}],attrs:{type:"password",id:"確認密碼",placeholder:"請再輸入一次密碼"},domProps:{value:t.loginData.input.passwordChecked},on:{blur:t.comparisePassword,input:function(e){e.target.composing||t.$set(t.loginData.input,"passwordChecked",e.target.value)}}}),t._v(" "),r("span",{staticClass:"invalid-feedback",class:t.loginData.passwordsUnequal?"d-inline-block":"d-none"},[t._v("確認密碼與輸入密碼不相等")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!t.loginData.passwordsUnequal,expression:"!loginData.passwordsUnequal"}],staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"action-block d-flex flex-column justify-content-center align-items-center"},[t.signInMode?r("div",{staticClass:"checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.remeberMe,expression:"loginData.remeberMe"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"remember-me-checkbox"},domProps:{checked:Array.isArray(t.loginData.remeberMe)?t._i(t.loginData.remeberMe,null)>-1:t.loginData.remeberMe},on:{change:function(e){var a=t.loginData.remeberMe,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,null);r.checked?s<0&&t.$set(t.loginData,"remeberMe",a.concat([null])):s>-1&&t.$set(t.loginData,"remeberMe",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.loginData,"remeberMe",n)}}}),t._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"remember-me-checkbox"}},[t._v("記住我")])]):t._e(),t._v(" "),r("button",{staticClass:"btn btn-primary mt-3 mb-3",class:{"invalid-btn":n},attrs:{id:"action-button",disabled:n||t.loginData.repeatRegister||t.loginData.passwordsUnequal,"data-toggle":t.signInMode?"":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.signInOrRegister(e)}}},[t.signInMode?r("span",[t._v("登入")]):r("span",[t._v("註冊")])]),t._v(" "),t.signInMode&&t.loginData.signInFailedFeedback.signInFailedWarning?r("div",{staticClass:"mb-2",attrs:{id:"sign-in-failed-warning"}},[t._v("\n                    帳號或密碼錯誤\n                  ")]):t._e()])])]}}])})],1)])])])])])},staticRenderFns:[]};var Ot=a("VU/8")(xt,wt,!1,function(t){a("j0ji")},"data-v-17dcfb9f",null).exports,Tt={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},jt=a("VU/8")({data:function(){return{}}},Tt,!1,null,null,null).exports,Rt={data:function(){return{signInForm:{emailPlaceHolder:"請輸入帳號",passwordPlaceHolder:"請輸入密碼"},loginData:{account:"",password:"",rememberMe:!1},signInFailedFeedback:{signInFailedWarning:!1,signInFailedAnime:!1}}},methods:{signIn:function(){var t=this.loginData.remeberMe,e=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminSignIn.php",$()(this.loginData)).then(function(a){if(a.data.singInStatus){var r=a.data.session,n=new Date(a.data.expDate);document.cookie='kapitanAdminSession="'+r+'"; expires="'+(t?n:"")+'"',e.$router.push({name:"管理系統：首頁"})}else e.loginData.account="",e.loginData.password="",e.signInFailedFeedback.signInFailedWarning=!0,e.signInFailedFeedback.signInFailedAnime=!0,setTimeout(function(){e.signInFailedFeedback.signInFailedAnime=!1},1200)}).catch(function(t){console.log(t)})}}},Nt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"text-center"},[r("form",{staticClass:"form-signin"},[r("img",{staticClass:"mb-2",attrs:{src:a("KSwb")}}),t._v(" "),r("h3",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("請登入管理系統")]),t._v(" "),r("div",{staticClass:"input-area",class:{shaking:t.signInFailedFeedback.signInFailedAnime}},[r("label",{key:"emailLabel",staticClass:"sr-only",attrs:{for:"input-email"}},[t._v("請輸入帳號")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.account,expression:"loginData.account"}],key:"input-email",staticClass:"form-control",attrs:{type:"email",id:"input-email",placeholder:t.signInForm.emailPlaceHolder,required:"",autofocus:""},domProps:{value:t.loginData.account},on:{input:function(e){e.target.composing||t.$set(t.loginData,"account",e.target.value)}}}),t._v(" "),r("label",{key:"passwordLabel",staticClass:"sr-only",attrs:{for:"input-password"}},[t._v("請輸入密碼")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.password,expression:"loginData.password"}],key:"input-password",staticClass:"form-control",attrs:{type:"password",id:"input-password",placeholder:t.signInForm.passwordPlaceHolder,required:""},domProps:{value:t.loginData.password},on:{input:function(e){e.target.composing||t.$set(t.loginData,"password",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"checkbox mb-3"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.remeberMe,expression:"loginData.remeberMe"}],attrs:{type:"checkbox",value:"記住我"},domProps:{checked:Array.isArray(t.loginData.remeberMe)?t._i(t.loginData.remeberMe,"記住我")>-1:t.loginData.remeberMe},on:{change:function(e){var a=t.loginData.remeberMe,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=t._i(a,"記住我");r.checked?s<0&&t.$set(t.loginData,"remeberMe",a.concat(["記住我"])):s>-1&&t.$set(t.loginData,"remeberMe",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.loginData,"remeberMe",n)}}}),t._v("\n        記住我\n      ")])]),t._v(" "),r("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.signIn(e)}}},[r("span",[t._v("登入")])]),t._v(" "),r("div",{staticClass:"position-relative"},[t.signInFailedFeedback.signInFailedWarning?r("div",{staticClass:"position-absolute",attrs:{id:"signIn-failed-warning"}},[t._v("\n        帳號或密碼錯誤\n      ")]):t._e()]),t._v(" "),r("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("© 2035 Kapitan")])])])},staticRenderFns:[]};var St=a("VU/8")(Rt,Nt,!1,function(t){a("EclP")},"data-v-30d408d6",null).exports,qt={data:function(){return{currentPage:"歡迎使用",adminInfo:{name:"",level:"",avatarUrl:""},managers:{ordersManger:{name:"訂單管理",icon:"fa-tasks"},projectsManger:{name:"方案管理",icon:"fa-ship"},membersManger:{name:"會員管理",icon:"fa-users-cog"}}}},created:function(){var t=this,e=t.GlobalFunctions.getKapitanSession("backstage");this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminInfo.php",e).then(function(e){t.adminInfo.name=e.data.adminName,t.adminInfo.level=e.data.adminLevel,t.adminInfo.avatarUrl=e.data.adminAvatarUrl})},methods:{signOut:function(){var t=this;document.cookie="kapitanSession= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",setTimeout(function(){t.$router.push({name:"管理系統：登入頁"})},1e3)},switchPage:function(t){this.currentPage=t,this.$router.push({name:"管理系統："+t})}}},$t={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"backgroud"},[r("div",{staticClass:"container"},[r("div",{staticClass:"d-flex flex-row dashboard",attrs:{id:"dashboard"}},[r("aside",{staticClass:"side-bar"},[r("div",{staticClass:"admin-avatar-block"},[r("div",{staticClass:"admin-avatar"},[r("img",{attrs:{src:null!=t.adminInfo.avatarUrl?t.GlobalVariables.cloudUrlprefix+t.adminInfo.avatarUrl:t.GlobalVariables.cloudUrlprefix+t.GlobalVariables.cloudNoImgUrl,alt:""}})])]),t._v(" "),r("h6",{staticClass:"text-center mb-5"},[t._v("\n          您好，"+t._s(t.adminInfo.name)+"！"),r("br"),t._v(" "),r("div",{staticClass:"mt-2"},[t._v("權限："+t._s(t.adminInfo.level))])]),t._v(" "),r("ul",t._l(t.managers,function(e,a){return r("li",{key:a,staticClass:"d-flex",class:t.currentPage==e.name?"current-page":"",on:{click:function(a){return a.preventDefault(),t.switchPage(e.name)}}},[r("div",{staticClass:"icon-block inline-block d-flex align-items-center"},[r("i",{staticClass:"fas",class:e.icon})]),t._v(" "),r("div",{staticClass:"inline-block"},[t._v("\n              "+t._s(e.name)+"\n            ")])])}),0),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"text-center"},[t._v("© 2035 Kapitan")])]),t._v(" "),r("main",{staticClass:"main-content"},[r("div",{staticClass:"card-header d-flex flex-row justify-content-between align-items-center"},[r("h5",[t._v("\n            "+t._s(t.currentPage)+"\n          ")]),t._v(" "),r("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("\n            登出\n          ")])]),t._v(" "),r("div",{staticClass:"card-body"},["管理系統：首頁"==t.$route.name?r("section",{staticClass:"welcome-page d-flex flex-column align-items-center justify-content-center"},[r("img",{staticClass:"fade-in",attrs:{src:a("KSwb")}}),t._v(" "),r("h2",{staticClass:"mt-2 fade-in"},[t._v("乘載您的凌波壯志")])]):t._e(),t._v(" "),r("router-view")],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center mb-1"},[this._v("\n          甲必丹管理系統"),e("span",{staticClass:"ml-2"},[this._v("v1.0")])])}]};var Lt=a("VU/8")(qt,$t,!1,function(t){a("LAvJ")},"data-v-f9fc5bba",null).exports,Bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"choose-mode-entry"}},[t.$route.path=="/Admin/"+t.returnCurrentManager?a("div",{staticClass:"query-mode-entry container d-flex flex-column align-items-center"},[a("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[a("h2",{staticClass:"mb-4"},[t._v("\n        準備進入「"+t._s(t._f("filterSpecificRouterName")(t.$route.name))+"」介面\n      ")]),t._v(" "),a("h3",[t._v("請問您想進行什麼作業？")])]),t._v(" "),a("div",{staticClass:"action-btn-area d-flex justify-content-between align-items-center"},[a("div",{staticClass:"create-btn d-flex flex-column align-items-center",on:{click:function(e){return e.preventDefault(),t.$router.push(t.returnCreatePath)}}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v(" "),a("h5",{staticClass:"mt-3"},[t._v("新增")])]),t._v(" "),a("div",{staticClass:"edit-btn d-flex flex-column align-items-center",on:{click:function(e){return e.preventDefault(),t.$router.push(t.returnEditPath)}}},[a("i",{staticClass:"fas fa-pen-square"}),t._v(" "),a("h5",{staticClass:"mt-3"},[t._v("編輯")])])])]):t._e(),t._v(" "),a("router-view",{attrs:{currentManager:t.returnCurrentManager,currentPath:t.returnCurrentPath}})],1)},staticRenderFns:[]};var Ft=a("VU/8")({data:function(){return{currentManager:"",createPath:"",editPath:""}},created:function(){this.findOutCurrentManager()},methods:{findOutCurrentManager:function(){var t=this.$route.path.indexOf("/Admin/"),e="/Admin/".length;if(this.currentManager=this.$route.path.substr(t+e),-1!=this.currentManager.indexOf("/")){var a=this.currentManager.indexOf("/");this.currentManager=this.currentManager.substr(0,a)}}},computed:{returnCreatePath:function(){switch(this.currentManager){case"Orders-Manager":return this.createPath="/Admin/Orders-Manager/Order-Creation";case"Projects-Manager":return this.createPath="/Admin/Projects-Manager/Project-Creation";case"Members-Manager":return this.createPath="/Admin/Members-Manager/Member-Creation"}},returnEditPath:function(){switch(this.currentManager){case"Orders-Manager":return this.editPath="/Admin/Orders-Manager/Orders-Searching";case"Projects-Manager":return this.editPath="/Admin/Projects-Manager/Projects-Searching";case"Members-Manager":return this.editPath="/Admin/Members-Manager/Members-Searching/"}},returnCurrentManager:function(){return this.findOutCurrentManager(),this.currentManager},returnCurrentPath:function(){return this.$route.path}},filters:{filterSpecificRouterName:function(t){return t.replace("管理系統：","")}}},Bt,!1,function(t){a("6Bwa")},"data-v-4313a55a",null).exports,Ut={data:function(){return{queryData:{orderID:"",orderDate:"",orderStatus:"",memberAccount:"",ordererName:"",ordererPhone:""},allOrdersArr:[],itemsNumPerPage:5,currentPageContentArr:[],currentPageContentArrSerial:[]}},components:{Pagination:V},methods:{submitOrdersQuery:function(){var t=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryOrders.php",$()(t.queryData)).then(function(e){t.allOrdersArr=[];for(var a=e.data,r=0;r<a.length;r++){var n=!1;t:for(var s=0;s<t.allOrdersArr.length;s++)if(a[r].ORDER_ID==t.allOrdersArr[s].ORDER_ID){n=!0;break t}n||(a[r].ORDER_DATE=new Date(a[r].ORDER_DATE).Format("yyyy-MM-dd"),t.allOrdersArr.push(a[r]))}t.allOrdersArr.sort(function(t,e){return t.SORT_INDEX-e.SORT_INDEX})}).catch(function(t){console.log(t)})},getCurrentContentAndSerial:function(t,e){this.currentPageContentArr=t,this.currentPageContentArrSerial=e},checkOrderDetails:function(t){localStorage.removeItem("managingOrder"),localStorage.setItem("managingOrder",t),this.$router.push({name:"管理系統：編輯訂單"})}}},Vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative",attrs:{id:"order-searching-page"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"order-id"}},[t._v("訂單編號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.orderID,expression:"queryData.orderID"}],staticClass:"form-control",attrs:{type:"text",id:"order-id",placeholder:"OD0000001"},domProps:{value:t.queryData.orderID},on:{input:function(e){e.target.composing||t.$set(t.queryData,"orderID",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"order-date"}},[t._v("訂單日期")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.orderDate,expression:"queryData.orderDate"}],staticClass:"form-control",attrs:{type:"date",id:"order-date"},domProps:{value:t.queryData.orderDate},on:{input:function(e){e.target.composing||t.$set(t.queryData,"orderDate",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"member-account"}},[t._v("會員帳號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.memberAccount,expression:"queryData.memberAccount"}],staticClass:"form-control",attrs:{type:"eamil",id:"member-account",placeholder:"Hello-World@email.com"},domProps:{value:t.queryData.memberAccount},on:{input:function(e){e.target.composing||t.$set(t.queryData,"memberAccount",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"col-2 ml-auto d-flex justify-content-end",attrs:{id:"rechoose-mode-link"}},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/Admin/Orders-Manager")}}},[t._v("重選模式\n        "),a("i",{staticClass:"fas fa-sign-out-alt"})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"order-status"}},[t._v("訂單狀態")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.queryData.orderStatus,expression:"queryData.orderStatus"}],staticClass:"form-control form-select-lg",attrs:{id:"order-status"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.queryData,"orderStatus",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("－請選擇－")]),t._v(" "),a("option",{attrs:{value:"%%"}},[t._v("全部")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("已完成")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("進行中")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("已取消")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"orderer-name"}},[t._v("訂購人姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.ordererName,expression:"queryData.ordererName"}],staticClass:"form-control",attrs:{type:"text",id:"orderer-name",placeholder:"訂購人姓名"},domProps:{value:t.queryData.ordererName},on:{input:function(e){e.target.composing||t.$set(t.queryData,"ordererName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"orderer-phone"}},[t._v("訂購人手機")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.ordererPhone,expression:"queryData.ordererPhone"}],staticClass:"form-control",attrs:{type:"text",id:"orderer-phone",placeholder:"0900000000"},domProps:{value:t.queryData.ordererPhone},on:{input:function(e){e.target.composing||t.$set(t.queryData,"ordererPhone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-1 ml-3"},[a("label",{attrs:{for:""}},[t._v(" ")]),t._v(" "),a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"進行查詢"},on:{click:function(e){return e.preventDefault(),t.submitOrdersQuery(e)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h6",{staticClass:"my-4"},[t._v("查詢結果：")]),t._v(" "),a("table",{staticClass:"table table-striped query-resultsTable"},[t._m(0),t._v(" "),t._l(t.currentPageContentArr,function(e,r){return a("tbody",{key:r},[a("tr",{staticClass:"order-item",on:{click:function(e){return e.preventDefault(),t.checkOrderDetails(t.currentPageContentArr[r].ORDER_ID)}}},[a("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v("\n              "+t._s(t.currentPageContentArrSerial[r])+"\n            ")]),t._v(" "),a("td",[t._v(t._s(t.currentPageContentArr[r].ORDER_ID))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].ORDER_MC_NAME)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].ORDER_MC_PHONE)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].FK_MEMBER_ID_for_OD)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].ORDER_DATE)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t._f("dollarSign")(t._f("currency")(t.currentPageContentArr[r].ORDER_TOTAL_CONSUMPTION-t.currentPageContentArr[r].ORDER_TOTAL_DISCOUNT)))+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t._f("orderStatus")(t.currentPageContentArr[r].ORDER_STATUS))+"\n            ")])])])})],2),t._v(" "),t.currentPageContentArr.length<=0?a("div",{staticClass:"text-danger mt-5 text-center"},[t._v("\n        查無資料\n      ")]):t._e()])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center mt-4 position-absolute",attrs:{id:"pagination-container"}},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.currentPageContentArr.length>0,expression:"currentPageContentArr.length > 0"}],attrs:{allContentArr:t.allOrdersArr,itemsNumPerPage:t.itemsNumPerPage},on:{emitCurrentContentAndSerial:t.getCurrentContentAndSerial}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("序號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("訂單編號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("訂購人姓名")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("訂購人手機")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會員編號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("訂單日期")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("訂單總額")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("訂單狀態")])])])}]};var Gt=a("VU/8")(Ut,Vt,!1,function(t){a("FNcn")},"data-v-eb7eef6a",null).exports,Kt={data:function(){return{adminLevel:null,modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;if(-1!=this.situation.event.indexOf("失敗")&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：方案管理"})},1e3),this.callBy.inCreatingMode)-1!=this.situation.event.indexOf("資料庫寫入")&&(this.callBy.creatDetails=[{ORDER_DETAIL_ID:"",ORDER_DETAIL_STATUS:1,ORDER_DETAIL_AMOUNT:"",ORDER_DETAIL_MC_NAME:"",ORDER_DETAIL_MC_PHONE:"",ORDER_DETAIL_MC_EMAIL:"",ORDER_DETAIL_EC_NAME:"",ORDER_DETAIL_EC_PHONE:"",ORDER_DETAIL_EC_EMAIL:"",PROJECT_ID:"",BOOKING_DATE:"",FK_ORDER_ID_for_ODD:""}]);else{if(-1!=this.situation.event.indexOf("資料庫寫入")){if(-1!=this.situation.message.indexOf("完成"))if(localStorage.getItem("managingOrder")!=this.callBy.currentPageContentArr[this.callBy.inEditingIndex].FK_ORDER_ID_for_ODD){var e=this.callBy.inEditingIndex;this.callBy.currentPageContentArr.splice(e,1)}-1!=this.situation.message.indexOf("不存在")&&this.callBy.$emit("emitRerenderRequest"),this.callBy.$emit("update:currentPageContentArr",this.callBy.currentPageContentArr),this.callBy.$emit("update:inEditingIndex",-1)}if(-1!=this.situation.event.indexOf("刪除訂單細項")){var a={session:this.callBy.GlobalFunctions.getKapitanSession("backstage"),orderDetailID:this.callBy.currentPageContentArr[this.callBy.inEditingIndex].ORDER_DETAIL_ID};if(1==this.emitValue)this.situation.buttonType="checked",this.callBy.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/DeleteOrderDetail.php",$()(a)).then(function(e){t.situation.event="刪除訂單細項成功",t.situation.message=e.data}).catch(function(e){t.situation.event="刪除訂單細項失敗",t.situation.message=e.data});else if("checked"==this.emitValue){var r=this.callBy.inEditingIndex;this.callBy.$emit("update:currentPageContentArr",this.callBy.currentPageContentArr),this.callBy.$emit("update:inEditingIndex",-1),this.callBy.currentPageContentArr.splice(r,1)}}}}},requiredInputTitle:{orderDetailStatus:"細項狀態",orderDetailAmount:"細項金額",MCname:"主要聯絡人姓名",MCphone:"主要聯絡人手機",MCemail:"主要聯絡人電郵",ECname:"緊急聯絡人姓名",ECphone:"緊急聯絡人手機",ECemail:"緊急聯絡人電郵",projectID:"方案編號",bookingNumOfPeople:"預約人數",bookingDate:"預約日期",newOrderID:"所屬訂單"},creatDetails:[{ORDER_DETAIL_ID:"",ORDER_DETAIL_STATUS:1,ORDER_DETAIL_AMOUNT:"",ORDER_DETAIL_MC_NAME:"",ORDER_DETAIL_MC_PHONE:"",ORDER_DETAIL_MC_EMAIL:"",ORDER_DETAIL_EC_NAME:"",ORDER_DETAIL_EC_PHONE:"",ORDER_DETAIL_EC_EMAIL:"",PROJECT_ID:"",BOOKING_DATE:"",FK_ORDER_ID_for_ODD:""}]}},props:["inCreatingMode","currentPageContentArr","inEditingIndex"],created:function(){this.initializeEditor()},methods:{initializeEditor:function(){var t=this;this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e});var e=this.GlobalFunctions.getKapitanSession("backstage"),a=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminSignInAuthentication.php",e).then(function(t){a.adminLevel=t.data.adminLevel}).catch(function(t){console.log(t)})},updateOrderDetails:function(){this.$eventBus.$emit("emitModalData",this.modalData);var t=this,e=t.GlobalFunctions.getKapitanSession("backstage"),a=this.currentPageContentArr,r=this.inEditingIndex,n="",s={},i={};this.inCreatingMode?(i={session:e,creatDetails:this.creatDetails},n="https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/InsertNewOrderDetails.php"):(s.orderDetailID=a[r].ORDER_DETAIL_ID,s.orderDetailStatus=a[r].ORDER_DETAIL_STATUS,s.orderDetailAmount=a[r].ORDER_DETAIL_AMOUNT,s.MCname=a[r].ORDER_DETAIL_MC_NAME,s.MCphone=a[r].ORDER_DETAIL_MC_PHONE,s.MCemail=a[r].ORDER_DETAIL_MC_EMAIL,s.ECname=a[r].ORDER_DETAIL_EC_NAME,s.ECphone=a[r].ORDER_DETAIL_EC_PHONE,s.ECemail=a[r].ORDER_DETAIL_EC_EMAIL,s.projectID=a[r].PROJECT_ID,s.bookingNumOfPeople=a[r].BOOKING_NUM_OF_PEOPLE,s.bookingDate=a[r].BOOKING_DATE,s.newOrderID=a[r].FK_ORDER_ID_for_ODD,i={session:e,editedDetails:s},n="https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/UpdateOrderDetails.php"),t.$http.post(n,$()(i)).then(function(e){console.log(e),t.modalData.situation.event="資料庫寫入成功。",t.modalData.situation.message=e.data}).catch(function(e){t.modalData.situation.event="資料庫寫入失敗。",t.modalData.situation.message=e.data})},deleteOrderDetail:function(){this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.event="刪除訂單細項",this.modalData.situation.message="確定要刪除 "+this.currentPageContentArr[this.inEditingIndex].ORDER_DETAIL_ID+" 訂單細項嗎？",this.modalData.situation.buttonType="yesNo"}},computed:{returneContentArr:function(){return this.inCreatingMode?this.creatDetails:this.currentPageContentArr},returneIndex:function(){return this.inCreatingMode?0:this.inEditingIndex}},watch:{currentPageContentArr:function(){this.currentPageContentArr=this.currentPageContentArr},inEditingIndex:function(){this.inEditingIndex=this.inEditingIndex}}},Jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.inCreatingMode||t.returneIndex>=0?a("div",{attrs:{id:"order-details-form-sub-page"}},[t.inCreatingMode?t._e():a("h6",{staticClass:"my-3"},[t._v("\n    正在編輯："+t._s(t.returneContentArr[t.returneIndex].ORDER_DETAIL_ID)+"\n    訂單細項\n    "),a("span",{staticClass:"delete-project-btn ml-1"},[a("a",{attrs:{href:"","data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.deleteOrderDetail(e)}}},[t._v("刪除細項")])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.MCname}},[t._v(t._s(t.requiredInputTitle.MCname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_MC_NAME,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_MC_NAME']\n                "}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.MCname,placeholder:"聯絡人姓名"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_MC_NAME},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_MC_NAME",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.MCphone}},[t._v(t._s(t.requiredInputTitle.MCphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_MC_PHONE,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_MC_PHONE']\n                "}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.MCphone,placeholder:"0900000000"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_MC_PHONE},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_MC_PHONE",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group",class:t.inCreatingMode?"col-3":"col-4"},[a("ValidationProvider",{attrs:{rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.MCemail}},[t._v(t._s(t.requiredInputTitle.MCemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_MC_EMAIL,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_MC_EMAIL']\n                "}],staticClass:"form-control",class:n,attrs:{type:"email",id:t.requiredInputTitle.MCemail,placeholder:"Hello-World@email.com"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_MC_EMAIL},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_MC_EMAIL",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("label",{attrs:{for:t.requiredInputTitle.orderDetailStatus}},[t._v(t._s(t.requiredInputTitle.orderDetailStatus))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_STATUS,expression:"returneContentArr[returneIndex]['ORDER_DETAIL_STATUS']"}],staticClass:"form-control form-select-lg",attrs:{id:t.requiredInputTitle.orderDetailStatus,disabled:t.adminLevel>2},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_STATUS",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"2"}},[t._v("已完成")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("進行中")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("已取消")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])]),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.orderDetailAmount}},[t._v(t._s(t.requiredInputTitle.orderDetailAmount))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_AMOUNT,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_AMOUNT']\n                "}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.orderDetailAmount,placeholder:"例：3000"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_AMOUNT},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_AMOUNT",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.ECname}},[t._v(t._s(t.requiredInputTitle.ECname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_EC_NAME,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_EC_NAME']\n                "}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.ECname,placeholder:"聯絡人姓名"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_EC_NAME},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_EC_NAME",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.ECphone}},[t._v(t._s(t.requiredInputTitle.ECphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_EC_PHONE,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_EC_PHONE']\n                "}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.ECphone,placeholder:"0900000000"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_EC_PHONE},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_EC_PHONE",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group",class:t.inCreatingMode?"col-3":"col-4"},[a("ValidationProvider",{attrs:{rules:{required:!0,email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.ECemail}},[t._v(t._s(t.requiredInputTitle.ECemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_EC_EMAIL,expression:"\n                  returneContentArr[returneIndex]['ORDER_DETAIL_EC_EMAIL']\n                "}],staticClass:"form-control",class:n,attrs:{type:"email",id:t.requiredInputTitle.ECemail,placeholder:"Hello-World@email.com"},domProps:{value:t.returneContentArr[t.returneIndex].ORDER_DETAIL_EC_EMAIL},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"ORDER_DETAIL_EC_EMAIL",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^OD\d{7}/,length:9}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.newOrderID}},[t._v(t._s(t.requiredInputTitle.newOrderID))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].FK_ORDER_ID_for_ODD,expression:"\n                  returneContentArr[returneIndex]['FK_ORDER_ID_for_ODD']\n                "}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.newOrderID,placeholder:"OD0000001"},domProps:{value:t.returneContentArr[t.returneIndex].FK_ORDER_ID_for_ODD},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"FK_ORDER_ID_for_ODD",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group",class:t.inCreatingMode?"col-3":"col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^PJ\d{7}/,length:9}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.projectID}},[t._v(t._s(t.requiredInputTitle.projectID))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].PROJECT_ID,expression:"returneContentArr[returneIndex]['PROJECT_ID']"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.projectID,placeholder:"PJ0000001"},domProps:{value:t.returneContentArr[t.returneIndex].PROJECT_ID},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"PROJECT_ID",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.bookingNumOfPeople}},[t._v(t._s(t.requiredInputTitle.bookingNumOfPeople))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].BOOKING_NUM_OF_PEOPLE,expression:"\n                  returneContentArr[returneIndex]['BOOKING_NUM_OF_PEOPLE']\n                "}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.bookingNumOfPeople,placeholder:"例：3"},domProps:{value:t.returneContentArr[t.returneIndex].BOOKING_NUM_OF_PEOPLE},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"BOOKING_NUM_OF_PEOPLE",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.bookingDate}},[t._v(t._s(t.requiredInputTitle.bookingDate))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returneContentArr[t.returneIndex].BOOKING_DATE,expression:"returneContentArr[returneIndex]['BOOKING_DATE']"}],staticClass:"form-control",class:n,attrs:{type:"date",id:t.requiredInputTitle.bookingDate},domProps:{value:t.returneContentArr[t.returneIndex].BOOKING_DATE},on:{input:function(e){e.target.composing||t.$set(t.returneContentArr[t.returneIndex],"BOOKING_DATE",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),t.inCreatingMode?a("div",{staticClass:"col-4"}):t._e(),t._v(" "),a("div",{staticClass:"form-group button-block col-3 ml-auto mr-1"},[a("input",{staticClass:"btn btn-primary mt-4",class:{"invalid-btn":r},attrs:{type:"button",value:t.inCreatingMode?"進行新增":"修改完成",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:t.updateOrderDetails}}),t._v(" "),a("a",{staticClass:"d-inline-block position-relative",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.inCreatingMode?t.$router.push({name:"管理系統：新增訂單"}):t.$emit("update:inEditingIndex",-1)}}},[t._v("不儲存關閉")])])])]}}],null,!1,3979502232)})],1)])]):t._e()},staticRenderFns:[]};var Ht=a("VU/8")(Kt,Jt,!1,function(t){a("D7+V")},"data-v-13aa702a",null).exports,Wt={data:function(){return{adminLevel:null,inCreatingMode:null,managingOrder:"",breadCrumbData:{pagesArr:["管理系統：查詢訂單","管理系統：編輯訂單"],currentPage:2},modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;if(-1!=this.situation.event.indexOf("失敗")&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：方案管理"})},1e3),-1!=this.situation.event.indexOf("刪除訂單")){var e={session:this.callBy.GlobalFunctions.getKapitanSession("backstage"),orderID:this.callBy.managingOrder};1==this.emitValue?(this.situation.buttonType="checked",this.callBy.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/DeleteOrder.php",$()(e)).then(function(e){t.situation.event="刪除訂單成功",t.situation.message=e.data}).catch(function(e){t.situation.event="刪除訂單失敗",t.situation.message=e.data})):"checked"==this.emitValue&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：訂單管理"})},1500)}}},requiredInputTitle:{orderStatus:"訂單狀態",orderDate:"訂單日期",orderTotalConsumption:"未折扣總計",orderTotalDiscount:"應折扣總額",MCname:"訂購人姓名",MCphone:"訂購人手機號碼",MCemail:"訂購人電子信箱",ECname:"緊急聯絡人姓名",ECphone:"緊急聯絡人手機號碼",ECemail:"緊急聯絡人電子信箱",memberID:"所屬會員ID"},editDetails:{orderStatus:"",orderDate:"",orderTotalConsumption:"",orderTotalDiscount:"",MCname:"",MCphone:"",MCemail:"",ECname:"",ECphone:"",ECemail:"",memberID:""}}},created:function(){var t=this;this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e}),this.initializeeditor()},props:["currentManager","currentPath"],components:{Breadcrumb:B,Pagination:V,OrderDetailsForm:Ht},methods:{initializeeditor:function(){var t=this;-1==this.currentPath.indexOf("Order-Creation")?this.inCreatingMode=!1:this.inCreatingMode=!0;var e=this.GlobalFunctions.getKapitanSession("backstage"),a=this;a.editDetails.orderStatus="",a.editDetails.orderDate=(new Date).Format("yyyy-MM-ddThh:mm"),a.editDetails.orderTotalConsumption=0,a.editDetails.orderTotalDiscount=0,a.editDetails.MCname="",a.editDetails.MCphone="",a.editDetails.MCemail="",a.editDetails.ECname="",a.editDetails.ECphone="",a.editDetails.ECemail="",a.editDetails.memberID="",this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminSignInAuthentication.php",e).then(function(e){return a.adminLevel=e.data.adminLevel,t.inCreatingMode?(a.adminLevel>2?a.editDetails.orderStatus=-1:a.editDetails.orderStatus=1,a.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryCreatingID.php",t.currentManager)):(a.managingOrder=localStorage.getItem("managingOrder"),a.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryOrderData.php",a.managingOrder))}).catch(function(t){console.log(t)}).then(function(e){t.inCreatingMode?(a.managingOrder=e.data,localStorage.setItem("managingOrder",a.managingOrder)):(a.editDetails.orderStatus=e.data.ORDER_STATUS,a.editDetails.orderDate=new Date(e.data.ORDER_DATE).Format("yyyy-MM-ddThh:mm"),a.editDetails.orderTotalConsumption=e.data.ORDER_TOTAL_CONSUMPTION,a.editDetails.orderTotalDiscount=e.data.ORDER_TOTAL_DISCOUNT,a.editDetails.MCname=e.data.ORDER_MC_NAME,a.editDetails.MCphone=e.data.ORDER_MC_PHONE,a.editDetails.MCemail=e.data.ORDER_MC_EMAIL,a.editDetails.ECname=e.data.ORDER_EC_NAME,a.editDetails.ECphone=e.data.ORDER_EC_PHONE,a.editDetails.ECemail=e.data.ORDER_EC_EMAIL,a.editDetails.memberID=e.data.FK_MEMBER_ID_for_OD)}).catch(function(t){console.log(t)})},updateOrderData:function(){this.$eventBus.$emit("emitModalData",this.modalData);var t=this,e=t.GlobalFunctions.getKapitanSession("backstage"),a="";a=this.inCreatingMode?"https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/InsertNewOrder.php":"https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/UpdateOrderData.php";var r={session:e,orderID:t.managingOrder,editedDetails:t.editDetails};this.$http.post(a,$()(r)).then(function(e){t.modalData.situation.event="資料庫寫入成功。",t.modalData.situation.message=e.data}).catch(function(e){t.modalData.situation.event="資料庫寫入失敗。",t.modalData.situation.message=e.data})},deleteOrder:function(){this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.event="刪除訂單",this.modalData.situation.message="確定要刪除 "+this.managingOrder+" 訂單嗎？",this.modalData.situation.buttonType="yesNo"}}},zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative",attrs:{id:"order-editor-page"}},[t.inCreatingMode?t._e():a("Breadcrumb",{attrs:{breadCrumbData:t.breadCrumbData}}),t._v(" "),a("h6",{staticClass:"mt-2 mb-4 mr-4 d-inline-block"},[t._v("\n    正在"),t.inCreatingMode?a("span",[t._v("新增")]):a("span",[t._v("編輯")]),t._v("："+t._s(t.managingOrder)+"\n    號訂單\n    "),t.inCreatingMode?t._e():a("span",{staticClass:"delete-project-btn ml-1"},[a("a",{attrs:{href:"","data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.deleteOrder(e)}}},[t._v("刪除訂單")])])]),t._v(" "),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:t.requiredInputTitle.orderStatus}},[t._v(t._s(t.requiredInputTitle.orderStatus))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.orderStatus,expression:"editDetails.orderStatus"}],staticClass:"form-control form-select-lg",attrs:{id:t.requiredInputTitle.orderStatus,disabled:t.adminLevel>2},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editDetails,"orderStatus",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"2"}},[t._v("已完成")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("進行中")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("已取消")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0,regex:/^MB\d{7}$/,length:9}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.memberID}},[t._v(t._s(t.requiredInputTitle.memberID))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.memberID,expression:"editDetails.memberID"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.memberID,placeholder:"MB0000001"},domProps:{value:t.editDetails.memberID},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"memberID",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-5"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.orderDate}},[t._v(t._s(t.requiredInputTitle.orderDate))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.orderDate,expression:"editDetails.orderDate"}],staticClass:"form-control",class:n,attrs:{type:"datetime-local",id:t.requiredInputTitle.orderDate},domProps:{value:t.editDetails.orderDate},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"orderDate",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.orderTotalConsumption}},[t._v(t._s(t.requiredInputTitle.orderTotalConsumption))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.orderTotalConsumption,expression:"editDetails.orderTotalConsumption"}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.orderTotalConsumption,placeholder:"例：30000"},domProps:{value:t.editDetails.orderTotalConsumption},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"orderTotalConsumption",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.orderTotalDiscount}},[t._v(t._s(t.requiredInputTitle.orderTotalDiscount))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.orderTotalDiscount,expression:"editDetails.orderTotalDiscount"}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.orderTotalDiscount,placeholder:"例：399"},domProps:{value:t.editDetails.orderTotalDiscount},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"orderTotalDiscount",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.MCname}},[t._v(t._s(t.requiredInputTitle.MCname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCname,expression:"editDetails.MCname"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.MCname,placeholder:t.requiredInputTitle.MCname},domProps:{value:t.editDetails.MCname},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCname",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.MCphone}},[t._v(t._s(t.requiredInputTitle.MCphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCphone,expression:"editDetails.MCphone"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.MCphone,placeholder:"0933128872"},domProps:{value:t.editDetails.MCphone},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCphone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-4"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.MCemail}},[t._v(t._s(t.requiredInputTitle.MCemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCemail,expression:"editDetails.MCemail"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.MCemail,placeholder:"Hello-World@email.com"},domProps:{value:t.editDetails.MCemail},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCemail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.ECname}},[t._v(t._s(t.requiredInputTitle.ECname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECname,expression:"editDetails.ECname"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.ECname,placeholder:t.requiredInputTitle.ECname},domProps:{value:t.editDetails.ECname},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECname",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.ECphone}},[t._v(t._s(t.requiredInputTitle.ECphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECphone,expression:"editDetails.ECphone"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.ECphone,placeholder:"0933128872"},domProps:{value:t.editDetails.ECphone},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECphone",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-4"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.ECemail}},[t._v(t._s(t.requiredInputTitle.ECemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECemail,expression:"editDetails.ECemail"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.ECemail,placeholder:"Hello-World@email.com"},domProps:{value:t.editDetails.ECemail},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECemail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-1 mt-4"},[a("input",{staticClass:"btn btn-info",attrs:{type:"button",value:t.inCreatingMode?"新增細項":"編輯細項"},on:{click:function(e){return e.preventDefault(),t.$router.push(t.inCreatingMode?{name:"管理系統：新增細項"}:{name:"管理系統：編輯細項"})}}})]),t._v(" "),a("div",{staticClass:"col-4 ml-auto"},[a("div",{staticClass:"action-buttons-block mr-4 ml-auto mt-4 px-3 d-flex justify-content-around align-items-center"},[a("input",{staticClass:"btn btn-primary",class:{"invalid-btn":r},attrs:{type:"button",value:t.inCreatingMode?"新增完成":"修改完成",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.updateOrderData(e)}}}),t._v(" "),a("a",{staticClass:"d-inline-block",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push({name:"管理系統：訂單管理"})}}},[t._v("不儲存關閉")])])])])]}}])})],1)},staticRenderFns:[]};var Qt=a("VU/8")(Wt,zt,!1,function(t){a("28K2")},"data-v-35f6d17a",null).exports,Yt={data:function(){return{inCreatingMode:null,creatingID:null,managingOrder:"",modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;if(-1!=this.situation.event.indexOf("失敗")&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：方案管理"})},1e3),-1!=this.situation.event.indexOf("刪除訂單")){var e={session:this.callBy.GlobalFunctions.getKapitanSession("backstage"),orderID:this.callBy.managingOrder};1==this.emitValue?(this.situation.buttonType="checked",this.callBy.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/DeleteOrder.php",$()(e)).then(function(e){t.situation.event="刪除訂單成功",t.situation.message=e.data}).catch(function(e){t.situation.event="刪除訂單失敗",t.situation.message=e.data})):"checked"==this.emitValue&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：訂單管理"})},1500)}}},allOrderDetailsArr:[],itemsNumPerPage:5,currentPageContentArr:[],currentPageContentSerial:[],editWhichOrderDetail:"",inEditingIndex:-1,editorClass:{creatingMode:["creating-editor"],eidtingMode:["eidting-editor","px-3","py-0"]}}},props:["currentManager","currentPath"],components:{Breadcrumb:B,Pagination:V,OrderDetailsForm:Ht},created:function(){this.managingOrder=localStorage.getItem("managingOrder"),this.initializeEditor()},methods:{initializeEditor:function(){var t=this;-1==this.currentPath.indexOf("Order-Details-Creation")?(this.inCreatingMode=!1,this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryOrderDetails.php",t.managingOrder).then(function(e){t.allOrderDetailsArr=e.data}).catch(function(t){console.log(t)})):(this.inCreatingMode=!0,this.inEditingIndex=0,this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryCreatingID.php","Order-Details").then(function(e){t.creatingID=e.data}).catch(function(t){console.log(t)}))},getCurrentContentAnsSerial:function(t,e){this.currentPageContentArr=t,this.currentPageContentSerial=e}},computed:{returnBreadCrumbData:function(){return this.inCreatingMode?{pagesArr:["管理系統：新增訂單","管理系統：新增細項"],currentPage:2}:{pagesArr:["管理系統：查詢訂單","管理系統：編輯訂單","管理系統：編輯細項"],currentPage:3}}}},Xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative",attrs:{id:"order-detail-editor-page"}},[a("Breadcrumb",{attrs:{breadCrumbData:t.returnBreadCrumbData}}),t._v(" "),a("h6",{staticClass:"mt-2 mb-4 mr-4 d-inline-block"},[t.inCreatingMode?a("span",[t._v(" 正在新增："+t._s(t.creatingID)+" 號訂單細項 ")]):a("span",[t._v("\n      正在編輯："+t._s(t.managingOrder)+"號訂單的細項")])]),t._v(" "),a("table",{staticClass:"table",class:t.inCreatingMode?"creating-mode-table":["table-striped","eidting-mode-table"]},[t.inCreatingMode?t._e():a("thead",[t._m(0)]),t._v(" "),a("tbody",[t._l(t.currentPageContentArr,function(e,r){return a("tr",{directives:[{name:"show",rawName:"v-show",value:t.inEditingIndex==r||-1==t.inEditingIndex,expression:"inEditingIndex == index || inEditingIndex == -1"}],key:r,staticClass:"order-item",on:{click:function(e){e.preventDefault(),t.inEditingIndex=r,t.currentPageContentArr=t.currentPageContentArr}}},[a("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v("\n          "+t._s(t.currentPageContentSerial[r])+"\n        ")]),t._v(" "),a("td",[t._v(t._s(t.currentPageContentArr[r].ORDER_DETAIL_ID))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n          "+t._s(t.currentPageContentArr[r].PROJECT_NAME)+"\n        ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n          "+t._s(t.currentPageContentArr[r].ORDER_DETAIL_MC_NAME)+"\n        ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n          "+t._s(t.currentPageContentArr[r].ORDER_DETAIL_MC_PHONE)+"\n        ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n          "+t._s(t.currentPageContentArr[r].ORDER_DETAIL_EC_NAME)+"\n        ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n          "+t._s(t.currentPageContentArr[r].ORDER_DETAIL_EC_PHONE)+"\n        ")])])}),t._v(" "),a("tr",[a("td",{staticClass:"py-0",class:t.inCreatingMode?t.editorClass.creatingMode:t.editorClass.editingMode,attrs:{colspan:"7"}},[a("OrderDetailsForm",{directives:[{name:"show",rawName:"v-show",value:-1!=t.inEditingIndex,expression:"inEditingIndex != -1"}],attrs:{inCreatingMode:t.inCreatingMode,currentPageContentArr:t.currentPageContentArr,inEditingIndex:t.inEditingIndex},on:{"update:currentPageContentArr":function(e){t.currentPageContentArr=e},"update:current-page-content-arr":function(e){t.currentPageContentArr=e},"update:inEditingIndex":function(e){t.inEditingIndex=e},"update:in-editing-index":function(e){t.inEditingIndex=e},emitRerenderRequest:t.initializeEditor}})],1)])],2)]),t._v(" "),a("div",{staticClass:"position-absolute",attrs:{id:"pagination-container"}},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.currentPageContentArr.length>0&&!t.inCreatingMode,expression:"currentPageContentArr.length > 0 && !inCreatingMode"}],attrs:{allContentArr:t.allOrderDetailsArr,itemsNumPerPage:t.itemsNumPerPage},on:{emitCurrentContentAndSerial:t.getCurrentContentAnsSerial}})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("序號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("項目編號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("方案名稱")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("主要聯絡人姓名")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("主要聯絡人手機")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("緊急聯絡人姓名")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("緊急聯絡人手機")])])}]};var Zt=a("VU/8")(Yt,Xt,!1,function(t){a("SGVs")},"data-v-5f73dc63",null).exports,te={data:function(){return{currentMode:"",breadCrumbData:{pagesArr:["管理系統：方案管理","管理系統：方案查詢"],currentPage:2},queryData:{projectID:"",projectName:"",projectStatus:"",projectCategory:"",projectDepartureLocation:"",projectPriceBeyond:1e4},categoryList:[],allProjectsArr:[],itemsNumPerPage:5,currentPageContentArr:[],currentPageContentSerial:[]}},components:{Breadcrumb:B,Pagination:V},created:function(){var t=this;this.$http.get("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryCategoryList.php").then(function(e){t.categoryList=e.data})},methods:{submitProjectsQuery:function(){var t=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryProjects.php",$()(t.queryData)).then(function(e){t.allProjectsArr=e.data,t.allProjectsArr.sort(function(t,e){return t.SORT_INDEX-e.SORT_INDEX})}).catch(function(t){console.log(t)})},getCurrentContentAndSerial:function(t,e){this.currentPageContentArr=t,this.currentPageContentSerial=e},checkProjectDetails:function(t){localStorage.removeItem("managingProject"),localStorage.setItem("managingProject",t),this.$router.push({name:"管理系統：編輯方案"})}}},ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative",attrs:{id:"project-searching-page"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"project-id"}},[t._v("方案編號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.projectID,expression:"queryData.projectID"}],staticClass:"form-control",attrs:{type:"text",id:"project-id",placeholder:"PJ0000001"},domProps:{value:t.queryData.projectID},on:{input:function(e){e.target.composing||t.$set(t.queryData,"projectID",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"project-name"}},[t._v("方案名稱")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.projectName,expression:"queryData.projectName"}],staticClass:"form-control",attrs:{type:"text",id:"project-name",placeholder:"可輸入全名或關鍵詞"},domProps:{value:t.queryData.projectName},on:{input:function(e){e.target.composing||t.$set(t.queryData,"projectName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"project-status"}},[t._v("方案狀態")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.queryData.projectStatus,expression:"queryData.projectStatus"}],staticClass:"form-control form-select-lg",attrs:{id:"project-status"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.queryData,"projectStatus",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("－請選擇－")]),t._v(" "),a("option",{attrs:{value:"%%"}},[t._v("全部")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("上線中")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("已下線")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])])])]),t._v(" "),a("div",{staticClass:"col-2 d-flex justify-content-end",attrs:{id:"rechoose-mode-link"}},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/Admin/Projects-Manager")}}},[t._v("重選模式\n        "),a("i",{staticClass:"fas fa-sign-out-alt"})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"project-category"}},[t._v("所屬分類")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.queryData.projectCategory,expression:"queryData.projectCategory"}],staticClass:"form-control form-select-lg",attrs:{id:"project-category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.queryData,"projectCategory",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("－請選擇－")]),t._v(" "),a("option",{attrs:{value:"%%"}},[t._v("全選")]),t._v(" "),t._l(t.categoryList,function(e){return a("option",{key:e.CATEGORY_NAME,domProps:{value:e.CATEGORY_NAME}},[t._v("\n              "+t._s(e.CATEGORY_NAME)+"\n            ")])})],2)]),t._v(" "),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"project-departure-location"}},[t._v("會合地點")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.projectDepartureLocation,expression:"queryData.projectDepartureLocation"}],staticClass:"form-control",attrs:{type:"text",id:"project-departure-location",placeholder:"可輸入全名或關鍵詞"},domProps:{value:t.queryData.projectDepartureLocation},on:{input:function(e){e.target.composing||t.$set(t.queryData,"projectDepartureLocation",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-3"},[t._m(0),t._v(" "),a("div",{staticClass:"h-50 px-1 d-flex flex-column align-items-start"},[a("div",{staticClass:"project-price-str"},[t._v("\n              "+t._s(t._f("dollarSign")(t._f("currency")(Number(t.queryData.projectPriceBeyond))))+"\n            ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.projectPriceBeyond,expression:"queryData.projectPriceBeyond"}],staticClass:"form-range",attrs:{type:"range",min:"0",max:"10000",step:"500",id:"project-price-beyond"},domProps:{value:t.queryData.projectPriceBeyond},on:{__r:function(e){return t.$set(t.queryData,"projectPriceBeyond",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-group col-md-1 ml-3"},[a("label",{attrs:{for:""}},[t._v(" ")]),t._v(" "),a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"進行查詢"},on:{click:function(e){return e.preventDefault(),t.submitProjectsQuery(e)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h6",{staticClass:"my-4"},[t._v("查詢結果：")]),t._v(" "),a("table",{staticClass:"table table-striped queryResultsTable"},[t._m(1),t._v(" "),t._l(t.currentPageContentArr,function(e,r){return a("tbody",{key:r},[a("tr",{staticClass:"order-item",on:{click:function(e){return e.preventDefault(),t.checkProjectDetails(t.currentPageContentArr[r].PROJECT_ID)}}},[a("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v("\n              "+t._s(t.currentPageContentSerial[r])+"\n            ")]),t._v(" "),a("td",[t._v(t._s(t.currentPageContentArr[r].PROJECT_ID))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].PROJECT_NAME)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].CATEGORY_NAME)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t._f("dollarSign")(t._f("currency")(t.currentPageContentArr[r].PROJECT_ORIGINAL_PRICE_PER_PERSON)))+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].LOCATION_NAME)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t._f("projectStatus")(t.currentPageContentArr[r].PROJECT_STATUS))+"\n            ")])])])})],2),t._v(" "),t.currentPageContentArr.length<=0?a("div",{staticClass:"text-danger mt-5 text-center"},[t._v("\n        查無資料\n      ")]):t._e()])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center mt-4 position-absolute",attrs:{id:"pagination-container"}},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.currentPageContentArr.length>0,expression:"currentPageContentArr.length > 0"}],attrs:{allContentArr:t.allProjectsArr,itemsNumPerPage:t.itemsNumPerPage},on:{emitCurrentContentAndSerial:t.getCurrentContentAndSerial}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-label",attrs:{for:"project-price-beyond"}},[this._v("人均價格"),e("span",{staticClass:"remarks"},[this._v("（含）以下")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("序號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("方案編號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("方案名稱")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("所屬分類")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("人均價格")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會合地點")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("方案狀態")])])])}]};var ae=a("VU/8")(te,ee,!1,function(t){a("wkUp")},"data-v-3d4ad97a",null).exports,re=a("woOf"),ne=a.n(re),se=a("//Fk"),ie=a.n(se),oe=a("+qPk"),le={data:function(){return{adminLevel:null,inCreatingMode:null,breadCrumbData:{pagesArr:["管理系統：查詢方案","管理系統：編輯方案"],currentPage:2},modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;if(-1!=this.situation.event.indexOf("失敗")&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：方案管理"})},1e3),-1!=this.situation.event.indexOf("刪除方案")){var e={session:this.callBy.GlobalFunctions.getKapitanSession("backstage"),projectID:this.callBy.managingProjectID};1==this.emitValue?(this.situation.buttonType="checked",this.callBy.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/DeleteProject.php",$()(e)).then(function(e){t.situation.event="刪除方案成功",t.situation.message=e.data}).catch(function(e){t.situation.event="刪除方案失敗",t.situation.message=e.data})):"checked"==this.emitValue&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：方案管理"})},1500)}this.callBy.modalData.situation.event="",this.callBy.modalData.situation.message=""}},requiredInputTitle:{projectStatus:"方案狀態",projectName:"方案名稱",projectPricePerPerson:"人均價格",projectMinNumOfPeople:"最低人數",projectMaxNumOfPeople:"最高人數",projectCategory:"所屬分類",projectDepartureLocation:"會合地點",projectAvatarPublicID:"方案大頭貼",projectCarouselImgs:"方案輪播圖"},renderData:{categoryList:[],departureLocationList:[]},managingProjectID:{},editDetails:{projectStatus:"",projectName:"",projectAvatarPublicID:"",projectCarouselImgs:[],projectSummary:"",projectDescription:"",projectPricePerPerson:0,projectMinNumOfPeople:0,projectMaxNumOfPeople:0,projectCategory:"",projectDepartureLocation:"",projectDepartureLocationDescription:""},editorPrompt:"",vueEditorData:{ToolbarConfig:[[{header:[!1,1,2,3,4,5,6]}],["bold"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],vModelTargets:["方案摘要","方案內容"],inEditing:"方案摘要"},vueCloudinaryData:{filesData:{avatar:"",carouselImgs:[]},uploadStatus:""}}},props:["currentManager","currentPath"],created:function(){var t=this;this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e}),this.initializeEditor()},components:{Breadcrumb:B,VueEditor:oe.a},methods:{initializeEditor:function(){var t=this.GlobalFunctions.getKapitanSession("backstage"),e=this;e.editDetails.projectName="",e.editDetails.projectPricePerPerson=0,e.editDetails.projectMinNumOfPeople=0,e.editDetails.projectMaxNumOfPeople=0,e.vueCloudinaryData.filesData.avatar="",e.vueCloudinaryData.filesData.carouselImgs=[],e.editDetails.projectSummary="",e.editDetails.projectDescription="",e.editDetails.projectStatus="0",e.editDetails.projectCategory="CG0001",e.editDetails.projectDepartureLocation="LC0001",e.editorPrompt="",-1==this.currentPath.indexOf("Project-Creation")?this.inCreatingMode=!1:this.inCreatingMode=!0,ie.a.all([this.$http.get("https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/QueryCategoryList.php"),this.$http.get("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryDepartureLocationList.php"),this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminSignInAuthentication.php",t)]).then(function(t){if(e.renderData.categoryList=t[0].data,e.renderData.departureLocationList=t[1].data,e.adminLevel=t[2].data.adminLevel,e.inCreatingMode)return e.adminLevel>2?e.editDetails.projectStatus=-1:e.editDetails.projectStatus=0,e.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryCreatingID.php",e.currentManager);e.managingProjectID=localStorage.getItem("managingProject"),e.queryProjectDetails()}).then(function(t){e.inCreatingMode&&(e.managingProjectID=t.data)})},queryProjectDetails:function(){var t=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryProjectDetails.php",t.managingProjectID).then(function(e){console.log(e.data),t.editDetails.projectStatus=e.data.PROJECT_STATUS,t.editDetails.projectName=e.data.PROJECT_NAME,t.editDetails.projectAvatarPublicID=e.data.PROJECT_AVATAR_URL,t.editDetails.projectSummary=e.data.PROJECT_SUMMARY,t.editDetails.projectDescription=e.data.PROJECT_DESCRIPITION,t.editDetails.projectPricePerPerson=e.data.PROJECT_ORIGINAL_PRICE_PER_PERSON,t.editDetails.projectMinNumOfPeople=e.data.PROJECT_MIN_NUM_OF_PEOPLE,t.editDetails.projectMaxNumOfPeople=e.data.PROJECT_MAX_NUM_OF_PEOPLE,t.editDetails.projectCategory=e.data.CATEGORY_ID,t.editDetails.projectDepartureLocation=e.data.LOCATION_ID,t.editDetails.projectDepartureLocationDescription=e.data.LOCATION_DESCRIPTION,console.log(t.editDetails)}).catch(function(t){console.log(t)})},handleFileChange:function(t){if("方案大頭貼"==t.target.id)this.vueCloudinaryData.filesData.avatar=t.target.files[0],console.log("上傳檔案更換：",this.vueCloudinaryData.filesData.avatar);else if("方案輪播圖"==t.target.id){this.vueCloudinaryData.filesData.carouselImgs=[];for(var e=0;e<t.target.files.length;e++)this.vueCloudinaryData.filesData.carouselImgs.push(t.target.files[e]);console.log("上傳檔案更換：",this.vueCloudinaryData.filesData.carouselImgs)}},uploadImgAndUpdateData:function(){var t=this;this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.buttonType="checked";var e="https://api.cloudinary.com/v1_1/"+this.GlobalVariables.cloudName+"/upload",a=this,r=this.vueCloudinaryData.filesData.avatar,s=this.vueCloudinaryData.filesData.carouselImgs;""==r&&!r.name&&s.length<=0?this.updateProjectDetails():function(){var s=t.vueCloudinaryData.filesData.carouselImgs;if(""!=r){var o=[];for(var l in o.push(r),s)o.push(s[l]);s=ne()({},o)}var c={};for(var u in s)c[s[u].size+"-"+u]=s[u];s=c;var d=n()(s).length,m=1,p=function(t){var n=new FileReader;n.addEventListener("load",function(){var o="",l=t.indexOf("-"),c=t.substr(l+1);o=""!=r&&0==c?a.GlobalVariables.projectAvatarPreset:a.GlobalVariables.projectCarouselPreset;var u=new FormData;u.append("upload_preset",o),u.append("file",n.result);var p={url:e,method:"POST",data:u,onUploadProgress:function(t){a.modalData.situation.message="<p>開始處理上傳事件<p>",a.progress=Math.round(100*t.loaded/t.total),a.modalData.situation.message="<p>正在上傳第 "+m+" 張圖片，總共有 "+d+" 張圖片。<p>第 "+m+" 張圖片的上傳進度："+a.progress+"％"}};i()(p).then(function(t){console.log(t.data);var e=t.data.public_id;if(""!=r&&-1!=e.indexOf("Projects-Avatar")?a.editDetails.projectAvatarPublicID=e:a.editDetails.projectCarouselImgs.push(t.data),m==d){for(var n in a.modalData.situation.event="圖片上傳成功。",a.modalData.situation.message="<p>"+m+" 張圖片全部上傳成功！</p>",s){var i=n.indexOf("-"),o=n.substr(0,i),l=n.substr(i+1),c=!0,u=!1,p=void 0;try{for(var v,f=j()(a.editDetails.projectCarouselImgs);!(c=(v=f.next()).done);c=!0){var g=v.value;g.bytes==o&&(g.sortIndex=l)}}catch(t){u=!0,p=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw p}}}a.editDetails.projectCarouselImgs.sort(function(t,e){return t.sortIndex-e.sortIndex});var h=a.editDetails.projectCarouselImgs;a.editDetails.projectCarouselImgs=[];var _=!0,C=!1,b=void 0;try{for(var D,P=j()(h);!(_=(D=P.next()).done);_=!0){var I=D.value;a.editDetails.projectCarouselImgs.push(I.public_id)}}catch(t){C=!0,b=t}finally{try{!_&&P.return&&P.return()}finally{if(C)throw b}}a.updateProjectDetails()}else a.modalData.situation.message="第 "+m+" 張圖片上傳成功";m++}).catch(function(t){console.log(t),a.modalData.situation.event="圖片上傳失敗。",a.modalData.situation.message="圖片上傳失敗！請稍後再試。"})},!1),n.readAsDataURL(s[t])};for(var v in s)p(v)}()},updateProjectDetails:function(){var t=this,e={session:t.GlobalFunctions.getKapitanSession("backstage"),projectID:t.managingProjectID,editedDetails:t.editDetails},a="";a=this.inCreatingMode?"https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/InsertNewProject.php":"https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/UpdateProjectDetails.php",t.$http.post(a,$()(e)).then(function(e){t.modalData.situation.event+="資料庫寫入成功。",t.modalData.situation.message+=e.data}).catch(function(e){t.modalData.situation.event+="資料庫寫入失敗。",t.modalData.situation.message+=e.data}).then(function(){t.initializeEditor()})},deleteProject:function(){this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.event="刪除方案",this.modalData.situation.message="確定要刪除 "+this.managingProjectID+" 專案嗎？",this.modalData.situation.buttonType="yesNo"},uploadContentImg:function(t,e,a){var r="https://api.cloudinary.com/v1_1/"+this.GlobalVariables.cloudName+"/upload",n=this;n.editorPrompt="",n.editorPrompt="編輯器圖片上傳器已啟動";var s=new FormData;s.append("upload_preset",n.GlobalVariables.projectContentPreset),s.append("file",t);var o={url:r,method:"POST",data:s,onUploadProgress:function(t){n.editorPrompt="正在處理："+t,n.progress=Math.round(100*t.loaded/t.total),n.editorPrompt="編輯器圖片上傳進度："+n.progress+"％"}};i()(o).then(function(t){n.editorPrompt="編輯器圖片上傳成功！",console.log(t);var r=t.data.secure_url;e.insertEmbed(a,"image",r)}).catch(function(t){n.editorPrompt="編輯器圖片上傳失敗！",console.log(t)})}},computed:{returnModalEmitValue:function(){return this.modalData.emitValue}}},ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"project-editor-page"}},[t.inCreatingMode?t._e():a("Breadcrumb",{attrs:{breadCrumbData:t.breadCrumbData}}),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[a("h6",{staticClass:"mt-2 mb-4 d-inline-block"},[t._v("\n      正在"),t.inCreatingMode?a("span",[t._v("新增")]):a("span",[t._v("編輯")]),t._v("："+t._s(t.managingProjectID)+"\n      方案\n      "),t.inCreatingMode?t._e():a("span",{staticClass:"delete-project-btn ml-1"},[a("a",{attrs:{href:"","data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.deleteProject(e)}}},[t._v("刪除專案")])])]),t._v(" "),t.inCreatingMode&&2==t.breadCrumbData.currentPage?t._e():a("div",{staticClass:"d-inline-block"},[a("div",{staticClass:"d-flex justify-content-end",attrs:{id:"rechoose-mode-link"}},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/Admin/Projects-Manager")}}},[t._v("重選模式\n          "),a("i",{staticClass:"fas fa-sign-out-alt"})])])])]),t._v(" "),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-2"},[a("label",{attrs:{for:t.requiredInputTitle.projectStatus}},[t._v(t._s(t.requiredInputTitle.projectStatus))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectStatus,expression:"editDetails.projectStatus"}],staticClass:"form-control form-select-lg",attrs:{id:t.requiredInputTitle.projectStatus,disabled:t.adminLevel>2},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editDetails,"projectStatus",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("上線中")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("已下線")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])]),t._v(" "),a("div",{staticClass:"form-group col-4"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.projectName}},[t._v(t._s(t.requiredInputTitle.projectName))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectName,expression:"editDetails.projectName"}],staticClass:"form-control",class:n,attrs:{type:"text",id:t.requiredInputTitle.projectName,placeholder:"請輸入全名，可包含符號"},domProps:{value:t.editDetails.projectName},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"projectName",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.projectPricePerPerson}},[t._v(t._s(t.requiredInputTitle.projectPricePerPerson))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectPricePerPerson,expression:"editDetails.projectPricePerPerson"}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.projectPricePerPerson,placeholder:"例：1000"},domProps:{value:t.editDetails.projectPricePerPerson},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"projectPricePerPerson",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.projectMinNumOfPeople}},[t._v(t._s(t.requiredInputTitle.projectMinNumOfPeople))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectMinNumOfPeople,expression:"editDetails.projectMinNumOfPeople"}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.projectMinNumOfPeople,placeholder:"例：3"},domProps:{value:t.editDetails.projectMinNumOfPeople},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"projectMinNumOfPeople",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-2"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.projectMaxNumOfPeople}},[t._v(t._s(t.requiredInputTitle.projectMaxNumOfPeople))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectMaxNumOfPeople,expression:"editDetails.projectMaxNumOfPeople"}],staticClass:"form-control",class:n,attrs:{type:"number",id:t.requiredInputTitle.projectMaxNumOfPeople,placeholder:"例：3"},domProps:{value:t.editDetails.projectMaxNumOfPeople},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"projectMaxNumOfPeople",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-2"},[a("label",{attrs:{for:t.requiredInputTitle.projectCategory}},[t._v(t._s(t.requiredInputTitle.projectCategory))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectCategory,expression:"editDetails.projectCategory"}],staticClass:"form-control form-select-lg",attrs:{id:t.requiredInputTitle.projectCategory},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editDetails,"projectCategory",e.target.multiple?a:a[0])}}},t._l(t.renderData.categoryList,function(e){return a("option",{key:e.CATEGORY_NAME,domProps:{value:e.CATEGORY_ID}},[t._v("\n                "+t._s(e.CATEGORY_NAME)+"\n              ")])}),0)]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:t.requiredInputTitle.projectDepartureLocation}},[t._v(t._s(t.requiredInputTitle.projectDepartureLocation))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.projectDepartureLocation,expression:"editDetails.projectDepartureLocation"}],staticClass:"form-control form-select-lg",attrs:{id:t.requiredInputTitle.projectDepartureLocation},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editDetails,"projectDepartureLocation",e.target.multiple?a:a[0])}}},t._l(t.renderData.departureLocationList,function(e){return a("option",{key:e.LOCATION_NAME,domProps:{value:e.LOCATION_ID}},[t._v("\n                "+t._s(e.LOCATION_NAME)+"\n              ")])}),0)]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{staticClass:"form-label",attrs:{for:t.requiredInputTitle.projectAvatarPublicID}},[t._v(t._s(t.requiredInputTitle.projectAvatarPublicID))]),t._v(" "),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{id:t.requiredInputTitle.projectAvatarPublicID,type:"file",accept:"image/png, image/jpeg"},on:{change:function(e){return t.handleFileChange(e)}}}),t._v(" "),a("label",{staticClass:"custom-file-label",attrs:{for:t.requiredInputTitle.projectAvatarPublicID}},[t._v(t._s(t.vueCloudinaryData.filesData.avatar.name||"請選擇檔案"))])])]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{staticClass:"form-label",attrs:{for:t.requiredInputTitle.projectCarouselImgs}},[t._v(t._s(t.requiredInputTitle.projectCarouselImgs))]),t._v(" "),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{id:t.requiredInputTitle.projectCarouselImgs,type:"file",multiple:"",accept:"image/png, image/jpeg"},on:{change:function(e){return t.handleFileChange(e)}}}),t._v(" "),a("label",{staticClass:"custom-file-label",attrs:{for:t.requiredInputTitle.projectCarouselImgs}},[t._v(t._s("已選擇 "+t.vueCloudinaryData.filesData.carouselImgs.length+" 個檔案"))])])])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("h6",{staticClass:"d-inline-block"},[t._v("方案文本編輯器")]),t._v(" "),a("span",{staticClass:"d-inline-block ml-2",attrs:{id:"editor-prompt"},domProps:{innerHTML:t._s(t.editorPrompt)}})])]),t._v(" "),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-9"},["方案摘要"==t.vueEditorData.inEditing?a("VueEditor",{ref:"vueEditor",attrs:{editorToolbar:t.vueEditorData.ToolbarConfig,"use-custom-image-handler":!0},on:{"image-added":t.uploadContentImg},model:{value:t.editDetails.projectSummary,callback:function(e){t.$set(t.editDetails,"projectSummary",e)},expression:"editDetails.projectSummary"}}):a("VueEditor",{ref:"vueEditor",attrs:{editorToolbar:t.vueEditorData.ToolbarConfig,"use-custom-image-handler":!0},on:{"image-added":t.uploadContentImg},model:{value:t.editDetails.projectDescription,callback:function(e){t.$set(t.editDetails,"projectDescription",e)},expression:"editDetails.projectDescription"}})],1),t._v(" "),a("div",{staticClass:"col-3 d-flex flex-column"},[a("h6",[t._v("正在編輯：")]),t._v(" "),a("ul",{staticClass:"editingHTMLlist pl-2 mt-3"},t._l(t.vueEditorData.vModelTargets,function(e){return a("li",{key:e,staticClass:"mb-2 d-flex justify-content-start align-items-center",on:{click:function(a){t.vueEditorData.inEditing=e}}},[a("div",{staticClass:"in-editing-arrow d-flex align-items-center mr-1"},[a("div",{staticClass:"w-100 h-100 align-items-center",class:t.vueEditorData.inEditing==e?"d-flex":"d-none"},[a("i",{staticClass:"fas fa-arrow-alt-circle-right"})])]),t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{staticClass:"action-buttons-block w-100 mt-5 px-2 d-flex justify-content-between align-items-center"},[a("input",{staticClass:"btn btn-primary",class:{"invalid-btn":r},attrs:{type:"button",value:t.inCreatingMode?"新增完成":"修改完成",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.uploadImgAndUpdateData(e)}}}),t._v(" "),a("a",{staticClass:"d-inline-block",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/Admin/Projects-Manager")}}},[t._v("不儲存關閉")])])])])]}}])})],1)},staticRenderFns:[]};var ue=a("VU/8")(le,ce,!1,function(t){a("Sbz5")},"data-v-02ccc06c",null).exports,de={data:function(){return{queryData:{memberID:"",memberStatus:"",memberAccount:"",memberName:"",memberPhone:""},allMembersArr:[],itemsNumPerPage:5,currentPageContentArr:[],currentPageContentArrSerial:[]}},components:{Pagination:V},methods:{submitMembersQuery:function(){var t=this;this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryMembers.php",$()(t.queryData)).then(function(e){t.allMembersArr=[];for(var a=e.data,r=0;r<a.length;r++){var n=!1;t:for(var s=0;s<t.allMembersArr.length;s++)if(a[r].MEMBER_ID==t.allMembersArr[s].MEMBER_ID){n=!0;break t}n||(a[r].MEMBER_REGISTERED_DATE=new Date(a[r].MEMBER_REGISTERED_DATE).Format("yyyy-MM-dd"),t.allMembersArr.push(a[r]))}console.log(t.allMembersArr),t.allMembersArr.sort(function(t,e){return t.SORT_INDEX-e.SORT_INDEX})}).catch(function(t){console.log(t)})},getCurrentContentAndSerial:function(t,e){this.currentPageContentArr=t,this.currentPageContentArrSerial=e},checkMemberInfo:function(t){localStorage.removeItem("managingMember"),localStorage.setItem("managingMember",t),this.$router.push({name:"管理系統：編輯會員"})}}},me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative",attrs:{id:"members-searching-page"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"member-id"}},[t._v("會員編號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.memberID,expression:"queryData.memberID"}],staticClass:"form-control",attrs:{type:"text",id:"member-id",placeholder:"MB0000001"},domProps:{value:t.queryData.memberID},on:{input:function(e){e.target.composing||t.$set(t.queryData,"memberID",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"member-status"}},[t._v("會員狀態")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.queryData.memberStatus,expression:"queryData.memberStatus"}],staticClass:"form-control form-select-lg",attrs:{id:"member-status"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.queryData,"memberStatus",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("－請選擇－")]),t._v(" "),a("option",{attrs:{value:"%%"}},[t._v("全選")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("正常")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("警告")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("停權")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])]),t._v(" "),a("div",{staticClass:"form-group col-4"},[a("label",{attrs:{for:"member-account"}},[t._v("會員帳號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.memberAccount,expression:"queryData.memberAccount"}],staticClass:"form-control",attrs:{type:"email",id:"member-account",placeholder:"Hello-World@email.com"},domProps:{value:t.queryData.memberAccount},on:{input:function(e){e.target.composing||t.$set(t.queryData,"memberAccount",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"col-2 ml-auto d-flex justify-content-end",attrs:{id:"rechoose-mode-link"}},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/Admin/Orders-Manager")}}},[t._v("重選模式\n        "),a("i",{staticClass:"fas fa-sign-out-alt"})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"memberer-name"}},[t._v("會員姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.memberName,expression:"queryData.memberName"}],staticClass:"form-control",attrs:{type:"text",id:"memberer-name",placeholder:"會員姓名"},domProps:{value:t.queryData.memberName},on:{input:function(e){e.target.composing||t.$set(t.queryData,"memberName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:"member-phone"}},[t._v("會員手機")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryData.memberPhone,expression:"queryData.memberPhone"}],staticClass:"form-control",attrs:{type:"text",id:"member-phone",placeholder:"0900000000"},domProps:{value:t.queryData.memberPhone},on:{input:function(e){e.target.composing||t.$set(t.queryData,"memberPhone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-4"}),t._v(" "),a("div",{staticClass:"form-group col-1 ml-3"},[a("label",{attrs:{for:""}},[t._v(" ")]),t._v(" "),a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"進行查詢"},on:{click:function(e){return e.preventDefault(),t.submitMembersQuery(e)}}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h6",{staticClass:"my-4"},[t._v("查詢結果：")]),t._v(" "),a("table",{staticClass:"table table-striped query-resultsTable"},[t._m(0),t._v(" "),t._l(t.currentPageContentArr,function(e,r){return a("tbody",{key:r},[a("tr",{staticClass:"order-item",on:{click:function(e){return e.preventDefault(),t.checkMemberInfo(t.currentPageContentArr[r].MEMBER_ID)}}},[a("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v("\n              "+t._s(t.currentPageContentArrSerial[r])+"\n            ")]),t._v(" "),a("td",[t._v(t._s(t.currentPageContentArr[r].MEMBER_ID))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].MEMBER_ACCOUNT)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].MEMBER_NAME||"未填寫")+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].MEMBER_PHONE||"未填寫")+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t.currentPageContentArr[r].MEMBER_REGISTERED_DATE)+"\n            ")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v("\n              "+t._s(t._f("memberStatus")(t.currentPageContentArr[r].MEMBER_STATUS))+"\n            ")])])])})],2),t._v(" "),t.currentPageContentArr.length<=0?a("div",{staticClass:"text-danger mt-5 text-center"},[t._v("\n        查無資料\n      ")]):t._e()])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center mt-4 position-absolute",attrs:{id:"pagination-container"}},[a("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.currentPageContentArr.length>0,expression:"currentPageContentArr.length > 0"}],attrs:{allContentArr:t.allMembersArr,itemsNumPerPage:t.itemsNumPerPage},on:{emitCurrentContentAndSerial:t.getCurrentContentAndSerial}})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("序號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會員編號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會員帳號")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會員姓名")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會員手機")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("註冊日期")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("會員狀態")])])])}]};var pe=a("VU/8")(de,me,!1,function(t){a("vRwy")},"data-v-7bbd6070",null).exports,ve={data:function(){return{adminLevel:null,inCreatingMode:null,managingMember:"",repeatRegister:!1,showRemark:!1,breadCrumbData:{pagesArr:["管理系統：查詢會員","管理系統：編輯會員"],currentPage:2},modalData:{callBy:null,situation:{event:"",message:"",buttonType:"checked",data:{}},emitValue:null,correspond:function(){var t=this;if(-1!=this.situation.event.indexOf("失敗")&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：會員管理"})},1e3),-1!=this.situation.event.indexOf("刪除會員")){var e={session:this.callBy.GlobalFunctions.getKapitanSession("backstage"),memberID:this.callBy.managingMember};1==this.emitValue?(this.situation.buttonType="checked",this.callBy.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/DeleteMember.php",$()(e)).then(function(e){t.situation.event="刪除會員成功",t.situation.message=e.data}).catch(function(e){t.situation.event="刪除會員失敗",t.situation.message=e.data})):"checked"==this.emitValue&&setTimeout(function(){return t.callBy.$router.push({name:"管理系統：會員管理"})},1500)}-1!=this.situation.event.indexOf("資料庫寫入")&&(this.callBy.initializeEditor(),this.situation.event="",this.situation.message="")}},requiredInputTitle:{memberRegDate:"註冊日期",memberStatus:"會員狀態",memberAccount:"會員帳號",memberPassword:"會員密碼",reSetPassword:"重設會員密碼",MCname:"會員姓名",MCphone:"會員手機",memberAvatarURL:"會員大頭貼",ECname:"緊急聯絡人姓名",ECphone:"緊急聯絡人手機",ECemail:"緊急聯絡人電郵"},editDetails:{memberRegDate:"",memberStatus:"",memberAccount:"",memberPassword:"",reSetPassword:"",MCname:"",MCphone:"",memberAvatarURL:"",ECname:"",ECphone:"",ECemail:""},vueCloudinaryData:{filesData:{avatar:""},uploadStatus:""}}},created:function(){var t=this;this.modalData.callBy=this,this.$eventBus.$on("emitModalValue",function(e){t.modalData.emitValue=e}),this.initializeEditor()},props:["currentManager","currentPath"],components:{Breadcrumb:B},methods:{initializeEditor:function(){-1==this.currentPath.indexOf("Member-Creation")?this.inCreatingMode=!1:this.inCreatingMode=!0;var t=this.GlobalFunctions.getKapitanSession("backstage"),e=this;e.editDetails.memberRegDate=(new Date).Format("yyyy-MM-ddThh:mm"),e.editDetails.memberAccount="",e.editDetails.memberPassword="",e.editDetails.reSetPassword="",e.editDetails.MCname="",e.editDetails.MCphone="",e.editDetails.memberAvatarURL="",e.editDetails.ECname="",e.editDetails.ECphone="",e.editDetails.ECemail="",this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminSignInAuthentication.php",t).then(function(t){return e.adminLevel=t.data.adminLevel,e.inCreatingMode?(e.adminLevel>2?e.editDetails.memberStatus=-1:e.editDetails.memberStatus=1,e.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryCreatingID.php",e.currentManager)):(e.managingMember=localStorage.getItem("managingMember"),e.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Universal/QueryMemberInfo.php",e.managingMember))}).catch(function(t){console.log(t)}).then(function(t){e.inCreatingMode?(e.managingMember=t.data,localStorage.setItem("managingMember",e.managingMember)):(e.editDetails.memberStatus=t.data.MEMBER_STATUS,e.editDetails.memberRegDate=new Date(t.data.MEMBER_REGISTERED_DATE).Format("yyyy-MM-ddThh:mm"),e.editDetails.memberAccount=t.data.MEMBER_ACCOUNT,e.editDetails.memberPassword=t.data.MEMBER_PASSWORD,e.editDetails.MCname=t.data.MEMBER_NAME,e.editDetails.MCphone=t.data.MEMBER_PHONE,e.editDetails.memberAvatarURL=t.data.MEMBER_AVATAR_URL,e.editDetails.ECname=t.data.MEMBER_EC_NAME,e.editDetails.ECphone=t.data.MEMBER_EC_PHONE,e.editDetails.ECemail=t.data.MEMBER_EC_EMAIL)}).catch(function(t){console.log(t)})},queryMemberAccount:function(){var t=this,e=this,a=e.editDetails.memberAccount;e.repeatRegister=!1,this.$http.post("https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/QueryMemberAccount.php",a).then(function(r){console.log(r.data);var n=r.data.MEMBER_ACCOUNT,s=r.data.MEMBER_ID;console.log(s),t.inCreatingMode?a==n&&(e.repeatRegister=!0):a==n&&e.managingMember!=s&&(e.repeatRegister=!0)}).catch(function(t){console.log(t)})},triggerFileInput:function(){document.querySelectorAll(".custom-file-input")[0].click()},handleFileChange:function(t){this.vueCloudinaryData.filesData.avatar=t.target.files[0],console.log("上傳檔案更換：",this.vueCloudinaryData.filesData.avatar)},uploadImgAndUpdateData:function(){this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.buttonType="checked";var t="https://api.cloudinary.com/v1_1/"+this.GlobalVariables.cloudName+"/upload",e=this,a=this.vueCloudinaryData.filesData.avatar;if(""!=a||a.name){var r=new FileReader;r.addEventListener("load",function(){var a=new FormData;a.append("upload_preset",e.GlobalVariables.membersAvatarPreset),a.append("file",r.result);var n={url:t,method:"POST",data:a,onUploadProgress:function(t){e.modalData.situation.message="<p>開始處理上傳事件<p>",e.progress=Math.round(100*t.loaded/t.total),e.modalData.situation.message="<p>上傳進度："+e.progress+"％"}};i()(n).then(function(t){console.log(t.data),e.modalData.situation.event="會員大頭貼上傳成功。",e.modalData.situation.message="<p>會員大頭貼上傳成功！</p>",e.editDetails.memberAvatarURL=t.data.public_id,e.updateMemberInfo()}).catch(function(t){console.log(t),e.modalData.situation.event="會員大頭貼上傳失敗。",e.modalData.situation.message="會員大頭貼上傳失敗！請稍後再試。"})},!1),console.log(a),r.readAsDataURL(a)}else this.updateMemberInfo()},updateMemberInfo:function(){var t=this;this.$eventBus.$emit("emitModalData",this.modalData);var e=this,a=e.GlobalFunctions.getKapitanSession("backstage"),r="";this.inCreatingMode?r="https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/InsertNewMember.php":(r="https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/UpdateMemberInfo.php",""!=e.editDetails.reSetPassword&&(e.editDetails.memberPassword=e.editDetails.reSetPassword));var n={session:a,memberID:e.managingMember,editedDetails:e.editDetails};this.$http.post(r,$()(n)).then(function(a){e.modalData.situation.event="資料庫寫入成功。",e.modalData.situation.message+=a.data,t.vueCloudinaryData.filesData.avatar=""}).catch(function(a){e.modalData.situation.event="資料庫寫入失敗。",e.modalData.situation.message+=a.data,t.vueCloudinaryData.filesData.avatar=""})},deleteMember:function(){this.$eventBus.$emit("emitModalData",this.modalData),this.modalData.situation.event="刪除會員",this.modalData.situation.message="確定要刪除會員 "+this.managingMember+" 嗎？",this.modalData.situation.buttonType="yesNo"}}},fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"position-relative",attrs:{id:"member-editor-page"}},[t.inCreatingMode?t._e():a("Breadcrumb",{attrs:{breadCrumbData:t.breadCrumbData}}),t._v(" "),a("h6",{staticClass:"mt-2 mb-4 mr-4 d-inline-block"},[t._v("\n    正在"),t.inCreatingMode?a("span",[t._v("新增")]):a("span",[t._v("編輯")]),t._v("："+t._s(t.managingMember)+"\n    號會員\n    "),t.inCreatingMode?t._e():a("span",{staticClass:"delete-project-btn ml-1"},[a("a",{attrs:{href:"","data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.deleteMember(e)}}},[t._v("刪除會員")])])]),t._v(" "),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.invalid;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:t.requiredInputTitle.memberStatus}},[t._v(t._s(t.requiredInputTitle.memberStatus))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.memberStatus,expression:"editDetails.memberStatus"}],staticClass:"form-control form-select-lg",attrs:{id:t.requiredInputTitle.memberStatus,disabled:t.adminLevel>2},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editDetails,"memberStatus",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("正常")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("警告")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("停權")]),t._v(" "),a("option",{attrs:{value:"-1"}},[t._v("僅供測試")])])]),t._v(" "),a("div",{staticClass:"form-group col-6"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.memberRegDate}},[t._v(t._s(t.requiredInputTitle.memberRegDate))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.memberRegDate,expression:"editDetails.memberRegDate"}],staticClass:"form-control",class:n,attrs:{type:"datetime-local",id:t.requiredInputTitle.memberRegDate},domProps:{value:t.editDetails.memberRegDate},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"memberRegDate",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-5"},[a("ValidationProvider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.requiredInputTitle.memberAccount}},[t._v(t._s(t.requiredInputTitle.memberAccount))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.memberAccount,expression:"editDetails.memberAccount"}],staticClass:"form-control",class:[n,{"is-invalid":t.repeatRegister}],attrs:{type:"email",id:t.requiredInputTitle.memberAccount,placeholder:"Hello-World@email.com"},domProps:{value:t.editDetails.memberAccount},on:{blur:t.queryMemberAccount,input:function(e){e.target.composing||t.$set(t.editDetails,"memberAccount",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback",class:t.repeatRegister?"d-inline-block":"d-none"},[t._v("此帳號已註冊過")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.repeatRegister,expression:"!repeatRegister"}],staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"form-group col-5"},[a("ValidationProvider",{attrs:{rules:{required:!!t.inCreatingMode,regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,n=e.classes;return[a("label",{attrs:{for:t.inCreatingMode?t.requiredInputTitle.memberPassword:t.requiredInputTitle.reSetPassword}},[t._v(t._s(t.inCreatingMode?t.requiredInputTitle.memberPassword:t.requiredInputTitle.reSetPassword))]),a("span",{attrs:{id:"password-remark-trigger"},on:{mouseenter:function(e){t.showRemark=!0},mouseleave:function(e){t.showRemark=!1}}},[t._v("［?］")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showRemark,expression:"showRemark"}],staticClass:"position-absolute",attrs:{id:"password-remark"}},[t._v("8到16位字符，至少1個大寫字母、1個小寫字母、1個數字。")]),t._v(" "),t.inCreatingMode?a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.memberPassword,expression:"editDetails.memberPassword"}],staticClass:"form-control",class:n,attrs:{type:"password",id:t.requiredInputTitle.memberPassword,placeholder:"問號處可得格式提示"},domProps:{value:t.editDetails.memberPassword},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"memberPassword",e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.reSetPassword,expression:"editDetails.reSetPassword"}],staticClass:"form-control",class:n,attrs:{type:"password",id:t.requiredInputTitle.reSetPassword,placeholder:"問號處可得格式提示"},domProps:{value:t.editDetails.reSetPassword},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"reSetPassword",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-4"},[a("label",{attrs:{for:t.requiredInputTitle.MCname}},[t._v(t._s(t.requiredInputTitle.MCname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCname,expression:"editDetails.MCname"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.MCname,placeholder:t.requiredInputTitle.MCname},domProps:{value:t.editDetails.MCname},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCname",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:t.requiredInputTitle.MCphone}},[t._v(t._s(t.requiredInputTitle.MCphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.MCphone,expression:"editDetails.MCphone"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.MCphone,placeholder:"0900000000"},domProps:{value:t.editDetails.MCphone},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"MCphone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-5"},[a("label",{staticClass:"form-label",attrs:{for:t.requiredInputTitle.memberAvatarURL}},[t._v(t._s(t.requiredInputTitle.memberAvatarURL))]),t._v(" "),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{id:t.requiredInputTitle.memberAvatarURL,type:"file",accept:"image/png, image/jpeg"},on:{change:function(e){return t.handleFileChange(e)}}}),t._v(" "),a("label",{staticClass:"custom-file-label",attrs:{for:t.requiredInputTitle.memberAvatarURL}},[t._v(t._s(t.vueCloudinaryData.filesData.avatar.name||"請選擇檔案"))])])])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-4"},[a("label",{attrs:{for:t.requiredInputTitle.ECname}},[t._v(t._s(t.requiredInputTitle.ECname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECname,expression:"editDetails.ECname"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.ECname,placeholder:t.requiredInputTitle.ECname},domProps:{value:t.editDetails.ECname},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECname",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-3"},[a("label",{attrs:{for:t.requiredInputTitle.ECphone}},[t._v(t._s(t.requiredInputTitle.ECphone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECphone,expression:"editDetails.ECphone"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.ECphone,placeholder:"0900000000"},domProps:{value:t.editDetails.ECphone},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECphone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-5"},[a("label",{attrs:{for:t.requiredInputTitle.ECemail}},[t._v(t._s(t.requiredInputTitle.ECemail))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editDetails.ECemail,expression:"editDetails.ECemail"}],staticClass:"form-control",attrs:{type:"text",id:t.requiredInputTitle.ECemail,placeholder:"Hello-World@email.com"},domProps:{value:t.editDetails.ECemail},on:{input:function(e){e.target.composing||t.$set(t.editDetails,"ECemail",e.target.value)}}})])])]),t._v(" "),t.inCreatingMode?t._e():a("div",{staticClass:"col-4 position-relative d-flex flex-column align-items-center",attrs:{id:"member-avatar-area"}},[a("h5",[t._v("會員大頭貼")]),t._v(" "),a("div",{staticClass:"avatar-preview-block my-2 d-flex justify-content-center align-items-center",on:{click:t.triggerFileInput}},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("img",{attrs:{src:null==t.editDetails.memberAvatarURL?t.GlobalVariables.cloudUrlprefix+t.GlobalVariables.cloudNoAvatarUrl:t.GlobalVariables.cloudUrlprefix+t.editDetails.memberAvatarURL,alt:""}})])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 ml-auto"},[a("div",{staticClass:"action-buttons-block mr-4 ml-auto mt-4 px-4 d-flex justify-content-around align-items-center"},[a("input",{staticClass:"btn btn-primary",class:{"invalid-btn":r},attrs:{type:"button",value:t.inCreatingMode?"新增完成":"修改完成",disabled:r,"data-toggle":"modal","data-target":"#modal","data-backdrop":"static"},on:{click:function(e){return e.preventDefault(),t.uploadImgAndUpdateData(e)}}}),t._v(" "),a("a",{staticClass:"d-inline-block",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push({name:"管理系統：查詢會員"})}}},[t._v("不儲存關閉")])])])])]}}])})],1)},staticRenderFns:[]};var ge=a("VU/8")(ve,fe,!1,function(t){a("aaNq")},"data-v-39eaf7d6",null).exports;f.a.use(k.a);var he=new k.a({routes:[{path:"*",redirect:"/"},{path:"/",component:O,children:[{path:"",name:"首頁",component:S},{path:"/Store",name:"挑選航程",component:J},{path:"/Store/Projects/:selectedProjectID",name:"方案",component:st},{path:"/Cart",name:"購物車",component:dt,children:[{path:"/Cart/Checkout",name:"進行結帳",component:bt,meta:{requiresAuth:!0}}]},{path:"/Member-Centre",name:"會員中心",component:Mt,meta:{requiresAuth:!0}},{path:"/Login",name:"登入註冊",component:Ot}]},{path:"/Admin",component:jt,children:[{path:"/Admin/Login",name:"管理系統：登入頁",component:St},{path:"/Admin",name:"管理系統：首頁",component:Lt,meta:{requiresAuth:!0},children:[{path:"/Admin/Orders-Manager",name:"管理系統：訂單管理",component:Ft,meta:{requiresAuth:!0},children:[{path:"/Admin/Orders-Manager/Order-Creation",name:"管理系統：新增訂單",component:Qt,meta:{requiresAuth:!0}},{path:"/Admin/Orders-Manager/Order-Creation/Order-Details-Creation",name:"管理系統：新增細項",component:Zt,meta:{requiresAuth:!0}},{path:"/Admin/Orders-Manager/Orders-Searching",name:"管理系統：查詢訂單",component:Gt,meta:{requiresAuth:!0}},{path:"/Admin/Orders-Manager/Orders-Searching/Order-Editor",name:"管理系統：編輯訂單",component:Qt,meta:{requiresAuth:!0}},{path:"/Admin/Orders-Manager/Order-Editor/Order-Detail-Editor",name:"管理系統：編輯細項",component:Zt,meta:{requiresAuth:!0}}]},{path:"/Admin/Projects-Manager",name:"管理系統：方案管理",component:Ft,meta:{requiresAuth:!0},children:[{path:"/Admin/Projects-Manager/Project-Creation",name:"管理系統：新增方案",component:ue,meta:{requiresAuth:!0}},{path:"/Admin/Projects-Manager/Projects-Searching/",name:"管理系統：查詢方案",component:ae,meta:{requiresAuth:!0}},{path:"/Admin/Projects-Manager/Project-Editor",name:"管理系統：編輯方案",component:ue,meta:{requiresAuth:!0}}]},{path:"/Admin/Members-Manager",name:"管理系統：會員管理",component:Ft,meta:{requiresAuth:!0},children:[{path:"/Admin/Members-Manager/Member-Creation",name:"管理系統：新增會員",component:ge,meta:{requiresAuth:!0}},{path:"/Admin/Members-Manager/Members-Searching/",name:"管理系統：查詢會員",component:pe,meta:{requiresAuth:!0}},{path:"/Admin/Members-Manager/Member-Editor",name:"管理系統：編輯會員",component:ge,meta:{requiresAuth:!0}}]}]}]}]});function _e(t){var e=document.cookie,a=0,r=0;switch(t){case"forestage":a=e.indexOf('kapitanMembersSession="'),r='kapitanMembersSession="'.length;break;case"backstage":a=e.indexOf('kapitanAdminSession="'),r='kapitanAdminSession="'.length}var n=e.substring(a+r),s=n.indexOf('"');return n.substring(0,s)}he.beforeEach(function(t,e,a){var r="https://be-sp-0001-kapitan.herokuapp.com/API/Forestage/SignInAuthentication.php",n="https://be-sp-0001-kapitan.herokuapp.com/API/Backstage/AdminSignInAuthentication.php",s=-1!=t.path.indexOf("Admin");if(t.meta.requiresAuth)if(s){var o=_e("backstage");i.a.post(n,o).then(function(e){console.log(e),e.data.sessionCheck?a():(localStorage.setItem("BackstageBlockBefore",t.path),a({name:"管理系統：登入頁"}))}).catch(function(t){console.log(t)})}else{var l=_e("forestage");i.a.post(r,l).then(function(e){e.data.sessionCheck?a():(localStorage.setItem("ForestageBlockBefore",t.path),a({name:"登入註冊"}))}).catch(function(t){console.log(t)}),-1!=t.path.indexOf("Checkout")?null!=localStorage.getItem("savingProjects")?a():setTimeout(function(){he.push({name:"首頁"})},500):a()}else{if(-1!=t.path.indexOf("Admin")){var c=_e("backstage");"/Admin/SignIn"==t.path&&i.a.post(n,c).then(function(t){t.data.sessionCheck&&(alert("你已登入。系統將引導您回首頁。"),setTimeout(function(){he.push({name:"管理系統：首頁"})},500))}).catch(function(t){console.log(t)})}else if("/Login"==t.path){var u=_e("forestage");i.a.post(r,u).then(function(t){t.data.sessionCheck&&(alert("你已登入。系統將引導您回首頁。"),setTimeout(function(){he.push({name:"首頁"})},500))}).catch(function(t){console.log(t)})}a()}});var Ce=he;f.a.prototype.$eventBus=new f.a;var be=a("dZ1M"),De=a.n(be),Pe={cloudName:"hugo-chiang",cloudUrlprefix:"https://res.cloudinary.com/hugo-chiang/image/upload/",cloudNoImgUrl:"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/ur4ulenyc0zq7gwhewfn.jpg",cloudNoAvatarUrl:"Side-Projects/Frontend-Side-Projects-0001-Kapitan/Web-Imgs/jg4rylsnwucotopfjaz9.png",membersAvatarPreset:"FE-SP-0001-Kapitan-Members-Avatar",projectAvatarPreset:"FE-SP-0001-Kapitan-Projects-Avatar",projectContentPreset:"FE-SP-0001-Kapitan-Projects-Content",projectCarouselPreset:"FE-SP-0001-Kapitan-Projects-Carousel",signInedID:""},Ie=a("VU/8")(Pe,null,!1,null,null,null).exports;var ke={format:function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},getKapitanSession:function(t){var e=document.cookie,a=0,r=0;switch(t){case"forestage":a=e.indexOf('kapitanMembersSession="'),r='kapitanMembersSession="'.length;break;case"backstage":a=e.indexOf('kapitanAdminSession="'),r='kapitanAdminSession="'.length}var n=e.substring(a+r),s=n.indexOf('"');return n.substring(0,s)}},Ae=a("VU/8")(ke,null,!1,null,null,null).exports;window.$=u.a,f.a.config.productionTip=!1,f.a.use(l.a,i.a,u.a,m.a,p.a,v,{data:function(){return{}}},De.a,{configuration:{cloudName:"demo"},components:{CldImage:be.CldImage,CldTransformation:be.CldTransformation}},oe.a),f.a.prototype.GlobalVariables=Ie,f.a.prototype.GlobalFunctions=Ae,Date.prototype.Format=Ae.format,n()(C).forEach(function(t){Object(g.d)(t,C[t])}),Object(g.e)("zh_TW",_.a),f.a.component("ValidationObserver",g.a),f.a.component("ValidationProvider",g.b),Object(g.c)({events:"input|blur|change",classes:{valid:"is-valid",invalid:"is-invalid"}}),f.a.filter("currency",function(t){return Number(t).toFixed(0).replace(/./g,function(t,e,a){return e&&"."!==t&&(a.length-e)%3==0?","+t:t})}),f.a.filter("dollarSign",function(t){return"$ "+t}),f.a.filter("memberStatus",function(t){switch(t){case"-1":return"僅供測試";case"0":return"停權";case"1":return"正常";case"2":return"警告"}}),f.a.filter("orderStatus",function(t){switch(t){case"-1":return"僅供測試";case"0":return"已取消";case"1":return"進行中";case"2":return"已完成"}}),f.a.filter("orderDetailStatus",function(t){switch(t){case"-1":return"僅供測試";case"0":return"已取消";case"1":return"進行中";case"2":return"已完成"}}),f.a.filter("projectStatus",function(t){switch(t){case"-1":return"僅供測試";case"0":return"已下線";case"1":return"上線中"}}),new f.a({el:"#app",router:Ce,components:{App:I},template:"<App/>"})},Nol5:function(t,e){},SGVs:function(t,e){},Sbz5:function(t,e){},SjS3:function(t,e){t.exports={code:"zh_TW",messages:{alpha:"{_field_} 須以英文組成",alpha_dash:"{_field_} 須以英數、斜線及底線組成",alpha_num:"{_field_} 須以英數組成",alpha_spaces:"{_field_} 須以英文及空格組成",between:"{_field_} 須介於 {min} 至 {max}之間",confirmed:" {_field_} 不一致",digits:"{_field_} 須為 {length} 位數字",dimensions:"{_field_} 圖片尺寸不正確。須為 {width} x {height} 像素",email:"{_field_} 須為有效的電子信箱",excluded:"{_field_} 的選項無效",ext:"{_field_} 須為有效的檔案",image:"{_field_} 須為圖片",oneOf:"{_field_} 的選項無效",integer:"{_field_} 須為整數",length:"{_field_} 的長度須為 {length}",max:"{_field_} 不能大於 {length} 個字元",max_value:"{_field_} 不得大於 {max}",mimes:"{_field_} 須為有效的檔案類型",min:"{_field_} 不能小於 {length} 個字元",min_value:"{_field_} 不得小於 {min}",numeric:"{_field_} 須為數字",regex:"{_field_} 的格式錯誤",required:"{_field_} 為必填",required_if:"{_field_} 為必填",size:"{_field_} 的檔案須小於 {size}KB",double:"{_field_}字段必須為有效的小數"}}},VW9B:function(t,e){},aaNq:function(t,e){},ao2D:function(t,e){},cpKh:function(t,e){},gc1I:function(t,e){},h0as:function(t,e){},iCDJ:function(t,e){},igBC:function(t,e){},ixDS:function(t,e,a){t.exports=a.p+"static/img/Kapitan-Logo-Horizontal-Version-01.a68f274.png"},j0ji:function(t,e){},ltGg:function(t,e){},rK2Q:function(t,e){},"s6+2":function(t,e){},"sL/C":function(t,e){},tCc1:function(t,e){},tWgi:function(t,e){},vRwy:function(t,e){},wkUp:function(t,e){},yRXD:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7d60ef43ce82e883e3df.js.map